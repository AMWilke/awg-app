(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"HR/a":function(t,e,i){"use strict";i.r(e),i.d(e,"EditionViewModule",function(){return O});var o=i("mrSG"),n=i("fXoL"),r=i("PCNd"),s=i("tyNb"),a=i("6aU4"),c=i("NbbI");let d=class{constructor(t,e,i){this.editionService=t,this.route=e,this.router=i,this.editionViewTitle="Beispieledition ausgew\xe4hlter Skizzen",this.editionViewId="awg-edition-view"}ngOnInit(){this.routeToSidenav(),this.getEditionWorkFromRoute()}getEditionWorkFromRoute(){this.route.paramMap.subscribe(t=>{const e=t.get("compositionId")?t.get("compositionId"):"";this.editionService.updateEditionWork(a.e[e.toUpperCase()]),this.editionWork$=this.editionService.getEditionWork()})}routeToSidenav(){this.router.navigate([{outlets:{side:"editionInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}};d.ctorParameters=()=>[{type:c.b},{type:s.a},{type:s.d}],d=Object(o.b)([Object(n.n)({selector:"awg-edition-view",template:'\x3c!-- content: edition-view --\x3e\n\n\x3c!-- heading --\x3e\n<awg-heading [title]="editionViewTitle" [id]="editionViewId"></awg-heading>\n\n<div class="awg-edition-work" *ngIf="editionWork$ | async as editionWork">\n    \x3c!-- TODO: refactor this as selectable breadcrumb --\x3e\n    <h6 class="awg-edition-info-breadcrumb">\n        {{ editionWork.edition.short }} / {{ editionWork.series.full }} / {{ editionWork.section.full }}\n    </h6>\n    <h3 class="awg-edition-info-header">\n        <i class="awg-edition-info-header-title">{{ editionWork.titleStatement.title }}</i\n        >&nbsp;<span class="awg-edition-info-header-catalogue">{{ editionWork.work.short }}</span>\n    </h3>\n    \x3c!-- declamation --\x3e\n    <div class="awg-edition-responsibility mt-3">\n        <p>\n            Ediert von\n            <span class="editor" *ngFor="let editor of editionWork.responsibilityStatement.editors; last as isLast">\n                <a href="{{ editor.homepage }}">{{ editor.name }}</a\n                ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n            </span>\n            <br />\n            Versionsdatum: <span class="version">{{ editionWork.responsibilityStatement.lastModified }}</span>\n        </p>\n    </div>\n</div>\n\n\x3c!-- edition routes --\x3e\n<router-outlet></router-outlet>\n',styles:[""]})],d);var l=i("XNiG"),u=i("1G5W"),h=i("wjQg");let p=class{constructor(t){this.editionService=t,this._destroy$=new l.a}ngOnInit(){this.getEditionWork()}getEditionWork(){this.editionService.getEditionWork().pipe(Object(u.a)(this._destroy$)).subscribe(t=>{this.editionWork=t,this.setButtons()})}setButtons(){this.editionRouterLinkButtons=[new h.a(this.editionWork.baseRoute,this.editionWork.introRoute.route,a.a.EDITION_INTRO.short,!1),new h.a(this.editionWork.baseRoute,this.editionWork.detailRoute.route,a.a.EDITION_DETAIL.short,!1),new h.a(this.editionWork.baseRoute,this.editionWork.reportRoute.route,a.a.EDITION_REPORT.short,!1),new h.a(this.editionWork.baseRoute,this.editionWork.graphRoute.route,a.a.EDITION_GRAPH.short,!1)]}ngOnDestroy(){this._destroy$.next(!0),this._destroy$.unsubscribe()}};p.ctorParameters=()=>[{type:c.b}],p=Object(o.b)([Object(n.n)({selector:"awg-edition-overview",template:'<awg-router-link-button-group\n    *ngIf="editionRouterLinkButtons"\n    [routerLinkButtons]="editionRouterLinkButtons"\n    [queryParamsHandling]="\'\'"\n>\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n',styles:[""]})],p);let g=class{constructor(){}ngOnInit(){}};g.ctorParameters=()=>[],g=Object(o.b)([Object(n.n)({selector:"awg-edition-section",template:"\x3c!--\n<p>edition-section works!</p>\n--\x3e\n\n<router-outlet></router-outlet>\n",styles:[""]})],g);let b=class{constructor(){}ngOnInit(){}};b.ctorParameters=()=>[],b=Object(o.b)([Object(n.n)({selector:"awg-edition-series",template:"<p>edition-series works!</p>\n\n<router-outlet></router-outlet>\n",styles:[""]})],b);let _=class{constructor(){}ngOnInit(){}};_.ctorParameters=()=>[],_=Object(o.b)([Object(n.n)({selector:"awg-edition-type",template:"<p>edition-type works!</p>\n\n<router-outlet></router-outlet>\n",styles:[""]})],_);const k=[{path:"",component:g,children:[{path:"composition/:compositionId",component:d,children:[{path:"",component:p,children:[{path:a.a.EDITION_INTRO.route,loadChildren:()=>i.e(10).then(i.bind(null,"eeaE")).then(t=>t.EditionIntroModule)},{path:a.a.EDITION_DETAIL.route,loadChildren:()=>Promise.all([i.e(0),i.e(6)]).then(i.bind(null,"7Yty")).then(t=>t.EditionDetailModule)},{path:a.a.EDITION_REPORT.route,loadChildren:()=>Promise.all([i.e(0),i.e(11)]).then(i.bind(null,"drwT")).then(t=>t.EditionReportModule)},{path:a.a.EDITION_GRAPH.route,loadChildren:()=>Promise.all([i.e(0),i.e(5)]).then(i.bind(null,"IAz0")).then(t=>t.EditionGraphModule)},{path:"",redirectTo:"/"+a.a.EDITION_INTRO.route,pathMatch:"full"}]}]}]}],I=[d,p,g,b,_];let E=class{};E=Object(o.b)([Object(n.M)({imports:[s.e.forChild(k)],exports:[s.e]})],E);let O=class{};O=Object(o.b)([Object(n.M)({imports:[r.a,E],declarations:[I]})],O)},NbbI:function(t,e,i){"use strict";i.d(e,"a",function(){return h}),i.d(e,"b",function(){return b});var o=i("mrSG"),n=i("fXoL"),r=i("tk/3"),s=i("cp0P"),a=i("LRne"),c=i("xbPD"),d=i("IzEk"),l=i("JIr8"),u=i("6aU4");let h=class{constructor(t){this.http=t,this._assetWorkPath=""}getEditionDetailData(t){this._setAssetWorkPath(t);const e=this._getFolioConvoluteData(),i=this._getSvgSheetsData(),o=this._getTextcriticsListData();return Object(s.a)([e,i,o]).pipe(Object(c.a)([new u.g,new u.d,new u.n]),Object(d.a)(1))}getEditionGraphData(t){this._setAssetWorkPath(t);return this._getGraphData().pipe(Object(c.a)(new u.i),Object(d.a)(1))}getEditionIntroData(t){this._setAssetWorkPath(t);return this._getIntroData().pipe(Object(c.a)(new u.j),Object(d.a)(1))}getEditionReportData(t){this._setAssetWorkPath(t);const e=this._getSourceListData(),i=this._getSourceDescriptionListData(),o=this._getSourceEvaluationListData(),n=this._getTextcriticsListData();return Object(s.a)([e,i,o,n]).pipe(Object(c.a)([new u.m,new u.k,new u.l,new u.n]),Object(d.a)(1))}_setAssetWorkPath(t){const e=t.series.route+t.section.route+t.work.route;this._assetWorkPath=u.a.EDITION_ASSETS.baseRoute+e}_getFolioConvoluteData(){const t=u.a.EDITION_ASSETS.folioConvoluteFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getGraphData(){const t=u.a.EDITION_ASSETS.graphFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getIntroData(){const t=u.a.EDITION_ASSETS.introFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getSourceListData(){const t=u.a.EDITION_ASSETS.sourceListFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getSourceDescriptionListData(){const t=u.a.EDITION_ASSETS.sourceDescriptionListFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getSourceEvaluationListData(){const t=u.a.EDITION_ASSETS.sourceEvaluationListFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getSvgSheetsData(){const t=u.a.EDITION_ASSETS.svgSheetsFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getTextcriticsListData(){const t=u.a.EDITION_ASSETS.textcriticsFile,e=`${this._assetWorkPath}/${t}`;return this._getJsonData(e)}_getJsonData(t){return this.http.get(t).pipe(Object(l.a)(this._handleError("_getJsonData",[])))}_handleError(t,e){return i=>(this._logError(`${t} failed: ${i.message}`),Object(a.a)(e))}_logError(t){console.error(t)}};h.ctorParameters=()=>[{type:r.b}],h=Object(o.b)([Object(n.E)({providedIn:"root"})],h);var p,g=i("jtHE");let b=p=class{constructor(){this._bufferSize=1,this._editionWorkSubject=new g.a(this._bufferSize),this._editionWorkStream$=this._editionWorkSubject.asObservable()}static _filterTextcriticalComments(t,e,i){const o=t.measure.replace("[","").replace("]",""),n=t.system.replace("[","").replace("]","");switch(e.type){case u.c.measure:return o===e.id;case u.c.system:return n===e.id;case u.c.item:return i===+e.id}}getTextcriticalComments(t,e){if(t&&e)return t.filter((t,i)=>p._filterTextcriticalComments(t,e,i))}getEditionWork(){return this._editionWorkStream$}updateEditionWork(t){this._editionWorkSubject.next(t)}clearEditionWork(){this._editionWorkSubject.next(null)}};b=p=Object(o.b)([Object(n.E)({providedIn:"root"})],b)}}]);