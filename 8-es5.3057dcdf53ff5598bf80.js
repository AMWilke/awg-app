!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"HR/a":function(e,i,o){"use strict";o.r(i),o.d(i,"EditionViewModule",(function(){return W}));var r=o("mrSG"),a=o("fXoL"),s=o("PCNd"),u=o("tyNb"),c=o("6aU4"),l=o("NbbI"),d=function(){function e(n,i,o){t(this,e),this.editionService=n,this.route=i,this.router=o,this.editionViewTitle="Beispieledition ausgew\xe4hlter Skizzen",this.editionViewId="awg-edition-view"}return n(e,[{key:"ngOnInit",value:function(){this.routeToSidenav(),this.getEditionWorkFromRoute()}},{key:"getEditionWorkFromRoute",value:function(){var t=this;this.route.paramMap.subscribe((function(e){var n=e.get("compositionId")?e.get("compositionId"):"";t.editionService.updateEditionWork(c.e[n]),t.editionWork$=t.editionService.getEditionWork()}))}},{key:"routeToSidenav",value:function(){this.router.navigate([{outlets:{side:"editionInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}}]),e}();d.ctorParameters=function(){return[{type:l.b},{type:u.a},{type:u.d}]},d=Object(r.b)([Object(a.n)({selector:"awg-edition-view",template:'\x3c!-- content: edition-view --\x3e\n\n\x3c!-- heading --\x3e\n<awg-heading [title]="editionViewTitle" [id]="editionViewId"></awg-heading>\n\n<div class="awg-edition-work" *ngIf="editionWork$ | async as editionWork">\n    \x3c!-- TODO: refactor this as selectable breadcrumb --\x3e\n    <h6 class="awg-edition-info-breadcrumb">\n        {{ editionWork.edition.short }} / {{ editionWork.series.full }} / {{ editionWork.section.full }}\n    </h6>\n    <h3 class="awg-edition-info-header">\n        <i class="awg-edition-info-header-title">{{ editionWork.titleStatement.title }}</i\n        >&nbsp;<span class="awg-edition-info-header-catalogue">{{ editionWork.work.short }}</span>\n    </h3>\n    \x3c!-- declamation --\x3e\n    <div class="awg-edition-responsibility mt-3">\n        <p>\n            Ediert von\n            <span class="editor" *ngFor="let editor of editionWork.responsibilityStatement.editors; last as isLast">\n                <a href="{{ editor.homepage }}">{{ editor.name }}</a\n                ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n            </span>\n            <br />\n            Versionsdatum: <span class="version">{{ editionWork.responsibilityStatement.lastModified }}</span>\n        </p>\n    </div>\n</div>\n\n\x3c!-- edition routes --\x3e\n<router-outlet></router-outlet>\n',styles:[""]})],d);var h=o("XNiG"),p=o("wjQg"),f=o("1G5W"),k=function(){function e(n){t(this,e),this.editionService=n,this.destroy$=new h.a}return n(e,[{key:"ngOnInit",value:function(){this.getEditionWork()}},{key:"getEditionWork",value:function(){var t=this;this.editionService.getEditionWork().pipe(Object(f.a)(this.destroy$)).subscribe((function(e){t.editionWork=e,t.setButtons()}))}},{key:"setButtons",value:function(){this.editionRouterLinkButtons=[new p.a(this.editionWork.baseRoute,this.editionWork.introRoute.route,c.a.editionIntro.short,!1),new p.a(this.editionWork.baseRoute,this.editionWork.detailRoute.route,c.a.editionDetail.short,!1),new p.a(this.editionWork.baseRoute,this.editionWork.reportRoute.route,c.a.editionReport.short,!1),new p.a(this.editionWork.baseRoute,this.editionWork.graphRoute.route,c.a.editionGraph.short,!1)]}},{key:"ngOnDestroy",value:function(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}]),e}();k.ctorParameters=function(){return[{type:l.b}]},k=Object(r.b)([Object(a.n)({selector:"awg-edition-overview",template:'<awg-router-link-button-group\n    *ngIf="editionRouterLinkButtons"\n    [routerLinkButtons]="editionRouterLinkButtons"\n    [queryParamsHandling]="\'\'"\n>\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n',styles:[""]})],k);var b=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();b.ctorParameters=function(){return[]},b=Object(r.b)([Object(a.n)({selector:"awg-edition-section",template:"\x3c!--\n<p>edition-section works!</p>\n--\x3e\n\n<router-outlet></router-outlet>\n",styles:[""]})],b);var g=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();g.ctorParameters=function(){return[]},g=Object(r.b)([Object(a.n)({selector:"awg-edition-series",template:"<p>edition-series works!</p>\n\n<router-outlet></router-outlet>\n",styles:[""]})],g);var v=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();v.ctorParameters=function(){return[]},v=Object(r.b)([Object(a.n)({selector:"awg-edition-type",template:"<p>edition-type works!</p>\n\n<router-outlet></router-outlet>\n",styles:[""]})],v);var y=[{path:"",component:b,children:[{path:"composition/:compositionId",component:d,children:[{path:"",component:k,children:[{path:c.a.editionIntro.route,loadChildren:function(){return o.e(11).then(o.bind(null,"eeaE")).then((function(t){return t.EditionIntroModule}))}},{path:c.a.editionDetail.route,loadChildren:function(){return Promise.all([o.e(0),o.e(7)]).then(o.bind(null,"7Yty")).then((function(t){return t.EditionDetailModule}))}},{path:c.a.editionReport.route,loadChildren:function(){return Promise.all([o.e(0),o.e(12)]).then(o.bind(null,"drwT")).then((function(t){return t.EditionReportModule}))}},{path:c.a.editionGraph.route,loadChildren:function(){return Promise.all([o.e(0),o.e(6)]).then(o.bind(null,"IAz0")).then((function(t){return t.EditionGraphModule}))}},{path:"",redirectTo:"/"+c.a.editionIntro.route,pathMatch:"full"}]}]}]}],w=[d,k,b,g,v],m=function e(){t(this,e)};m=Object(r.b)([Object(a.L)({imports:[u.e.forChild(y)],exports:[u.e]})],m);var W=function e(){t(this,e)};W=Object(r.b)([Object(a.L)({imports:[s.a,m],declarations:[w]})],W)},NbbI:function(e,i,o){"use strict";o.d(i,"a",(function(){return f})),o.d(i,"b",(function(){return g}));var r=o("mrSG"),a=o("fXoL"),s=o("tk/3"),u=o("cp0P"),c=o("LRne"),l=o("xbPD"),d=o("IzEk"),h=o("JIr8"),p=o("6aU4"),f=function(){function e(n){t(this,e),this.http=n,this.assetWorkPath=""}return n(e,[{key:"getEditionDetailData",value:function(t){this.setAssetWorkPath(t);var e=this.getFolioConvoluteData(),n=this.getSvgSheetsData(),i=this.getTextcriticsListData();return Object(u.a)([e,n,i]).pipe(Object(l.a)([new p.g,new p.d,new p.n]),Object(d.a)(1))}},{key:"getEditionGraphData",value:function(t){return this.setAssetWorkPath(t),this.getGraphData().pipe(Object(l.a)(new p.i),Object(d.a)(1))}},{key:"getEditionIntroData",value:function(t){return this.setAssetWorkPath(t),this.getIntroData().pipe(Object(l.a)(new p.j),Object(d.a)(1))}},{key:"getEditionReportData",value:function(t){this.setAssetWorkPath(t);var e=this.getSourceListData(),n=this.getSourceDescriptionListData(),i=this.getSourceEvaluationListData(),o=this.getTextcriticsListData();return Object(u.a)([e,n,i,o]).pipe(Object(l.a)([new p.m,new p.k,new p.l,new p.n]),Object(d.a)(1))}},{key:"setAssetWorkPath",value:function(t){var e=t.series.route+t.section.route+t.work.route;this.assetWorkPath=p.a.editionAssets.baseRoute+e}},{key:"getFolioConvoluteData",value:function(){var t=p.a.editionAssets.folioConvoluteFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getGraphData",value:function(){var t=p.a.editionAssets.graphFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getIntroData",value:function(){var t=p.a.editionAssets.introFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getSourceListData",value:function(){var t=p.a.editionAssets.sourceListFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getSourceDescriptionListData",value:function(){var t=p.a.editionAssets.sourceDescriptionListFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getSourceEvaluationListData",value:function(){var t=p.a.editionAssets.sourceEvaluationListFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getSvgSheetsData",value:function(){var t=p.a.editionAssets.svgSheetsFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getTextcriticsListData",value:function(){var t=p.a.editionAssets.textcriticsFile,e="".concat(this.assetWorkPath,"/").concat(t);return this.getJsonData(e)}},{key:"getJsonData",value:function(t){return this.http.get(t).pipe(Object(h.a)(this.handleError("getJsonData",[])))}},{key:"handleError",value:function(t,e){var n=this;return function(i){return n.log("".concat(t," failed: ").concat(i.message)),Object(c.a)(e)}}},{key:"log",value:function(t){console.log(t)}}]),e}();f.ctorParameters=function(){return[{type:s.b}]},f=Object(r.b)([Object(a.D)({providedIn:"root"})],f);var k,b=o("jtHE"),g=k=function(){function e(){t(this,e),this.bufferSize=1,this.editionWorkSubject=new b.a(this.bufferSize),this.editionWorkStream$=this.editionWorkSubject.asObservable()}return n(e,[{key:"getTextcriticalComments",value:function(t,e){if(t&&e)return t.filter((function(t,n){return k.filterTextcriticalComments(t,e,n)}))}},{key:"getEditionWork",value:function(){return this.editionWorkStream$}},{key:"updateEditionWork",value:function(t){this.editionWorkSubject.next(t)}},{key:"clearEditionWork",value:function(){this.editionWorkSubject.next(null)}}],[{key:"filterTextcriticalComments",value:function(t,e,n){var i=t.measure.replace("[","").replace("]",""),o=t.system.replace("[","").replace("]","");switch(e.type){case p.c.measure:return i===e.id;case p.c.system:return o===e.id;case p.c.item:return n===+e.id}}}]),e}();g=k=Object(r.b)([Object(a.D)({providedIn:"root"})],g)}}])}();