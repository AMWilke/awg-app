function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){r=!0,a=l}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"++e5":function(e,t,n){!function(e){"use strict";e.defineMode("sparql",(function(e){var t,n=e.indentUnit;function i(e){return new RegExp("^(?:"+e.join("|")+")$","i")}var r=i(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),a=i(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load"]),s=/[*+\-<>=&|\^\/!\?]/;function o(e,n){var i,l=e.next();if(t=null,"$"==l||"?"==l)return"?"==l&&e.match(/\s/,!1)?"operator":(e.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variable-2");if("<"!=l||e.match(/^[\s\u00a0=]/,!1)){if('"'==l||"'"==l)return n.tokenize=(i=l,function(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==i&&!r){t.tokenize=o;break}r=!r&&"\\"==n}return"string"}),n.tokenize(e,n);if(/[{}\(\),\.;\[\]]/.test(l))return t=l,"bracket";if("#"==l)return e.skipToEnd(),"comment";if(s.test(l))return e.eatWhile(s),"operator";if(":"==l)return e.eatWhile(/[\w\d\._\-]/),"atom";if("@"==l)return e.eatWhile(/[a-z\d\-]/i),"meta";if(e.eatWhile(/[_\w\d]/),e.eat(":"))return e.eatWhile(/[\w\d_\-]/),"atom";var u=e.current();return r.test(u)?"builtin":a.test(u)?"keyword":"variable"}return e.match(/^[^\s\u00a0>]*>?/),"atom"}function l(e,t,n){e.context={prev:e.context,indent:e.indent,col:n,type:t}}function u(e){e.indent=e.context.indent,e.context=e.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(e,n){if(e.sol()&&(n.context&&null==n.context.align&&(n.context.align=!1),n.indent=e.indentation()),e.eatSpace())return null;var i=n.tokenize(e,n);if("comment"!=i&&n.context&&null==n.context.align&&"pattern"!=n.context.type&&(n.context.align=!0),"("==t)l(n,")",e.column());else if("["==t)l(n,"]",e.column());else if("{"==t)l(n,"}",e.column());else if(/[\]\}\)]/.test(t)){for(;n.context&&"pattern"==n.context.type;)u(n);n.context&&t==n.context.type&&(u(n),"}"==t&&n.context&&"pattern"==n.context.type&&u(n))}else"."==t&&n.context&&"pattern"==n.context.type?u(n):/atom|string|variable/.test(i)&&n.context&&(/[\}\]]/.test(n.context.type)?l(n,"pattern",e.column()):"pattern"!=n.context.type||n.context.align||(n.context.align=!0,n.context.col=e.column()));return i},indent:function(e,t){var i=t&&t.charAt(0),r=e.context;if(/[\]\}]/.test(i))for(;r&&"pattern"==r.type;)r=r.prev;var a=r&&i==r.type;return r?"pattern"==r.type?r.col:r.align?r.col+(a?0:1):r.indent+(a?0:n):0},lineComment:"#"}})),e.defineMIME("application/sparql-query","sparql")}(n("VrN/"))},"/6Kk":function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- content: report --\x3e\n<div>\n    \x3c!-- modal --\x3e\n    <awg-modal #modal></awg-modal>\n\n    \x3c!-- sources --\x3e\n    <awg-sources\n        *ngIf="editionReportData$ | async as editionReportData"\n        [sourceListData]="editionReportData[0]"\n        [sourceDescriptionListData]="editionReportData[1]"\n        [sourceEvaluationListData]="editionReportData[2]"\n        (navigateToReportFragmentRequest)="onReportFragmentNavigate($event)"\n        (openModalRequest)="modal.open($event)"\n        (selectSvgSheetRequest)="onSvgSheetSelect($event)"\n    >\n    </awg-sources>\n\n    \x3c!-- textcritics --\x3e\n    <awg-textcritics\n        *ngIf="editionReportData$ | async as editionReportData"\n        [textcriticsData]="editionReportData[3]"\n        (openModalRequest)="modal.open($event)"\n        (selectSvgSheetRequest)="onSvgSheetSelect($event)"\n    >\n    </awg-textcritics>\n</div>\n'},"/Stp":function(e,t,n){"use strict";n.r(t),t.default=""},"25sD":function(e,t,n){"use strict";n.r(t),t.default=""},"2RRz":function(e,t,n){"use strict";n.r(t),t.default=""},"4eNE":function(e,t,n){"use strict";n.r(t),t.default='<table class="table table-hover borderless">\n    <tbody>\n\n    \x3c!--  at the moment only for the first item ("source.siglum == \'A\'") --\x3e\n    <tr *ngFor="let source of sourceListData.sources; let sourceIndex = index">\n        <td class="bold">\n            <ng-container *ngIf="sourceIndex === 0; else modalHint">\n                <a [routerLink]="[\'./\']" fragment="{{source.linkTo}}" [innerHTML]="source.siglum"></a>\n            </ng-container>\n            <ng-template #modalHint>\n                <a (click)="openModal(source.linkTo)" [innerHTML]="source.siglum"></a>\n            </ng-template>\n        </td>\n        <td><span [compile-html]="source.type" [compile-html-ref]="ref"></span> <br/>\n            <span [innerHTML]="source.location"></span>\n        </td>\n    </tr>\n\n    </tbody>\n</table>\n\n'},"4mU8":function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- content: edition detail --\x3e\n<div>\n    \x3c!-- modal --\x3e\n    <awg-modal #modal></awg-modal>\n\n    \x3c!-- body with embedded svg\'s --\x3e\n\n    \x3c!-- convolute view --\x3e\n    <awg-edition-convolute\n        *ngIf="folioConvoluteData && selectedSvgSheet"\n        [folioConvoluteData]="folioConvoluteData"\n        [selectedConvolute]="selectedConvolute"\n        [selectedSvgSheet]="selectedSvgSheet"\n        (openModalRequest)="modal.open($event)"\n        (selectConvoluteRequest)="onConvoluteSelect($event)"\n        (selectSvgSheetRequest)="onSvgSheetSelect($event)"\n    >\n    </awg-edition-convolute>\n\n    \x3c!-- accolade view --\x3e\n    <awg-edition-accolade\n        *ngIf="svgSheetsData && selectedSvgSheet"\n        [svgSheetsData]="svgSheetsData"\n        [selectedSvgSheet]="selectedSvgSheet"\n        [selectedTextcriticalComments]="selectedTextcriticalComments"\n        [selectedOverlay]="selectedOverlay"\n        [showTkA]="showTkA"\n        (openModalRequest)="modal.open($event)"\n        (selectSvgSheetRequest)="onSvgSheetSelect($event)"\n        (selectOverlayRequest)="onOverlaySelect($event)"\n    >\n    </awg-edition-accolade>\n</div>\n'},"5FEQ":function(e,t,n){"use strict";n.r(t),t.default='<ngb-accordion id="tkaAcc" activeIds="tkaPanel">\n    <ngb-panel id="tkaPanel" title="II. Textkritischer Kommentar">\n        <ng-template ngbPanelContent>\n            <awg-critics-list\n                *ngIf="textcriticsData"\n                [textcriticsData]="textcriticsData"\n                (openModalRequest)="openModal($event)"\n                (selectSvgSheetRequest)="selectSvgSheet($event)"\n            ></awg-critics-list>\n        </ng-template>\n    </ngb-panel>\n</ngb-accordion>\n'},"9eWN":function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- content: edition-view --\x3e\n\n\x3c!-- heading --\x3e\n<awg-heading [title]="editionViewTitle" [id]="editionViewId"></awg-heading>\n\n<div class="awg-edition-work" *ngIf="editionWork$ | async as editionWork">\n    \x3c!-- TODO: refactor this as selectable breadcrumb --\x3e\n    <h6>{{ editionWork.edition.short }} / {{ editionWork.series.full }} / {{ editionWork.section.full }}</h6>\n    <h3 class="awg-edition-info-header">\n        <i class="awg-edition-info-header-title">{{ editionWork.titleStatement.title }}</i\n        >&nbsp;<span class="awg-edition-info-header-catalogue">{{ editionWork.work.short }}</span>\n    </h3>\n    \x3c!-- declamation --\x3e\n    <div class="awg-edition-responsibility mt-3">\n        <p>\n            Ediert von\n            <span class="editor" *ngFor="let editor of editionWork.responsibilityStatement.editors; last as isLast">\n                <a href="{{ editor.homepage }}" target="_blank" rel="noopener noreferrer">{{ editor.name }}</a\n                ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n            </span>\n            <br />\n            Versionsdatum: <span class="version">{{ editionWork.responsibilityStatement.lastModified }}</span>\n        </p>\n    </div>\n</div>\n\n\x3c!-- edition routes --\x3e\n<router-outlet></router-outlet>\n'},APMD:function(e,t,n){"use strict";n.r(t),t.default=""},Az6W:function(e,t,n){"use strict";n.r(t),t.default=""},Bx2S:function(e,t,n){"use strict";n.r(t),t.default=""},CPCM:function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- Data: Triples, query, result --\x3e\n\n<div *ngIf="graphRDFInputData" class="row">\n    \x3c!-- awg-graph-triples-input --\x3e\n    <div class="col-lg-6 pr-lg-0">\n        <ngb-accordion #triplesAcc activeIds="">\n            <ngb-panel id="awg-graph-visualizer-triples" title="RDF Triples">\n                <ng-template ngbPanelContent>\n                    \x3c!-- CodeMirror editor instance --\x3e\n                    <ngx-codemirror [(ngModel)]="triples" [options]="cmTriplesConfig"> </ngx-codemirror>\n\n                    <div>\n                        <button class="btn btn-info" (click)="doQuery()">\n                            Update\n                        </button>\n\n                        <button class="btn btn-outline-info" (click)="setInitialTriples()">\n                            Reset\n                        </button>\n                    </div>\n                </ng-template>\n            </ngb-panel>\n        </ngb-accordion>\n    </div>\n\n    \x3c!-- awg-graph-query-input --\x3e\n    <div class="col-lg-6 pl-lg-0">\n        <ngb-accordion #sparqlAcc activeIds="">\n            <ngb-panel id="awg-graph-visualizer-query">\n                <ng-template ngbPanelHeader>\n                    <div class="d-flex align-items-center justify-content-between">\n                        <button ngbPanelToggle class="btn btn-link text-left">SPARQL Abfrage</button>\n                        \x3c!-- Limit --\x3e\n                        <div class="btn-group float-right mr-2" *ngIf="query && query.queryLabel && query.queryString">\n                            <button type="button" class="btn btn-sm btn-outline-info" disabled aria-disabled="true">\n                                Beispielabfragen\n                            </button>\n                            <div\n                                class="btn-group"\n                                ngbDropdown\n                                container="body"\n                                placement="bottom-right"\n                                role="group"\n                                aria-label="Button group with nested dropdown for sample queries"\n                            >\n                                <button class="btn btn-sm btn-info dropdown-toggle-split" ngbDropdownToggle></button>\n                                <div class="dropdown-menu" ngbDropdownMenu>\n                                    <ng-container *ngFor="let q of queryList">\n                                        <button\n                                            class="dropdown-item"\n                                            [class.disabled]="q === query"\n                                            (click)="onQueryChange(q)"\n                                        >\n                                            <span>{{ q.queryLabel }}</span>\n                                        </button>\n                                    </ng-container>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </ng-template>\n                <ng-template ngbPanelContent>\n                    \x3c!-- CodeMirror editor instance --\x3e\n                    <ngx-codemirror [(ngModel)]="query.queryString" [options]="cmSparqlConfig">\n                        \x3c!-- (change)="data.query = $event" --\x3e\n                    </ngx-codemirror>\n\n                    <div>\n                        <div fxLayout="row">\n                            <button class="btn btn-info" color="primary" (click)="doQuery()">\n                                Query\n                            </button>\n\n                            <button class="btn btn-outline-info" (click)="resetQuery(query)">\n                                Reset\n                            </button>\n                        </div>\n                    </div>\n                </ng-template>\n            </ngb-panel>\n        </ngb-accordion>\n    </div>\n\n    \x3c!-- Results --\x3e\n    <div class="col-12">\n        \x3c!-- CONSTRUCT --\x3e\n        \x3c!-- awg-graph-construct-result --\x3e\n        <ngb-accordion\n            #queryConstructResultAcc\n            activeIds="awg-graph-construct-result"\n            *ngIf="queryType === \'construct\'"\n        >\n            <ngb-panel id="awg-graph-construct-result" title="Resultat">\n                <ng-template ngbPanelContent>\n                    <div *ngIf="queryResult | async as queryResult; else loading">\n                        <div *ngIf="queryResult.length > 0; else noResult">\n                            \x3c!-- SPARQL graph visualization --\x3e\n                            <awg-force-graph\n                                class="full-width"\n                                [queryResultTriples]="queryResult"\n                                [height]="defaultForceGraphHeight"\n                                (clickedNodeRequest)="onGraphClick($event)"\n                            >\n                            </awg-force-graph>\n                        </div>\n                        <ng-template #noResult>\n                            <awg-force-graph-no-result [height]="defaultForceGraphHeight"></awg-force-graph-no-result>\n                        </ng-template>\n                    </div>\n                    <ng-template #loading>\n                        <awg-twelve-tone-spinner></awg-twelve-tone-spinner>\n                    </ng-template>\n                </ng-template>\n            </ngb-panel>\n        </ngb-accordion>\n\n        \x3c!-- awg-graph-select-result --\x3e\n        <ngb-accordion #querySelectResultAcc activeIds="awg-graph-select-result" *ngIf="queryType === \'select\'">\n            <ngb-panel id="awg-graph-select-result" title="Result">\n                <ng-template ngbPanelContent>\n                    <p>Got a SELECT request</p>\n                    \x3c!-- SPARQL table visualization --\x3e\n                    \x3c!--\n                       <awg-sparql-table\n                           maxHeight="500px"\n                           [queryResult]="queryResult"\n                           [queryTime]="queryTime"\n                           (clickedNodeRequest)="onTableClick($event)"\n                       >\n                       </awg-sparql-table>\n                       --\x3e\n                    <span *ngIf="!queryResult">No result to show</span>\n                </ng-template>\n            </ngb-panel>\n        </ngb-accordion>\n    </div>\n</div>\n'},"DYz+":function(e,t,n){"use strict";n.r(t),t.default='<ngb-accordion activeIds="awg-convolute-view">\n    <ngb-panel id="awg-convolute-view" title="Konvolut\xfcbersicht">\n        <ng-template ngbPanelContent>\n            \x3c!-- convolute dropDown --\x3e\n            <div class="d-inline-block" ngbDropdown>\n                <a class="btn" id="dropDownConvolutes" ngbDropdownToggle>\n                    <span>{{ selectedConvolute.convoluteId }}</span>\n                </a>\n                <div ngbDropdownMenu aria-labelledby="dropDownConvolutes">\n                    <a\n                        class="dropdown-item"\n                        *ngFor="let conv of folioConvoluteData.convolutes"\n                        (click)="selectConvolute(conv.convoluteId)"\n                        >{{ conv.convoluteId }}</a\n                    >\n                </div>\n            </div>\n\n            \x3c!-- folio overview --\x3e\n            <awg-edition-folio\n                *ngIf="selectedConvolute && selectedConvolute.folios && selectedSvgSheet"\n                [folioData]="selectedConvolute.folios"\n                [selectedSvgSheet]="selectedSvgSheet"\n                (openModalRequest)="openModal($event)"\n                (selectSvgSheetRequest)="selectSvgSheet($event)"\n            >\n            </awg-edition-folio>\n\n            \x3c!-- folio legend --\x3e\n            <div class="col-12">\n                Legende:&nbsp;\n                <ng-container *ngFor="let legend of folioLegends">\n                    <span class="{{ legend.color }}">\n                        <fa-icon [icon]="faSquare"></fa-icon>\n                        {{ legend.label }}\n                    </span>\n                </ng-container>\n            </div>\n        </ng-template>\n    </ngb-panel>\n</ngb-accordion>\n'},GMLg:function(e,t,n){"use strict";n.r(t),t.default=""},"HR/a":function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),r=n("8Y7J"),a=n("PCNd"),s=n("6aU4"),o=function(){function e(){_classCallCheck(this,e),this.itemsOffsetCorrection=4}return _createClass(e,[{key:"getFolioSvgData",value:function(e,t){var n=new s.e(e,t,this.itemsOffsetCorrection);return new s.g(n)}},{key:"addViewBoxToSnapSvgCanvas",value:function(e,t){e.attr({viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight,version:"1.1",xmlns:"https://www.w3.org/2000/svg",xlink:"https://www.w3.org/1999/xlink",preserveAspectRatio:"xMinYMin meet"})}},{key:"addFolioToSnapSvgCanvas",value:function(e,t,n,i,r){this.ref=r;var a=e.group();this.addFolioSheetToSnapSvgCanvas(e,a,t,n),this.addFolioSystemsToSnapSvgCanvas(e,a,t,n),this.addFolioItemsToSnapSvgCanvas(e,a,t,i)}},{key:"addFolioSheetToSnapSvgCanvas",value:function(e,t,n,i){var r=n.sheet.folioId,a=n.sheet.upperLeftCorner.x,s=n.sheet.upperLeftCorner.y,o=n.sheet.lowerRightCorner.x,l=n.sheet.lowerRightCorner.y;t.attr({sheetGroupId:r,class:"sheet-group"});var u=e.rect(a,s,o,l);u.attr({fill:"white",stroke:i,strokeWidth:1});var c=Snap.parse("<title>Bl. "+r+"</title>");t.append(c),t.add(u)}},{key:"addFolioSystemsToSnapSvgCanvas",value:function(e,t,n,i){n.systems.lineArrays.forEach((function(r,a){var s=e.group();s.attr({systemLineGroupId:a+1,class:"system-line-group"}),r.forEach((function(t){var n=t.startPoint.x,r=t.startPoint.y,a=t.endPoint.x,o=t.endPoint.y,l=e.line(n,r,a,o);l.attr({class:"system-line",stroke:i,strokeWidth:.7}),s.add(l)}));var o=n.systems.lineLabelArray[a].x,l=n.systems.lineLabelArray[a].y,u=a+1,c=e.text(o,l,u);c.attr({class:"system-label",dominantBaseline:"hanging",fill:i});var h=e.group(s,c);h.attr({systemsGroupId:a+1,class:"systems-group"}),t.add(h)}))}},{key:"addFolioItemsToSnapSvgCanvas",value:function(e,t,n,i){var r=this;n.contentItemsArray.forEach((function(n){if(n){var a=n.upperLeftCorner.x+n.width/2,s=n.upperLeftCorner.y+n.height/2,o=n.measure?[n.sigle," T. "+n.measure]:[n.sigle],l=e.text(0,0,o);l.attr({class:"item-label",style:"font: 12px Source Sans Pro, source-sans-pro, sans-serif",dominantBaseline:"middle"}),l.select("tspan:first-of-type").attr({x:a,y:s,textAnchor:"middle"}),o.length>1&&l.select("tspan:last-of-type").attr({x:a,y:s,textAnchor:"middle",dy:"1.2em"});var u=e.group();n.lineArray.forEach((function(t){var n=t.startPoint.x,i=t.startPoint.y,r=t.endPoint.x,a=t.endPoint.y,s=e.line(n,i,r,a);u.add(s)})),u.attr({class:"item-shape",strokeWidth:2,fill:"white"});var c=e.el("a");c.attr({class:"item-link"}),c.add(u),c.add(l);var h=e.group(c);h.attr({itemGroupId:o,itemId:n.sigle,class:"item-group"});var f=Snap.parse("<title>"+o+"</title>");h.append(f),!1===n.selectable?(h.click((function(){return r.ref.openModal(n.linkTo)})),h.attr({stroke:"grey",fill:"grey"})):(h.click((function(){return r.ref.selectSvgSheet(n.sigle)})),h.attr({stroke:i,fill:i})),t.add(h)}}))}}]),e}();o=Object(i.a)([Object(r.C)({providedIn:"root"})],o);var l=function(){function e(t){_classCallCheck(this,e),this.folioService=t,this.openModalRequest=new r.w,this.selectSvgSheetRequest=new r.w,this.canvasArray=[],this.folioSvgDataArray=[],this.vbArray=[],this.bgColor="#a3a3a3",this.fgColor="orange",this._folioSettings={factor:1.5,formatX:175,formatY:270,initialOffsetX:5,initialOffsetY:5,numberOfFolios:0},this.ref=this}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.prepareFolioSvgOutput()}},{key:"ngAfterViewChecked",value:function(){this.renderSnapSvg(),this.toggleActiveClass()}},{key:"toggleActiveClass",value:function(){var e=this;this.canvasArray&&this.canvasArray.forEach((function(t){t.selectAll(".item-group").forEach((function(t){var n=t.node.attributes.itemId.value;t.toggleClass("active",e.isSelectedSvgSheet(n))}))}))}},{key:"prepareFolioSvgOutput",value:function(){for(var e=0;e<this.folioData.length;e++){var t=this.folioData[e];this.folioSettings={factor:this.folioSettings.factor,formatX:+t.format.width,formatY:+t.format.height,initialOffsetX:this.folioSettings.initialOffsetX,initialOffsetY:this.folioSettings.initialOffsetY,numberOfFolios:+this.folioData.length},this.vbArray[e]=new s.n(this.folioSettings),this.folioSvgDataArray[e]=this.folioService.getFolioSvgData(this.folioSettings,t)}}},{key:"renderSnapSvg",value:function(){var e=this;this.canvasArray=[],this.folioSvgDataArray.map((function(t,n){var i="#folio-"+t.sheet.folioId,r=Snap(i);r&&(e.folioService.addViewBoxToSnapSvgCanvas(r,e.vbArray[n]),e.folioService.addFolioToSnapSvgCanvas(r,t,e.bgColor,e.fgColor,e.ref),e.canvasArray.push(r))}))}},{key:"isSelectedSvgSheet",value:function(e){return e===this.selectedSvgSheet.id}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}},{key:"folioSettings",get:function(){return this._folioSettings},set:function(e){this._folioSettings=e}}]),e}();l.ctorParameters=function(){return[{type:o}]},Object(i.a)([Object(r.F)()],l.prototype,"folioData",void 0),Object(i.a)([Object(r.F)()],l.prototype,"selectedSvgSheet",void 0),Object(i.a)([Object(r.R)()],l.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],l.prototype,"selectSvgSheetRequest",void 0),l=Object(i.a)([Object(r.n)({selector:"awg-edition-folio",template:__importDefault(n("oSKf")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("xWZ6")).default]})],l);var u=function e(){_classCallCheck(this,e)};u=Object(i.a)([Object(r.K)({imports:[a.a],declarations:[l],exports:[l]})],u);var c=function(){function e(){_classCallCheck(this,e),this.openModalRequest=new r.w,this.selectSvgSheetRequest=new r.w,this.ref=this}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],c.prototype,"textcriticalComments",void 0),Object(i.a)([Object(r.R)()],c.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],c.prototype,"selectSvgSheetRequest",void 0),c=Object(i.a)([Object(r.n)({selector:"awg-edition-tka-table",template:__importDefault(n("ZUwu")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("rAo6")).default]})],c);var h=function e(){_classCallCheck(this,e)};h=Object(i.a)([Object(r.K)({imports:[a.a],declarations:[c],exports:[c]})],h);var f=function(){function e(){_classCallCheck(this,e),this.openModalRequest=new r.w,this.selectOverlayRequest=new r.w,this.selectSvgSheetRequest=new r.w}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectOverlay",value:function(e){this.selectOverlayRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],f.prototype,"svgSheetsData",void 0),Object(i.a)([Object(r.F)()],f.prototype,"selectedOverlay",void 0),Object(i.a)([Object(r.F)()],f.prototype,"selectedSvgSheet",void 0),Object(i.a)([Object(r.F)()],f.prototype,"selectedTextcriticalComments",void 0),Object(i.a)([Object(r.F)()],f.prototype,"showTkA",void 0),Object(i.a)([Object(r.R)()],f.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],f.prototype,"selectOverlayRequest",void 0),Object(i.a)([Object(r.R)()],f.prototype,"selectSvgSheetRequest",void 0),f=Object(i.a)([Object(r.n)({selector:"awg-edition-accolade",template:__importDefault(n("YouN")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("LvvI")).default]})],f);var d=n("bIgJ"),p=function(){function e(){_classCallCheck(this,e),this.openModalRequest=new r.w,this.selectConvoluteRequest=new r.w,this.selectSvgSheetRequest=new r.w,this.faSquare=d.faSquare,this.folioLegends=[{color:"olivedrab",label:"aktuell ausgew\xe4hlt"},{color:"orange",label:"ausw\xe4hlbar"},{color:"grey",label:"(momentan noch) nicht ausw\xe4hlbar"}]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){e&&this.openModalRequest.emit(e)}},{key:"selectConvolute",value:function(e){e&&this.selectConvoluteRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){e&&this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],p.prototype,"folioConvoluteData",void 0),Object(i.a)([Object(r.F)()],p.prototype,"selectedConvolute",void 0),Object(i.a)([Object(r.F)()],p.prototype,"selectedSvgSheet",void 0),Object(i.a)([Object(r.R)()],p.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],p.prototype,"selectConvoluteRequest",void 0),Object(i.a)([Object(r.R)()],p.prototype,"selectSvgSheetRequest",void 0),p=Object(i.a)([Object(r.n)({selector:"awg-edition-convolute",template:__importDefault(n("DYz+")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("iUmA")).default]})],p);var g,v,y=function(){function e(){_classCallCheck(this,e),this.selectSvgSheetRequest=new r.w}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"isSelectedSvgSheet",value:function(e){return e===this.selectedSvgSheet.id}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],y.prototype,"svgSheetsData",void 0),Object(i.a)([Object(r.F)()],y.prototype,"selectedSvgSheet",void 0),Object(i.a)([Object(r.R)()],y.prototype,"selectSvgSheetRequest",void 0),y=Object(i.a)([Object(r.n)({selector:"awg-edition-svg-sheet-nav",template:__importDefault(n("Jk/l")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("w/8r")).default]})],y),function(e){e.sheet1="Aa:SkI/1",e.sheet2="Aa:SkI/2",e.sheet3="Aa:SkI/3",e.sheet4="Aa:SkI/4",e.sheet5="Aa:SkI/5"}(g||(g={})),function(e){e.sheet1="A:SkI/1",e.sheet2="A:SkI/2",e.sheet2_1="A:SkI/2.1",e.sheet2_1_1="A:SkI/2.1.1",e.sheet2_1_2="A:SkI/2.1.2",e.sheet2_1_2_1="A:SkI/2.1.2.1",e.sheet2_1_3="A:SkI/2.1.3",e.sheet3="A:SkI/3",e.sheet3_1="A:SkI/3.1",e.sheet3_1_1="A:SkI/3.1.1",e.sheet3_1_2="A:SkI/3.1.2",e.sheet3_1_3="A:SkI/3.1.3",e.sheet3_1_3_1="A:SkI/3.1.3.1",e.sheet4a="A:SkI/4a",e.sheet4b="A:SkI/4b",e.sheet4c="A:SkI/4c",e.sheet4d="A:SkI/4d",e.sheet4_1="A:SkI/4.1",e.sheet4_2="A:SkI/4.2",e.sheet4_3="A:SkI/4.3"}(v||(v={}));var m=function(){function e(){_classCallCheck(this,e),this.selectSvgSheetRequest=new r.w,this.selectOverlayRequest=new r.w,this.svgSheetLabels={op12:{sheet1:g.sheet1,sheet2:g.sheet2,sheet3:g.sheet3,sheet4:g.sheet4,sheet5:g.sheet5},op25:{sheet1:v.sheet1,sheet2:v.sheet2,sheet2_1:v.sheet2_1,sheet2_1_1:v.sheet2_1_1,sheet2_1_2:v.sheet2_1_2,sheet2_1_2_1:v.sheet2_1_2_1,sheet2_1_3:v.sheet2_1_3,sheet3:v.sheet3,sheet3_1:v.sheet3_1,sheet3_1_1:v.sheet3_1_1,sheet3_1_2:v.sheet3_1_2,sheet3_1_3:v.sheet3_1_3,sheet3_1_3_1:v.sheet3_1_3_1,sheet4a:v.sheet4a,sheet4b:v.sheet4b,sheet4c:v.sheet4c,sheet4d:v.sheet4d,sheet4_1:v.sheet4_1,sheet4_2:v.sheet4_2,sheet4_3:v.sheet4_3}}}return _createClass(e,[{key:"ngOnInit",value:function(){this.sheetsArray=this.svgSheetsData.sheets.map((function(e){return e.id}))}},{key:"isSelectedSvgSheet",value:function(e){return e===this.selectedSvgSheet.id}},{key:"isSelectedOverlay",value:function(e,t){var n=new s.b(e,t);return JSON.stringify(n)===JSON.stringify(this.selectedOverlay)}},{key:"selectOverlay",value:function(e,t){var n=new s.b(e,t);this.selectOverlayRequest.emit(n)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],m.prototype,"svgSheetsData",void 0),Object(i.a)([Object(r.F)()],m.prototype,"selectedSvgSheet",void 0),Object(i.a)([Object(r.F)()],m.prototype,"selectedOverlay",void 0),Object(i.a)([Object(r.R)()],m.prototype,"selectSvgSheetRequest",void 0),Object(i.a)([Object(r.R)()],m.prototype,"selectOverlayRequest",void 0),m=Object(i.a)([Object(r.n)({selector:"awg-edition-svg-sheet",template:__importDefault(n("zk7Q")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("VlxX")).default]})],m);var _=function e(){_classCallCheck(this,e)};_=Object(i.a)([Object(r.K)({imports:[a.a,u,h],declarations:[f,p,y,m],exports:[f,p,y,m]})],_);var x=function e(){_classCallCheck(this,e)};x=Object(i.a)([Object(r.K)({imports:[a.a],declarations:[]})],x);var b=n("XNiG"),w=n("Kj3r"),k=n("1G5W");function S(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a,s,o,l,u,c,h,f,d=e._root,p={data:i},g=e._x0,v=e._y0,y=e._x1,m=e._y1;if(!d)return e._root=p,e;for(;d.length;)if((u=t>=(a=(g+y)/2))?g=a:y=a,(c=n>=(s=(v+m)/2))?v=s:m=s,r=d,!(d=d[h=c<<1|u]))return r[h]=p,e;if(o=+e._x.call(null,d.data),l=+e._y.call(null,d.data),t===o&&n===l)return p.next=d,r?r[h]=p:e._root=p,e;do{r=r?r[h]=new Array(4):e._root=new Array(4),(u=t>=(a=(g+y)/2))?g=a:y=a,(c=n>=(s=(v+m)/2))?v=s:m=s}while((h=c<<1|u)==(f=(l>=s)<<1|o>=a));return r[f]=d,r[h]=p,e}var O=function(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r};function D(e){return e[0]}function C(e){return e[1]}function R(e,t,n){var i=new j(null==t?D:t,null==n?C:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function j(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function I(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var q=R.prototype=j.prototype;q.copy=function(){var e,t,n=new j(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=I(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var r=0;r<4;++r)(t=i.source[r])&&(t.length?e.push({source:t,target:i.target[r]=new Array(4)}):i.target[r]=I(t));return n},q.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return S(this.cover(t,n),t,n,e)},q.addAll=function(e){var t,n,i,r,a=e.length,s=new Array(a),o=new Array(a),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(s[n]=i,o[n]=r,i<l&&(l=i),i>c&&(c=i),r<u&&(u=r),r>h&&(h=r));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<a;++n)S(this,s[n],o[n],e[n]);return this},q.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s,o,l=r-n,u=this._root;n>e||e>=r||i>t||t>=a;)switch(o=(t<i)<<1|e<n,(s=new Array(4))[o]=u,u=s,l*=2,o){case 0:r=n+l,a=i+l;break;case 1:n=r-l,a=i+l;break;case 2:r=n+l,i=a-l;break;case 3:n=r-l,i=a-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this},q.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},q.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},q.find=function(e,t,n){var i,r,a,s,o,l,u,c=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new O(g,c,h,f,d)),null==n?n=1/0:(c=e-n,h=t-n,f=e+n,d=t+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(r=l.x0)>f||(a=l.y0)>d||(s=l.x1)<c||(o=l.y1)<h))if(g.length){var v=(r+s)/2,y=(a+o)/2;p.push(new O(g[3],v,y,s,o),new O(g[2],r,y,v,o),new O(g[1],v,a,s,y),new O(g[0],r,a,v,y)),(u=(t>=y)<<1|e>=v)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var m=e-+this._x.call(null,g.data),_=t-+this._y.call(null,g.data),x=m*m+_*_;if(x<n){var b=Math.sqrt(n=x);c=e-b,h=t-b,f=e+b,d=t+b,i=g.data}}return i},q.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,n,i,r,a,s,o,l,u,c,h,f,d=this._root,p=this._x0,g=this._y0,v=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((u=a>=(o=(p+v)/2))?p=o:v=o,(c=s>=(l=(g+y)/2))?g=l:y=l,t=d,!(d=d[h=c<<1|u]))return this;if(!d.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,f=h)}for(;d.data!==e;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):t?(r?t[h]=r:delete t[h],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},q.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},q.root=function(){return this._root},q.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},q.visit=function(e){var t,n,i,r,a,s,o=[],l=this._root;for(l&&o.push(new O(l,this._x0,this._y0,this._x1,this._y1));t=o.pop();)if(!e(l=t.node,i=t.x0,r=t.y0,a=t.x1,s=t.y1)&&l.length){var u=(i+a)/2,c=(r+s)/2;(n=l[3])&&o.push(new O(n,u,c,a,s)),(n=l[2])&&o.push(new O(n,i,c,u,s)),(n=l[1])&&o.push(new O(n,u,r,a,c)),(n=l[0])&&o.push(new O(n,i,r,u,c))}return this},q.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new O(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var r=t.node;if(r.length){var a,s=t.x0,o=t.y0,l=t.x1,u=t.y1,c=(s+l)/2,h=(o+u)/2;(a=r[0])&&n.push(new O(a,s,o,c,h)),(a=r[1])&&n.push(new O(a,c,o,l,h)),(a=r[2])&&n.push(new O(a,s,h,c,u)),(a=r[3])&&n.push(new O(a,c,h,l,u))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},q.x=function(e){return arguments.length?(this._x=e,this):this._x},q.y=function(e){return arguments.length?(this._y=e,this):this._y};var T=function(e){return function(){return e}},A=function(){return 1e-6*(Math.random()-.5)};function N(e){return e.x+e.vx}function P(e){return e.y+e.vy}function E(e){return e.index}function M(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}var F={value:function(){}};function L(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new z(i)}function z(e){this._=e}function W(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function B(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function G(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=F,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}z.prototype=L.prototype={constructor:z,on:function(e,t){var n,i=this._,r=W(e+"",i),a=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=r[a]).type)i[n]=G(i[n],e.name,t);else if(null==t)for(n in i)i[n]=G(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=r[a]).type)&&(n=B(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new z(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(i=this._[e]).length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};var V,H,Q=L,$=0,U=0,X=0,J=0,Y=0,K=0,Z="object"==typeof performance&&performance.now?performance:Date,ee="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function te(){return Y||(ee(ne),Y=Z.now()+K)}function ne(){Y=0}function ie(){this._call=this._time=this._next=null}function re(e,t,n){var i=new ie;return i.restart(e,t,n),i}function ae(){Y=(J=Z.now())+K,$=U=0;try{!function(){te(),++$;for(var e,t=V;t;)(e=Y-t._time)>=0&&t._call.call(null,e),t=t._next;--$}()}finally{$=0,function(){for(var e,t,n=V,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:V=t);H=e,oe(i)}(),Y=0}}function se(){var e=Z.now(),t=e-J;t>1e3&&(K-=t,J=e)}function oe(e){$||(U&&(U=clearTimeout(U)),e-Y>24?(e<1/0&&(U=setTimeout(ae,e-Z.now()-K)),X&&(X=clearInterval(X))):(X||(J=Z.now(),X=setInterval(se,1e3)),$=1,ee(ae)))}function le(e){return e.x}function ue(e){return e.y}ie.prototype=re.prototype={constructor:ie,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?te():+n)+(null==t?0:+t),this._next||H===this||(H?H._next=this:V=this,H=this),this._call=e,this._time=n,oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,oe())}};var ce,he=Math.PI*(3-Math.sqrt(5)),fe=function e(){_classCallCheck(this,e),this.nodes=[],this.links=[],this.nodeTriples=[]},de=function e(t,n){_classCallCheck(this,e),this.source=t,this.target=n,this.predicate="",this.weight=1};!function(e){e.link="link",e.node="node"}(ce||(ce={}));var pe,ge=function e(t,n){_classCallCheck(this,e),this.id=t,this.label=t,this.weight=1,this.type=n,this.owlClass=!1,this.instance=!1},ve=function e(t,n,i){_classCallCheck(this,e),this.nodeSubject=t,this.nodePredicate=n,this.nodeObject=i};!function(e){e.short="short",e.long="long"}(pe||(pe={}));var ye=function e(t,n){_classCallCheck(this,e),this.prefixName=t,this.prefixIri=n},me=function(){function e(){_classCallCheck(this,e),this.prefixes=[new ye("dc","http://purl.org/dc/elements/1.1/"),new ye("owl","http://www.w3.org/2002/07/owl#"),new ye("prov","http://www.w3.org/ns/prov#"),new ye("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),new ye("rdfs","http://www.w3.org/2000/01/rdf-schema#"),new ye("xsd","http://www.w3.org/2001/XMLSchema#")]}return _createClass(e,[{key:"transform",value:function(e,t){var n=t,i=this.switchPrefixForm(e,n);return i&&(n=i),n}},{key:"switchPrefixForm",value:function(e,t){var n;switch(e){case pe.short:this.prefixes.map((function(e){-1!==t.indexOf(e.prefixIri)&&(n=t.replace(e.prefixIri,e.prefixName+":"))}));break;case pe.long:this.prefixes.map((function(e){-1!==t.indexOf(e.prefixName)&&(n=t.replace(e.prefixName+":",e.prefixIri))}))}return n}}]),e}();me=Object(i.a)([Object(r.V)({name:"prefix",pure:!1})],me);var _e,xe,be="http://www.w3.org/1999/02/22-rdf-syntax-ns#",we="http://www.w3.org/2001/XMLSchema#",ke="http://www.w3.org/2000/10/swap/",Se={xsd:{decimal:we+"decimal",boolean:we+"boolean",double:we+"double",integer:we+"integer",string:we+"string"},rdf:{type:be+"type",nil:be+"nil",first:be+"first",rest:be+"rest",langString:be+"langString"},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:ke+"reify#forSome",forAll:ke+"reify#forAll"},log:{implies:ke+"log#implies"}},Oe=Se.xsd,De=String.fromCharCode,Ce=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,Re={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},je=/[\x00-\x20<>\\"\{\}\|\^\`]/,Ie={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},qe=/$0^/,Te=function(){function e(t){if(_classCallCheck(this,e),this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,this._number=/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s()\[\]\{\}"'<])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode)for(var n in this._n3Mode=!1,this)!(n in Ie)&&this[n]instanceof RegExp&&(this[n]=qe);else this._n3Mode=!1!==t.n3;this._comments=!!t.comments,this._literalClosingPos=0}return _createClass(e,[{key:"_tokenizeToEnd",value:function(e,t){for(var n,i=this._input,r=this._comments;;){for(var a,s;a=this._newline.exec(i);)r&&(s=this._comment.exec(a[0]))&&e(null,{line:this._line,type:"comment",value:s[1],prefix:""}),i=i.substr(a[0].length,i.length),this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return t&&(r&&(s=this._comment.exec(i))&&e(null,{line:this._line,type:"comment",value:s[1],prefix:""}),e(i=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=i;var o=this._line,l="",u="",c="",h=i[0],f=null,d=0,p=!1;switch(h){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(d=1,l="^");break}if(this._previousMarker="^^","<"!==(i=i.substr(2))[0]){p=!0;break}case"<":if(f=this._unescapedIri.exec(i))l="IRI",u=f[1];else if(f=this._iri.exec(i)){if(null===(u=this._unescape(f[1]))||je.test(u))return y(this);l="IRI"}else this._n3Mode&&i.length>1&&"="===i[1]&&(l="inverse",d=2,u=">");break;case"_":((f=this._blank.exec(i))||t&&(f=this._blank.exec(i+" ")))&&(l="blank",c="_",u=f[1]);break;case'"':if(f=this._simpleQuotedString.exec(i))u=f[1];else if(u=(n=this._parseLiteral(i)).value,d=n.matchLength,null===u)return y(this);null===f&&0===d||(l="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){var g;if(f=this._simpleApostropheString.exec(i))u=f[1];else if(u=(g=this._parseLiteral(i)).value,d=g.matchLength,null===u)return y(this);null===f&&0===d||(l="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(f=this._variable.exec(i))&&(l="var",u=f[0]);break;case"@":"literal"===this._previousMarker&&(f=this._langcode.exec(i))?(l="langcode",u=f[1]):(f=this._keyword.exec(i))&&(l=f[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){l=".",d=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(f=this._number.exec(i)||t&&(f=this._number.exec(i+" ")))&&(l="literal",u=f[0],c=f[1]?Oe.double:/^[+\-]?\d+$/.test(f[0])?Oe.integer:Oe.decimal);break;case"B":case"b":case"p":case"P":case"G":case"g":(f=this._sparqlKeyword.exec(i))?l=f[0].toUpperCase():p=!0;break;case"f":case"t":(f=this._boolean.exec(i))?(l="literal",u=f[0],c=Oe.boolean):p=!0;break;case"a":(f=this._shortPredicates.exec(i))?(l="abbreviation",u="a"):p=!0;break;case"=":this._n3Mode&&i.length>1&&(l="abbreviation",">"!==i[1]?(d=1,u="="):(d=2,u=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(d=1,l=h);break;default:p=!0}if(p&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(f=this._prefix.exec(i))?((f=this._prefixed.exec(i))||t&&(f=this._prefixed.exec(i+" ")))&&(l="prefixed",c=f[1]||"",u=this._unescape(f[2])):(l="prefix",u=f[1]||"")),"^^"===this._previousMarker)switch(l){case"prefixed":l="type";break;case"IRI":l="typeIRI";break;default:l=""}if(!l)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?y(this):this._input=i;var v={line:o,type:l,value:u,prefix:c};e(null,v),this.previousToken=v,this._previousMarker=l,i=i.substr(d||f[0].length,i.length)}function y(t){e(t._syntaxError(/^\S*/.exec(i)[0]))}}},{key:"_unescape",value:function(e){try{return e.replace(Ce,(function(e,t,n,i){var r;if(t){if(r=parseInt(t,16),isNaN(r))throw new Error;return De(r)}if(n){if(r=parseInt(n,16),isNaN(r))throw new Error;return r<=65535?De(r):De(55296+(r-=65536)/1024,56320+(1023&r))}var a=Re[i];if(!a)throw new Error;return a}))}catch(t){return null}}},{key:"_parseLiteral",value:function(e){if(e.length>=3){for(var t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length,i=Math.max(this._literalClosingPos,n);(i=e.indexOf(t,i))>0;){for(var r=0;"\\"===e[i-r-1];)r++;if(r%2==0){var a=e.substring(n,i),s=a.split(/\r\n|\r|\n/).length-1,o=i+n;if(1===n&&0!==s||3===n&&this._lineMode)break;return this._line+=s,{value:this._unescape(a),matchLength:o}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}},{key:"_syntaxError",value:function(e){this._input=null;var t=new Error('Unexpected "'+e+'" on line '+this._line+".");return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}},{key:"tokenize",value:function(e,t){var n=this;if(this._line=1,"string"==typeof e){if(this._input=e,"function"!=typeof t){var i,r=[];if(this._tokenizeToEnd((function(e,t){e?i=e:r.push(t)}),!0),i)throw i;return r}setImmediate((function(){n._tokenizeToEnd(t,!0)}))}else this._input="",this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",(function(e){null!==n._input&&0!==e.length&&(n._pendingBuffer&&(e=Buffer.concat([n._pendingBuffer,e]),n._pendingBuffer=null),128&e[e.length-1]?n._pendingBuffer=e:(n._input+=e,n._tokenizeToEnd(t,!1)))})),e.on("end",(function(){null!==n._input&&n._tokenizeToEnd(t,!0)})),e.on("error",t)}}]),e}(),Ae=Se.rdf,Ne=Se.xsd,Pe=0,Ee=function(){function e(t){_classCallCheck(this,e),this.id=t}return _createClass(e,[{key:"equals",value:function(t){return t instanceof e?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}},{key:"toJSON",value:function(){return{termType:this.termType,value:this.value}}},{key:"value",get:function(){return this.id}}]),e}(),Me=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"termType",get:function(){return"NamedNode"}}]),t}(Ee),Fe=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"equals",value:function(e){return e instanceof t?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}},{key:"toJSON",value:function(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},{key:"termType",get:function(){return"Literal"}},{key:"value",get:function(){return this.id.substring(1,this.id.lastIndexOf('"'))}},{key:"language",get:function(){var e=this.id,t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}},{key:"datatype",get:function(){return new Me(this.datatypeString)}},{key:"datatypeString",get:function(){var e,t=this.id,n=t.lastIndexOf('"')+1;return n<t.length&&"^"===(e=t[n])?t.substr(n+2):"@"!==e?Ne.string:Ae.langString}}]),t}(Ee),Le=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"_:"+e))}return _inherits(t,e),_createClass(t,[{key:"termType",get:function(){return"BlankNode"}},{key:"value",get:function(){return this.id.substr(2)}}]),t}(Ee),ze=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"?"+e))}return _inherits(t,e),_createClass(t,[{key:"termType",get:function(){return"Variable"}},{key:"value",get:function(){return this.id.substr(1)}}]),t}(Ee),We=function(e){function t(){var e;return _classCallCheck(this,t),_possibleConstructorReturn(e,(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"")),xe||_assertThisInitialized(e)))}return _inherits(t,e),_createClass(t,[{key:"equals",value:function(e){return this===e||!!e&&this.termType===e.termType}},{key:"termType",get:function(){return"DefaultGraph"}}]),t}(Ee);xe=new We;var Be=function(){function e(t,n,i,r){_classCallCheck(this,e),this.subject=t,this.predicate=n,this.object=i,this.graph=r||xe}return _createClass(e,[{key:"toJSON",value:function(){return{subject:this.subject.toJSON(),predicate:this.predicate.toJSON(),object:this.object.toJSON(),graph:this.graph.toJSON()}}},{key:"equals",value:function(e){return!!e&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}]),e}(),Ge=_e={namedNode:function(e){return new Me(e)},blankNode:function(e){return e||(e="n3-"+Pe++),new Le(e)},variable:function(e){return new ze(e)},literal:function(e,t){if("string"==typeof t)return new Fe('"'+e+'"@'+t.toLowerCase());var n=t?t.value:"";return""===n&&("boolean"==typeof e?n=Ne.boolean:"number"==typeof e&&(Number.isFinite(e)?n=Number.isInteger(e)?Ne.integer:Ne.double:(n=Ne.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),""===n||n===Ne.string?new Fe('"'+e+'"'):new Fe('"'+e+'"^^'+n)},defaultGraph:function(){return xe},quad:Ve,triple:Ve,internal:{Term:Ee,NamedNode:Me,BlankNode:Le,Variable:ze,Literal:Fe,DefaultGraph:We,Quad:Be,Triple:Be,fromId:function(e,t){if(t=t||_e,!e)return t.defaultGraph();switch(e[0]){case"_":return t.blankNode(e.substr(2));case"?":return t.variable(e.substr(1));case'"':if(t===_e)return new Fe(e);if('"'===e[e.length-1])return t.literal(e.substr(1,e.length-2));var n=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,n-1),"@"===e[n+1]?e.substr(n+2):t.namedNode(e.substr(n+3)));default:return t.namedNode(e)}},toId:function(e){if("string"==typeof e)return e;if(e instanceof Ee)return e.id;if(!e)return xe.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return"_:"+e.value;case"Variable":return"?"+e.value;case"DefaultGraph":return"";case"Literal":return'"'+e.value+'"'+(e.language?"@"+e.language:e.datatype&&e.datatype.value!==Ne.string?"^^"+e.datatype.value:"");default:throw new Error("Unexpected termType: "+e.termType)}}}};function Ve(e,t,n,i){return new Be(e,t,n,i)}var He=0,Qe=0,$e=function(){function e(t){_classCallCheck(this,e),this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&Xe(this,t.factory);var n="string"==typeof t.format?t.format.match(/\w*$/)[0].toLowerCase():"",i="turtle"===n,r="trig"===n,a=/triple/.test(n),s=/quad/.test(n),o=this._n3Mode=/n3/.test(n),l=a||s;(this._supportsNamedGraphs=!(i||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||a||o),l&&(this._resolveRelativeIRI=function(e){return null}),this._blankNodePrefix="string"!=typeof t.blankNodePrefix?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new Te({lineMode:l,n3:o}),this._explicitQuantifiers=!!t.explicitQuantifiers}return _createClass(e,[{key:"_blank",value:function(){return this._blankNode("b"+Qe++)}},{key:"_setBase",value:function(e){if(e){var t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}},{key:"_saveContext",value:function(e,t,n,i,r){var a=this._n3Mode;this._contextStack.push({subject:n,predicate:i,object:r,graph:t,type:e,inverse:!!a&&this._inversePredicate,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?this._graph.id.substr(2)+".":".",this._quantified=Object.create(this._quantified))}},{key:"_restoreContext",value:function(){var e=this._contextStack.pop(),t=this._n3Mode;this._subject=e.subject,this._predicate=e.predicate,this._object=e.object,this._graph=e.graph,t&&(this._inversePredicate=e.inverse,this._prefixes._=e.blankPrefix,this._quantified=e.quantified)}},{key:"_readInTopContext",value:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}},{key:"_readEntity",value:function(e,t){var n;switch(e.type){case"IRI":case"typeIRI":var i=this._resolveIRI(e.value);if(null===i)return this._error("Invalid IRI",e);n=this._namedNode(i);break;case"type":case"prefixed":var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);n=this._namedNode(r+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error("Expected entity but got "+e.type,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}},{key:"_readSubject",value:function(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blank(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blank(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}},{key:"_readPredicate",value:function(e){var t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}},{key:"_readObject",value:function(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blank()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blank()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}},{key:"_readPredicateOrNamedGraph",value:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}},{key:"_readGraph",value:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)}},{key:"_readBlankNodeHead",value:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}},{key:"_readBlankNodeTail",value:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);var t=null===this._predicate;return this._restoreContext(),null===this._object?t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()}},{key:"_readPredicateAfterBlank",value:function(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}},{key:"_readListItem",value:function(e){var t=null,n=null,i=this._subject,r=this._contextStack,a=r[r.length-1],s=this._readListItem;switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blank(),this.RDF_FIRST,this._subject=t=this._blank()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blank(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==r.length&&"list"===r[r.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;n=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),s=this._getContextEndReader());break;default:if(void 0===(t=this._readEntity(e)))return}if(null===n&&(this._subject=n=this._blank()),null===i?null===a.predicate?a.subject=n:a.object=n:this._emit(i,this.RDF_REST,n,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return s}},{key:"_readDataTypeOrLang",value:function(e){return this._completeLiteral(e,!1)}},{key:"_readListItemDataTypeOrLang",value:function(e){return this._completeLiteral(e,!0)}},{key:"_completeLiteral",value:function(e,t){switch(e.type){case"type":case"typeIRI":var n=this._readEntity(e);if(void 0===n)return;this._object=this._literal(this._literalValue,n),e=null;break;case"langcode":this._object=this._literal(this._literalValue,e.value),e=null;break;default:this._object=this._literal(this._literalValue)}return t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===e?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(e))}},{key:"_readFormulaTail",value:function(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}},{key:"_readPunctuation",value:function(e){var t,n=this._subject,i=this._graph,r=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,r&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object.id+'"',e)}if(null!==n){var a=this._predicate,s=this._object;r?this._emit(s,a,n,i):this._emit(n,a,s,i)}return t}},{key:"_readBlankNodePunctuation",value:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object.id+'"',e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}},{key:"_readQuadPunctuation",value:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}},{key:"_readPrefix",value:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}},{key:"_readPrefixIRI",value:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}},{key:"_readBaseIRI",value:function(e){var t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}},{key:"_readNamedGraphLabel",value:function(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}},{key:"_readNamedGraphBlankLabel",value:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blank(),this._readGraph)}},{key:"_readDeclarationPunctuation",value:function(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}},{key:"_readQuantifierList",value:function(e){var t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error("Unexpected "+e.type,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blank(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blank(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier("b"+Qe++),this._readQuantifierPunctuation}},{key:"_readQuantifierPunctuation",value:function(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}},{key:"_getPathReader",value:function(e){return this._afterPath=e,this._readPath}},{key:"_readPath",value:function(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var t=this._contextStack,n=t.length&&t[t.length-1];if(n&&"item"===n.type){var i=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}},{key:"_readForwardPath",value:function(e){var t,n,i=this._blank();if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=i):(t=this._object,this._object=i),this._emit(t,n,i,this._graph),this._readPath}},{key:"_readBackwardPath",value:function(e){var t,n,i=this._blank();if(void 0!==(t=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=i):(n=this._object,this._object=i),this._emit(i,t,n,this._graph),this._readPath}},{key:"_getContextEndReader",value:function(){var e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}}},{key:"_emit",value:function(e,t,n,i){this._callback(null,this._quad(e,t,n,i||this.DEFAULTGRAPH))}},{key:"_error",value:function(e,t){var n=new Error(e+" on line "+t.line+".");n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Ue}},{key:"_resolveIRI",value:function(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}},{key:"_resolveRelativeIRI",value:function(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}},{key:"_removeDotSegments",value:function(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;for(var t="",n=e.length,i=-1,r=-1,a=0,s="/";i<n;){switch(s){case":":if(r<0&&"/"===e[++i]&&"/"===e[++i])for(;(r=i+1)<n&&"/"!==e[r];)i=r;break;case"?":case"#":i=n;break;case"/":if("."===e[i+1])switch(s=e[++i+1]){case"/":t+=e.substring(a,i-1),a=i+1;break;case void 0:case"?":case"#":return t+e.substring(a,i)+e.substr(i+1);case".":if(void 0===(s=e[++i+1])||"/"===s||"?"===s||"#"===s){if((a=(t+=e.substring(a,i-2)).lastIndexOf("/"))>=r&&(t=t.substr(0,a)),"/"!==s)return t+"/"+e.substr(i+1);a=i+1}}}s=e[++i]}return t+e.substring(a)}},{key:"parse",value:function(e,t,n){var i=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):"b"+He+++"_",this._prefixCallback=n||Ue,this._inversePredicate=!1,this._quantified=Object.create(null),!t){var r,a=[];if(this._callback=function(e,t){e?r=e:t&&a.push(t)},this._lexer.tokenize(e).every((function(e){return i._readCallback=i._readCallback(e)})),r)throw r;return a}this._callback=t,this._lexer.tokenize(e,(function(e,t){null!==e?(i._callback(e),i._callback=Ue):i._readCallback&&(i._readCallback=i._readCallback(t))}))}}],[{key:"_resetBlankNodeIds",value:function(){He=Qe=0}}]),e}();function Ue(){}function Xe(e,t){var n=t.namedNode;e._namedNode=n,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=n(Se.rdf.first),e.RDF_REST=n(Se.rdf.rest),e.RDF_NIL=n(Se.rdf.nil),e.N3_FORALL=n(Se.r.forAll),e.N3_FORSOME=n(Se.r.forSome),e.ABBREVIATIONS={a:n(Se.rdf.type),"=":n(Se.owl.sameAs),">":n(Se.log.implies)},e.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}Xe($e.prototype,Ge);var Je=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"abbreviateTriples",value:function(e,t,n){var i=this;return n||(n="text/turtle"),e.map((function(e){var r=e.subject.nominalValue,a=e.predicate.nominalValue,s=e.object.nominalValue;return"text/turtle"===n&&(null!=i.abbreviate(r,t)&&(r=i.abbreviate(r,t)),null!=i.abbreviate(a,t)&&(a=i.abbreviate(a,t)),null!=i.abbreviate(s,t)&&(s=i.abbreviate(s,t))),{subject:r,predicate:a,object:s}}))}},{key:"appendNamespacesToQuery",value:function(e,t){if(e&&t){var n=this.extractNamespacesFromTTL(t),i=this.extractPrefixesFromQuery(e),r=Object.keys(n),a="";return r.forEach((function(e){-1!==i.indexOf(e)&&(a+="PREFIX ".concat(e," ").concat(n[e],"\n"))})),""!==a&&(e=a+"\n"+e),e}}},{key:"doQuery",value:function(e,t,n,i){var r=this;return i||(i="text/turtle"),this.createStore().then((function(e){return r.store=e,r.loadTriplesInStore(e,n,i)})).then((function(e){return r.executeQuery(r.store,t)})).then((function(t){var a=t;return"select"===e&&console.log("got SELECT request"),r.getNamespaces(n).then((function(e){return r.abbreviateTriples(a.triples,e,i)}))}))}},{key:"getQuerytype",value:function(e){var t,n,i=[{queryType:"select",index:-1},{queryType:"construct",index:-1},{queryType:"count",index:-1},{queryType:"describe",index:-1},{queryType:"insert",index:-1},{queryType:"delete",index:-1}],r=!1,a=1/0;return i=i.map((function(t){return t.index=e.toLowerCase().indexOf(t.queryType),-1!==t.index&&(r=!0,t.index<a&&(a=t.index)),t})),r?(t=i.find((function(e){return e.index===a})))?"insert"===(n=t.queryType)||"delete"===n?"update":n:null:null}},{key:"abbreviate",value:function(e,t){var n=null;return-1!==e.indexOf("http")&&Object.entries(t).forEach((function(t,i){var r=_slicedToArray(t,2),a=r[0],s=r[1];-1!==e.indexOf(s)&&(n=e.replace(s,a+":"))})),n}},{key:"createStore",value:function(){return new Promise((function(e,t){rdfstore.create((function(n,i){n&&t(n),e(i)}))}))}},{key:"executeQuery",value:function(e,t){return new Promise((function(n,i){e.execute(t,(function(e,t){e&&(console.error("executeQuery# got ERROR",e),i(e)),n(t)}))}))}},{key:"extractNamespacesFromTTL",value:function(e){var t=e.replace(/\s/g," ").split(" ").filter((function(e){return""!==e})),n=t.reduce((function(e,t,n){return"@prefix"===t&&e.push(n),e}),[]),i={};return n.forEach((function(e){i[t[e+1]]=t[e+2]})),console.log(i),i}},{key:"extractPrefixesFromQuery",value:function(e){for(var t,n=[],i=/[a-zA-Z]+:/g;null!==(t=i.exec(e));)t.index===i.lastIndex&&i.lastIndex++,t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)}));return n}},{key:"getNamespaces",value:function(e){var t=new $e;return new Promise((function(n,i){t.parse(e,(function(e,t,r){t||n(r),e&&i(e)}))}))}},{key:"loadTriplesInStore",value:function(e,t,n){return n||(n="text/turtle"),new Promise((function(i,r){e.load(n,t,(function(e,t){e&&(console.error("loadTriplesInStore# got error",e),r(e)),i(t)}))}))}}]),e}();Je=Object(i.a)([Object(r.C)()],Je);var Ye={},Ke=null;function Ze(e,t,n){return e=et(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function et(e,t,n){return function(i){var r=Ke;Ke=i;try{e.call(this,this.__data__,t,n)}finally{Ke=r}}}function tt(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function nt(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,a=t.length;i<a;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function it(e,t,n){var i=Ye.hasOwnProperty(e.type)?Ze:et;return function(r,a,s){var o,l=this.__on,u=i(t,a,s);if(l)for(var c=0,h=l.length;c<h;++c)if((o=l[c]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=u,o.capture=n),void(o.value=t);this.addEventListener(e.type,u,n),o={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(o):this.__on=[o]}}function rt(e,t,n,i){var r=Ke;e.sourceEvent=Ke,Ke=e;try{return t.apply(n,i)}finally{Ke=r}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ye={mouseenter:"mouseover",mouseleave:"mouseout"}));var at=function(){for(var e,t=Ke;e=t.sourceEvent;)t=e;return t},st=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]},ot=function(e){var t=at();return t.changedTouches&&(t=t.changedTouches[0]),st(e,t)};function lt(){}var ut=function(e){return null==e?lt:function(){return this.querySelector(e)}};function ct(){return[]}var ht=function(e){return null==e?ct:function(){return this.querySelectorAll(e)}},ft=function(e){return function(){return this.matches(e)}},dt=function(e){return new Array(e.length)};function pt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function gt(e,t,n,i,r,a){for(var s,o=0,l=t.length,u=a.length;o<u;++o)(s=t[o])?(s.__data__=a[o],i[o]=s):n[o]=new pt(e,a[o]);for(;o<l;++o)(s=t[o])&&(r[o]=s)}function vt(e,t,n,i,r,a,s){var o,l,u,c={},h=t.length,f=a.length,d=new Array(h);for(o=0;o<h;++o)(l=t[o])&&(d[o]=u="$"+s.call(l,l.__data__,o,t),u in c?r[o]=l:c[u]=l);for(o=0;o<f;++o)(l=c[u="$"+s.call(e,a[o],o,a)])?(i[o]=l,l.__data__=a[o],c[u]=null):n[o]=new pt(e,a[o]);for(o=0;o<h;++o)(l=t[o])&&c[d[o]]===l&&(r[o]=l)}function yt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}pt.prototype={constructor:pt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var mt="http://www.w3.org/1999/xhtml",_t={svg:"http://www.w3.org/2000/svg",xhtml:mt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xt=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),_t.hasOwnProperty(t)?{space:_t[t],local:e}:e};function bt(e){return function(){this.removeAttribute(e)}}function wt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kt(e,t){return function(){this.setAttribute(e,t)}}function St(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ot(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Dt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Ct=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Rt(e){return function(){this.style.removeProperty(e)}}function jt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function It(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function qt(e,t){return e.style.getPropertyValue(t)||Ct(e).getComputedStyle(e,null).getPropertyValue(t)}function Tt(e){return function(){delete this[e]}}function At(e,t){return function(){this[e]=t}}function Nt(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Pt(e){return e.trim().split(/^|\s+/)}function Et(e){return e.classList||new Mt(e)}function Mt(e){this._node=e,this._names=Pt(e.getAttribute("class")||"")}function Ft(e,t){for(var n=Et(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Lt(e,t){for(var n=Et(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function zt(e){return function(){Ft(this,e)}}function Wt(e){return function(){Lt(this,e)}}function Bt(e,t){return function(){(t.apply(this,arguments)?Ft:Lt)(this,e)}}function Gt(){this.textContent=""}function Vt(e){return function(){this.textContent=e}}function Ht(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Qt(){this.innerHTML=""}function $t(e){return function(){this.innerHTML=e}}function Ut(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Xt(){this.nextSibling&&this.parentNode.appendChild(this)}function Jt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mt&&t.documentElement.namespaceURI===mt?t.createElement(e):t.createElementNS(n,e)}}function Kt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}Mt.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Zt=function(e){var t=xt(e);return(t.local?Kt:Yt)(t)};function en(){return null}function tn(){var e=this.parentNode;e&&e.removeChild(this)}function nn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function an(e,t,n){var i=Ct(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function sn(e,t){return function(){return an(this,e,t)}}function on(e,t){return function(){return an(this,e,t.apply(this,arguments))}}var ln=[null];function un(e,t){this._groups=e,this._parents=t}function cn(){return new un([[document.documentElement]],ln)}un.prototype=cn.prototype={constructor:un,select:function(e){"function"!=typeof e&&(e=ut(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,s,o=t[r],l=o.length,u=i[r]=new Array(l),c=0;c<l;++c)(a=o[c])&&(s=e.call(a,a.__data__,c,o))&&("__data__"in a&&(s.__data__=a.__data__),u[c]=s);return new un(i,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=ht(e));for(var t=this._groups,n=t.length,i=[],r=[],a=0;a<n;++a)for(var s,o=t[a],l=o.length,u=0;u<l;++u)(s=o[u])&&(i.push(e.call(s,s.__data__,u,o)),r.push(s));return new un(i,r)},filter:function(e){"function"!=typeof e&&(e=ft(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,s=t[r],o=s.length,l=i[r]=[],u=0;u<o;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new un(i,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each((function(e){p[++c]=e})),p;var n,i=t?vt:gt,r=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=a.length,o=new Array(s),l=new Array(s),u=new Array(s),c=0;c<s;++c){var h=r[c],f=a[c],d=f.length,p=e.call(h,h&&h.__data__,c,r),g=p.length,v=l[c]=new Array(g),y=o[c]=new Array(g);i(h,f,v,y,u[c]=new Array(d),p,t);for(var m,_,x=0,b=0;x<g;++x)if(m=v[x]){for(x>=b&&(b=x+1);!(_=y[b])&&++b<g;);m._next=_||null}}return(o=new un(o,r))._enter=l,o._exit=u,o},enter:function(){return new un(this._enter||this._groups.map(dt),this._parents)},exit:function(){return new un(this._exit||this._groups.map(dt),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,a=this.exit();return i="function"==typeof e?e(i):i.append(e+""),null!=t&&(r=t(r)),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(e){for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),s=new Array(i),o=0;o<a;++o)for(var l,u=t[o],c=n[o],h=u.length,f=s[o]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;o<i;++o)s[o]=t[o];return new un(s,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],a=r.length-1,s=r[a];--a>=0;)(i=r[a])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=yt);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var s,o=n[a],l=o.length,u=r[a]=new Array(l),c=0;c<l;++c)(s=o[c])&&(u[c]=s);u.sort(t)}return new un(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var s=i[r];if(s)return s}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,a=t[n],s=0,o=a.length;s<o;++s)(r=a[s])&&e.call(r,r.__data__,s,a);return this},attr:function(e,t){var n=xt(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?wt:bt:"function"==typeof t?n.local?Dt:Ot:n.local?St:kt)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Rt:"function"==typeof t?It:jt)(e,t,null==n?"":n)):qt(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Tt:"function"==typeof t?Nt:At)(e,t)):this.node()[e]},classed:function(e,t){var n=Pt(e+"");if(arguments.length<2){for(var i=Et(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?Bt:t?zt:Wt)(n,t))},text:function(e){return arguments.length?this.each(null==e?Gt:("function"==typeof e?Ht:Vt)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Qt:("function"==typeof e?Ut:$t)(e)):this.node().innerHTML},raise:function(){return this.each(Xt)},lower:function(){return this.each(Jt)},append:function(e){var t="function"==typeof e?e:Zt(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Zt(e),i=null==t?en:"function"==typeof t?t:ut(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(tn)},clone:function(e){return this.select(e?rn:nn)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,a=tt(e+""),s=a.length;if(!(arguments.length<2)){for(o=t?it:nt,null==n&&(n=!1),i=0;i<s;++i)this.each(o(a[i],t,n));return this}var o=this.node().__on;if(o)for(var l,u=0,c=o.length;u<c;++u)for(i=0,l=o[u];i<s;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?on:sn)(e,t))}};var hn=cn,fn=function(e){return"string"==typeof e?new un([[document.querySelector(e)]],[document.documentElement]):new un([[e]],ln)},dn=function(e,t,n){arguments.length<3&&(n=t,t=at().changedTouches);for(var i,r=0,a=t?t.length:0;r<a;++r)if((i=t[r]).identifier===n)return st(e,i);return null};function pn(){Ke.stopImmediatePropagation()}var gn=function(){Ke.preventDefault(),Ke.stopImmediatePropagation()},vn=function(e){var t=e.document.documentElement,n=fn(e).on("dragstart.drag",gn,!0);"onselectstart"in t?n.on("selectstart.drag",gn,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function yn(e,t){var n=e.document.documentElement,i=fn(e).on("dragstart.drag",null);t&&(i.on("click.drag",gn,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var mn=function(e){return function(){return e}};function _n(e,t,n,i,r,a,s,o,l,u){this.target=e,this.type=t,this.subject=n,this.identifier=i,this.active=r,this.x=a,this.y=s,this.dx=o,this.dy=l,this._=u}function xn(){return!Ke.ctrlKey&&!Ke.button}function bn(){return this.parentNode}function wn(e){return null==e?{x:Ke.x,y:Ke.y}:e}function kn(){return navigator.maxTouchPoints||"ontouchstart"in this}_n.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Sn=Math.SQRT2;function On(e){return((e=Math.exp(e))+1/e)/2}var Dn=function(e,t){var n,i,r=e[0],a=e[1],s=e[2],o=t[0],l=t[1],u=t[2],c=o-r,h=l-a,f=c*c+h*h;if(f<1e-12)i=Math.log(u/s)/Sn,n=function(e){return[r+e*c,a+e*h,s*Math.exp(Sn*e*i)]};else{var d=Math.sqrt(f),p=(u*u-s*s+4*f)/(2*s*2*d),g=(u*u-s*s-4*f)/(2*u*2*d),v=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(g*g+1)-g);i=(y-v)/Sn,n=function(e){var t,n=e*i,o=On(v),l=s/(2*d)*(o*(t=Sn*n+v,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[r+l*c,a+l*h,s*o/On(Sn*n+v)]}}return n.duration=1e3*i,n},Cn=function(e,t,n){var i=new ie;return t=null==t?0:+t,i.restart((function(n){i.stop(),e(n+t)}),t,n),i},Rn=Q("start","end","cancel","interrupt"),jn=[],In=function(e,t,n,i,r,a){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function a(l){var u,c,h,f;if(1!==n.state)return o();for(u in r)if((f=r[u]).name===n.name){if(3===f.state)return Cn(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[u])}if(Cn((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=f);i.length=c+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(o),n.state=5,1),a=-1,s=i.length;++a<s;)i[a].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=re((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:i,group:r,on:Rn,tween:jn,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function qn(e,t){var n=An(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Tn(e,t){var n=An(e,t);if(n.state>3)throw new Error("too late; already running");return n}function An(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Nn,Pn,En,Mn,Fn=function(e,t){var n,i,r,a=e.__transition,s=!0;if(a){for(r in t=null==t?null:t+"",a)(n=a[r]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[r]):s=!1;s&&delete e.__transition}},Ln=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},zn=180/Math.PI,Wn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Bn=function(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*zn,skewX:Math.atan(l)*zn,scaleX:s,scaleY:o}};function Gn(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(a,s){var o=[],l=[];return a=e(a),s=e(s),function(e,i,r,a,s,o){if(e!==r||i!==a){var l=s.push("translate(",null,t,null,n);o.push({i:l-4,x:Ln(e,r)},{i:l-2,x:Ln(i,a)})}else(r||a)&&s.push("translate("+r+t+a+n)}(a.translateX,a.translateY,s.translateX,s.translateY,o,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Ln(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(a.rotate,s.rotate,o,l),function(e,t,n,a){e!==t?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Ln(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(a.skewX,s.skewX,o,l),function(e,t,n,i,a,s){if(e!==n||t!==i){var o=a.push(r(a)+"scale(",null,",",null,")");s.push({i:o-4,x:Ln(e,n)},{i:o-2,x:Ln(t,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,o,l),a=s=null,function(e){for(var t,n=-1,i=l.length;++n<i;)o[(t=l[n]).i]=t.x(e);return o.join("")}}}var Vn=Gn((function(e){return"none"===e?Wn:(Nn||(Nn=document.createElement("DIV"),Pn=document.documentElement,En=document.defaultView),Nn.style.transform=e,e=En.getComputedStyle(Pn.appendChild(Nn),null).getPropertyValue("transform"),Pn.removeChild(Nn),e=e.slice(7,-1).split(","),Bn(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Hn=Gn((function(e){return null==e?Wn:(Mn||(Mn=document.createElementNS("http://www.w3.org/2000/svg","g")),Mn.setAttribute("transform",e),(e=Mn.transform.baseVal.consolidate())?(e=e.matrix,Bn(e.a,e.b,e.c,e.d,e.e,e.f)):Wn)}),", ",")",")");function Qn(e,t){var n,i;return function(){var r=Tn(this,e),a=r.tween;if(a!==n)for(var s=0,o=(i=n=a).length;s<o;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}r.tween=i}}function $n(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=Tn(this,e),s=a.tween;if(s!==i){r=(i=s).slice();for(var o={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=o;break}l===u&&r.push(o)}a.tween=r}}function Un(e,t,n){var i=e._id;return e.each((function(){var e=Tn(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return An(e,i).value[t]}}var Xn=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Jn(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Yn(){}var Kn="\\s*([+-]?\\d+)\\s*",Zn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ei="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ti=/^#([0-9a-f]{3,8})$/,ni=new RegExp("^rgb\\("+[Kn,Kn,Kn]+"\\)$"),ii=new RegExp("^rgb\\("+[ei,ei,ei]+"\\)$"),ri=new RegExp("^rgba\\("+[Kn,Kn,Kn,Zn]+"\\)$"),ai=new RegExp("^rgba\\("+[ei,ei,ei,Zn]+"\\)$"),si=new RegExp("^hsl\\("+[Zn,ei,ei]+"\\)$"),oi=new RegExp("^hsla\\("+[Zn,ei,ei,Zn]+"\\)$"),li={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ui(){return this.rgb().formatHex()}function ci(){return this.rgb().formatRgb()}function hi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ti.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?fi(t):3===n?new gi(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new gi(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new gi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ni.exec(e))?new gi(t[1],t[2],t[3],1):(t=ii.exec(e))?new gi(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ri.exec(e))?di(t[1],t[2],t[3],t[4]):(t=ai.exec(e))?di(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=si.exec(e))?_i(t[1],t[2]/100,t[3]/100,1):(t=oi.exec(e))?_i(t[1],t[2]/100,t[3]/100,t[4]):li.hasOwnProperty(e)?fi(li[e]):"transparent"===e?new gi(NaN,NaN,NaN,0):null}function fi(e){return new gi(e>>16&255,e>>8&255,255&e,1)}function di(e,t,n,i){return i<=0&&(e=t=n=NaN),new gi(e,t,n,i)}function pi(e,t,n,i){return 1===arguments.length?((r=e)instanceof Yn||(r=hi(r)),r?new gi((r=r.rgb()).r,r.g,r.b,r.opacity):new gi):new gi(e,t,n,null==i?1:i);var r}function gi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function vi(){return"#"+mi(this.r)+mi(this.g)+mi(this.b)}function yi(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function mi(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function _i(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bi(e,t,n,i)}function xi(e){if(e instanceof bi)return new bi(e.h,e.s,e.l,e.opacity);if(e instanceof Yn||(e=hi(e)),!e)return new bi;if(e instanceof bi)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(s=t===a?(n-i)/o+6*(n<i):n===a?(i-t)/o+2:(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new bi(s,o,l,e.opacity)}function bi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function wi(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function ki(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}Xn(Yn,hi,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ui,formatHex:ui,formatHsl:function(){return xi(this).formatHsl()},formatRgb:ci,toString:ci}),Xn(gi,pi,Jn(Yn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new gi(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new gi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vi,formatHex:vi,formatRgb:yi,toString:yi})),Xn(bi,(function(e,t,n,i){return 1===arguments.length?xi(e):new bi(e,t,n,null==i?1:i)}),Jn(Yn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new bi(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new bi(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new gi(wi(e>=240?e-240:e+120,r,i),wi(e,r,i),wi(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Si=function(e){return function(){return e}};function Oi(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Si(isNaN(e)?t:e)}var Di=function e(t){var n=function(e){return 1==(e=+e)?Oi:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):Si(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=pi(e)).r,(t=pi(t)).r),r=n(e.g,t.g),a=n(e.b,t.b),s=Oi(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=a(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function Ci(e){return function(t){var n,i,r=t.length,a=new Array(r),s=new Array(r),o=new Array(r);for(n=0;n<r;++n)i=pi(t[n]),a[n]=i.r||0,s[n]=i.g||0,o[n]=i.b||0;return a=e(a),s=e(s),o=e(o),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=o(e),i+""}}}Ci((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return ki((n-i/t)*t,s,r,a,o)}})),Ci((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return ki((n-i/t)*t,r,a,s,o)}}));var Ri=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ji=new RegExp(Ri.source,"g"),Ii=function(e,t){var n,i,r,a=Ri.lastIndex=ji.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=Ri.exec(e))&&(i=ji.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),o[s]?o[s]+=r:o[++s]=r),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Ln(n,i)})),a=ji.lastIndex;return a<t.length&&(r=t.slice(a),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})},qi=function(e,t){var n;return("number"==typeof t?Ln:t instanceof hi?Di:(n=hi(t))?(t=n,Di):Ii)(e,t)};function Ti(e){return function(){this.removeAttribute(e)}}function Ai(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ni(e,t,n){var i,r,a=n+"";return function(){var s=this.getAttribute(e);return s===a?null:s===i?r:r=t(i=s,n)}}function Pi(e,t,n){var i,r,a=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===i?r:r=t(i=s,n)}}function Ei(e,t,n){var i,r,a;return function(){var s,o,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(o=l+"")?null:s===i&&o===r?a:(r=o,a=t(i=s,l));this.removeAttribute(e)}}function Mi(e,t,n){var i,r,a;return function(){var s,o,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(o=l+"")?null:s===i&&o===r?a:(r=o,a=t(i=s,l));this.removeAttributeNS(e.space,e.local)}}function Fi(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Li(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function zi(e,t){return function(){qn(this,e).delay=+t.apply(this,arguments)}}function Wi(e,t){return t=+t,function(){qn(this,e).delay=t}}function Bi(e,t){return function(){Tn(this,e).duration=+t.apply(this,arguments)}}function Gi(e,t){return t=+t,function(){Tn(this,e).duration=t}}function Vi(e,t){if("function"!=typeof t)throw new Error;return function(){Tn(this,e).ease=t}}function Hi(e,t,n){var i,r,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?qn:Tn;return function(){var s=a(this,e),o=s.on;o!==i&&(r=(i=o).copy()).on(t,n),s.on=r}}var Qi=hn.prototype.constructor;function $i(e){return function(){this.style.removeProperty(e)}}function Ui(e,t,n){var i,r;function a(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,a,n)),i}return a._value=t,a}function Xi(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}var Ji=0;function Yi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Ki(){return++Ji}var Zi=hn.prototype;Yi.prototype=(function(e){return hn().transition(e)}).prototype={constructor:Yi,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ut(e));for(var i=this._groups,r=i.length,a=new Array(r),s=0;s<r;++s)for(var o,l,u=i[s],c=u.length,h=a[s]=new Array(c),f=0;f<c;++f)(o=u[f])&&(l=e.call(o,o.__data__,f,u))&&("__data__"in o&&(l.__data__=o.__data__),h[f]=l,In(h[f],t,n,f,h,An(o,n)));return new Yi(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ht(e));for(var i=this._groups,r=i.length,a=[],s=[],o=0;o<r;++o)for(var l,u=i[o],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var f,d=e.call(l,l.__data__,h,u),p=An(l,n),g=0,v=d.length;g<v;++g)(f=d[g])&&In(f,t,n,g,d,p);a.push(d),s.push(l)}return new Yi(a,s,t,n)},filter:function(e){"function"!=typeof e&&(e=ft(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,s=t[r],o=s.length,l=i[r]=[],u=0;u<o;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new Yi(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),s=new Array(i),o=0;o<a;++o)for(var l,u=t[o],c=n[o],h=u.length,f=s[o]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(f[d]=l);for(;o<i;++o)s[o]=t[o];return new Yi(s,this._parents,this._name,this._id)},selection:function(){return new Qi(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Ki(),i=this._groups,r=i.length,a=0;a<r;++a)for(var s,o=i[a],l=o.length,u=0;u<l;++u)if(s=o[u]){var c=An(s,t);In(s,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Yi(i,this._parents,e,n)},call:Zi.call,nodes:Zi.nodes,node:Zi.node,size:Zi.size,empty:Zi.empty,each:Zi.each,on:function(e,t){var n=this._id;return arguments.length<2?An(this.node(),n).on.on(e):this.each(Hi(n,e,t))},attr:function(e,t){var n=xt(e),i="transform"===n?Hn:qi;return this.attrTween(e,"function"==typeof t?(n.local?Mi:Ei)(n,i,Un(this,"attr."+e,t)):null==t?(n.local?Ai:Ti)(n):(n.local?Pi:Ni)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=xt(e);return this.tween(n,(i.local?Fi:Li)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?Vn:qi;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var a=qt(this,e),s=(this.style.removeProperty(e),qt(this,e));return a===s?null:a===n&&s===i?r:r=t(n=a,i=s)}}(e,i)).on("end.style."+e,$i(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,a;return function(){var s=qt(this,e),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(e),l=o=qt(this,e)),s===l?null:s===i&&l===r?a:(r=l,a=t(i=s,o))}}(e,i,Un(this,"style."+e,t))).each(function(e,t){var n,i,r,a,s="style."+t,o="end."+s;return function(){var l=Tn(this,e),u=l.on,c=null==l.value[s]?a||(a=$i(t)):void 0;u===n&&r===c||(i=(n=u).copy()).on(o,r=c),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,a=n+"";return function(){var s=qt(this,e);return s===a?null:s===i?r:r=t(i=s,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,Ui(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Un(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Xi(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=An(this.node(),n).tween,a=0,s=r.length;a<s;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((null==t?Qn:$n)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?zi:Wi)(t,e)):An(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Bi:Gi)(t,e)):An(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Vi(t,e)):An(this.node(),t).ease},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise((function(a,s){var o={value:s},l={value:function(){0==--r&&a()}};n.each((function(){var n=Tn(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),n.on=t}))}))}};var er={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function tr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return er.time=te(),er;return n}hn.prototype.interrupt=function(e){return this.each((function(){Fn(this,e)}))},hn.prototype.transition=function(e){var t,n;e instanceof Yi?(t=e._id,e=e._name):(t=Ki(),(n=er).time=te(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var s,o=i[a],l=o.length,u=0;u<l;++u)(s=o[u])&&In(s,e,t,u,o,n||tr(s,t));return new Yi(i,this._parents,e,t)};var nr=function(e){return function(){return e}};function ir(e,t,n){this.target=e,this.type=t,this.transform=n}function rr(e,t,n){this.k=e,this.x=t,this.y=n}rr.prototype={constructor:rr,scale:function(e){return 1===e?this:new rr(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new rr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ar=new rr(1,0,0);function sr(){Ke.stopImmediatePropagation()}rr.prototype;var or=function(){Ke.preventDefault(),Ke.stopImmediatePropagation()};function lr(){return!Ke.ctrlKey&&!Ke.button}function ur(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function cr(){return this.__zoom||ar}function hr(){return-Ke.deltaY*(1===Ke.deltaMode?.05:Ke.deltaMode?1:.002)}function fr(){return navigator.maxTouchPoints||"ontouchstart"in this}function dr(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}var pr=function(){function e(t,n){_classCallCheck(this,e),this.graphVisualizerService=t,this.prefixPipe=n,this.clickedNodeRequest=new r.w,this.limitValues=[5,10,25,50,100,200,500,1e3],this.limit=50,this.resize$=new b.a,this.destroy$=new b.a}return _createClass(e,[{key:"onResize",value:function(){this.graphContainer&&this.queryResultTriples&&(this.divWidth=this.getContainerWidth(this.graphContainer),this.divHeight=this.getContainerHeight(this.graphContainer),this.resize$.next(!0))}},{key:"ngOnInit",value:function(){var e=this;this.resize$.pipe(Object(w.a)(150),Object(k.a)(this.destroy$)).subscribe((function(t){e.redraw()})),this.redraw()}},{key:"ngOnChanges",value:function(e){e.queryResultTriples&&e.queryResultTriples.currentValue&&!e.queryResultTriples.isFirstChange()&&(this.queryResultTriples=e.queryResultTriples.currentValue,this.redraw())}},{key:"onLimitValueChange",value:function(e){this.limit=e,this.redraw()}},{key:"redraw",value:function(){this.queryResultTriples&&(this.cleanSVG(),this.createSVG(),this.attachData())}},{key:"attachData",value:function(){var e=this,t=this.limitTriples(this.queryResultTriples,this.limit);"string"==typeof t?this.parseTriples(t).then((function(t){var n=e.graphVisualizerService.abbreviateTriples(t.triples,t.namespaces);e.simulationData=e.triplesToD3GraphData(n),e.setupForceSimulation(),e.updateSVG()})):(this.simulationData=this.triplesToD3GraphData(t),this.setupForceSimulation(),this.updateSVG())}},{key:"cleanSVG",value:function(){var e;(e="svg.force-graph > *",new un([document.querySelectorAll(e)],[document.documentElement])).remove()}},{key:"createSVG",value:function(){this.graphContainer&&(this.divWidth=this.divWidth?this.divWidth:this.getContainerWidth(this.graphContainer)?this.getContainerWidth(this.graphContainer):400,this.divHeight=this.height?this.height:this.getContainerHeight(this.graphContainer)?this.getContainerHeight(this.graphContainer):500,this.svg||(this.svg=fn(this.graphContainer.nativeElement).append("svg").attr("class","force-graph")),this.svg.attr("width",this.divWidth).attr("height",this.divHeight))}},{key:"setupForceSimulation",value:function(){var e=this;this.forceSimulation=function(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=re(c),u=Q("tick","end");function c(){h(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function h(i){var l,u,c=e.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(a-n)*r,o.forEach((function(e){e(n)})),l=0;l<c;++l)null==(u=e[l]).fx?u.x+=u.vx*=s:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=s:(u.y=u.fy,u.vy=0);return t}function f(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var r=10*Math.sqrt(n),a=n*he;t.x=r*Math.cos(a),t.y=r*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function d(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),f(),t={tick:h,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,f(),o.forEach(d),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(r=+e,t):+r},alphaTarget:function(e){return arguments.length?(a=+e,t):a},velocityDecay:function(e){return arguments.length?(s=1-e,t):1-s},force:function(e,n){return arguments.length>1?(null==n?o.delete(e):o.set(e,d(n)),t):o.get(e)},find:function(t,n,i){var r,a,s,o,l,u=0,c=e.length;for(null==i?i=1/0:i*=i,u=0;u<c;++u)(s=(r=t-(o=e[u]).x)*r+(a=n-o.y)*a)<i&&(l=o,i=s);return l},on:function(e,n){return arguments.length>1?(u.on(e,n),t):u.on(e)}}}();var t=function(){var e,t,n,i,r=T(-30),a=1,s=1/0,o=.81;function l(i){var r,a=e.length,s=R(e,le,ue).visitAfter(c);for(n=i,r=0;r<a;++r)t=e[r],s.visit(h)}function u(){if(e){var t,n,a=e.length;for(i=new Array(a),t=0;t<a;++t)n=e[t],i[n.index]=+r(n,t,e)}}function c(e){var t,n,r,a,s,o=0,l=0;if(e.length){for(r=a=s=0;s<4;++s)(t=e[s])&&(n=Math.abs(t.value))&&(o+=t.value,l+=n,r+=n*t.x,a+=n*t.y);e.x=r/l,e.y=a/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{o+=i[t.data.index]}while(t=t.next)}e.value=o}function h(e,r,l,u){if(!e.value)return!0;var c=e.x-t.x,h=e.y-t.y,f=u-r,d=c*c+h*h;if(f*f/o<d)return d<s&&(0===c&&(d+=(c=A())*c),0===h&&(d+=(h=A())*h),d<a&&(d=Math.sqrt(a*d)),t.vx+=c*e.value*n/d,t.vy+=h*e.value*n/d),!0;if(!(e.length||d>=s)){(e.data!==t||e.next)&&(0===c&&(d+=(c=A())*c),0===h&&(d+=(h=A())*h),d<a&&(d=Math.sqrt(a*d)));do{e.data!==t&&(f=i[e.data.index]*n/d,t.vx+=c*f,t.vy+=h*f)}while(e=e.next)}}return l.initialize=function(t){e=t,u()},l.strength=function(e){return arguments.length?(r="function"==typeof e?e:T(+e),u(),l):r},l.distanceMin=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(o=e*e,l):Math.sqrt(o)},l}().strength((function(t){return-3*e.nodeRadius(t)})),n=function(e,t){var n;function i(){var i,r,a=n.length,s=0,o=0;for(i=0;i<a;++i)s+=(r=n[i]).x,o+=r.y;for(s=s/a-e,o=o/a-t,i=0;i<a;++i)(r=n[i]).x-=s,r.y-=o}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i}(this.divWidth/2,this.divHeight/2),i=function(e){var t,n,i=1,r=1;function a(){for(var e,a,o,l,u,c,h,f=t.length,d=0;d<r;++d)for(a=R(t,N,P).visitAfter(s),e=0;e<f;++e)o=t[e],c=n[o.index],h=c*c,l=o.x+o.vx,u=o.y+o.vy,a.visit(p);function p(e,t,n,r,a){var s=e.data,f=e.r,d=c+f;if(!s)return t>l+d||r<l-d||n>u+d||a<u-d;if(s.index>o.index){var p=l-s.x-s.vx,g=u-s.y-s.vy,v=p*p+g*g;v<d*d&&(0===p&&(v+=(p=A())*p),0===g&&(v+=(g=A())*g),v=(d-(v=Math.sqrt(v)))/v*i,o.vx+=(p*=v)*(d=(f*=f)/(h+f)),o.vy+=(g*=v)*d,s.vx-=p*(d=1-d),s.vy-=g*d)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function o(){if(t){var i,r,a=t.length;for(n=new Array(a),i=0;i<a;++i)r=t[i],n[r.index]=+e(r,i,t)}}return"function"!=typeof e&&(e=T(null==e?1:+e)),a.initialize=function(e){t=e,o()},a.iterations=function(e){return arguments.length?(r=+e,a):r},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:T(+t),o(),a):e},a}().strength(1).radius((function(e){return e.r+5})).iterations(2),r=function(e){var t,n,i,r,a,s=E,o=function(e){return 1/Math.min(r[e.source.index],r[e.target.index])},l=T(30),u=1;function c(i){for(var r=0,s=e.length;r<u;++r)for(var o,l,c,h,f,d,p,g=0;g<s;++g)l=(o=e[g]).source,h=(c=o.target).x+c.vx-l.x-l.vx||A(),f=c.y+c.vy-l.y-l.vy||A(),h*=d=((d=Math.sqrt(h*h+f*f))-n[g])/d*i*t[g],f*=d,c.vx-=h*(p=a[g]),c.vy-=f*p,l.vx+=h*(p=1-p),l.vy+=f*p}function h(){if(i){var o,l,u=i.length,c=e.length,h=new Map(i.map((function(e,t){return[s(e,t,i),e]})));for(o=0,r=new Array(u);o<c;++o)(l=e[o]).index=o,"object"!=typeof l.source&&(l.source=M(h,l.source)),"object"!=typeof l.target&&(l.target=M(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(o=0,a=new Array(c);o<c;++o)l=e[o],a[o]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);t=new Array(c),f(),n=new Array(c),d()}}function f(){if(i)for(var n=0,r=e.length;n<r;++n)t[n]=+o(e[n],n,e)}function d(){if(i)for(var t=0,r=e.length;t<r;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),c.initialize=function(e){i=e,h()},c.links=function(t){return arguments.length?(e=t,h(),c):e},c.id=function(e){return arguments.length?(s=e,c):s},c.iterations=function(e){return arguments.length?(u=+e,c):u},c.strength=function(e){return arguments.length?(o="function"==typeof e?e:T(+e),f(),c):o},c.distance=function(e){return arguments.length?(l="function"==typeof e?e:T(+e),d(),c):l},c}().links(this.simulationData.links).id((function(e){return e.predicate})).distance(50);this.forceSimulation.force("charge_force",t).force("center_force",n).force("collide_force",i),this.forceSimulation.nodes(this.simulationData.nodes),this.forceSimulation.force("links",r),this.forceSimulation.restart()}},{key:"updateSVG",value:function(){var e=this;if(this.svg){this.zoomGroup=this.svg.append("g").attr("class","zoom-container"),this.zoomGroup.append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",30).attr("refY",-.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:polyline").attr("points","0,-5 10,0 0,5");var t=this.zoomGroup.selectAll(".link").data(this.simulationData.nodeTriples).enter().append("path").attr("marker-end","url(#end)").attr("class","link"),n=this.zoomGroup.selectAll(".link-text").data(this.simulationData.nodeTriples).enter().append("text").attr("class","link-text").text((function(e){return e.nodePredicate.label})),i=this.zoomGroup.selectAll(".node-text").data(this.filterNodesByType(this.simulationData.nodes,ce.node)).enter().append("text").attr("class","node-text").text((function(e){return e.label})),r=this.zoomGroup.selectAll(".node").data(this.filterNodesByType(this.simulationData.nodes,ce.node)).enter().append("circle").attr("class",(function(e){return e.owlClass?"class":-1!==e.label.indexOf("_:")?"blank":e.instance||-1!==e.label.indexOf("inst:")?"instance":"node"})).attr("id",(function(e){return e.label})).attr("r",(function(e){return-1!==e.label.indexOf("_:")?8:e.instance||-1!==e.label.indexOf("inst:")?11:e.owlClass||-1!==e.label.indexOf("inst:")?10:9})).on("click",(function(t){e.clickedOnNode(t)}));this.forceSimulation.on("tick",(function(){e.updateNodePositions(r),e.updateNodeTextPositions(i),e.updateLinkPositions(t),e.updateLinkTextPositions(n)})),this.dragHandler(r,this.forceSimulation),this.zoomHandler(this.zoomGroup,this.svg)}}},{key:"checkForRdfType",value:function(e){return"a"===e.label||"rdf:type"===e.label||e.label===this.prefixPipe.transform(pe.long,"rdf:type")}},{key:"clickedOnNode",value:function(e){Ke.defaultPrevented||this.clickedNodeRequest.emit(e)}},{key:"dragHandler",value:function(e,t){e.call(function(){var e,t,n,i,r=xn,a=bn,s=wn,o=kn,l={},u=Q("start","drag","end"),c=0,h=0;function f(e){e.on("mousedown.drag",d).filter(o).on("touchstart.drag",v).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!i&&r.apply(this,arguments)){var s=_("mouse",a.apply(this,arguments),ot,this,arguments);s&&(fn(Ke.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),vn(Ke.view),pn(),n=!1,e=Ke.clientX,t=Ke.clientY,s("start"))}}function p(){if(gn(),!n){var i=Ke.clientX-e,r=Ke.clientY-t;n=i*i+r*r>h}l.mouse("drag")}function g(){fn(Ke.view).on("mousemove.drag mouseup.drag",null),yn(Ke.view,n),gn(),l.mouse("end")}function v(){if(r.apply(this,arguments)){var e,t,n=Ke.changedTouches,i=a.apply(this,arguments),s=n.length;for(e=0;e<s;++e)(t=_(n[e].identifier,i,dn,this,arguments))&&(pn(),t("start"))}}function y(){var e,t,n=Ke.changedTouches,i=n.length;for(e=0;e<i;++e)(t=l[n[e].identifier])&&(gn(),t("drag"))}function m(){var e,t,n=Ke.changedTouches,r=n.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<r;++e)(t=l[n[e].identifier])&&(pn(),t("end"))}function _(e,t,n,i,r){var a,o,h,d=n(t,e),p=u.copy();if(rt(new _n(f,"beforestart",a,e,c,d[0],d[1],0,0,p),(function(){return null!=(Ke.subject=a=s.apply(i,r))&&(o=a.x-d[0]||0,h=a.y-d[1]||0,!0)})))return function s(u){var g,v=d;switch(u){case"start":l[e]=s,g=c++;break;case"end":delete l[e],--c;case"drag":d=n(t,e),g=c}rt(new _n(f,u,a,e,g,d[0]+o,d[1]+h,d[0]-v[0],d[1]-v[1],p),p.apply,p,[u,i,r])}}return f.filter=function(e){return arguments.length?(r="function"==typeof e?e:mn(!!e),f):r},f.container=function(e){return arguments.length?(a="function"==typeof e?e:mn(e),f):a},f.subject=function(e){return arguments.length?(s="function"==typeof e?e:mn(e),f):s},f.touchable=function(e){return arguments.length?(o="function"==typeof e?e:mn(!!e),f):o},f.on=function(){var e=u.on.apply(u,arguments);return e===u?f:e},f.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,f):Math.sqrt(h)},f}().on("start",(function(e){Ke.sourceEvent.stopPropagation(),Ke.active||t.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y})).on("drag",(function(e){e.fx=Ke.x,e.fy=Ke.y})).on("end",(function(e){Ke.active||t.alphaTarget(0),e.fx=null,e.fy=null})))}},{key:"filterNodesById",value:function(e,t){return e.filter((function(e){return e.id===t}))[0]}},{key:"filterNodesByType",value:function(e,t){return e.filter((function(e){return e.type===t}))}},{key:"getContainerWidth",value:function(e){return e&&e.nativeElement?e.nativeElement.clientWidth:null}},{key:"getContainerHeight",value:function(e){return e&&e.nativeElement?e.nativeElement.clientHeight:null}},{key:"limitTriples",value:function(e,t){return e?e.length>t?e.slice(0,t):e:[]}},{key:"nodeRadius",value:function(e){if(!e)return null;var t=8;return-1!==e.label.indexOf("_:")?t--:e.instance||-1!==e.label.indexOf("inst:")?t+2:e.owlClass||-1!==e.label.indexOf("inst:")?t++:t}},{key:"parseTriples",value:function(e){var t=$e(),n=[];return new Promise((function(i,r){t.parse(e,(function(e,t,a){t?n.push(t):i({triples:n,namespaces:a}),e&&r(e)}))}))}},{key:"triplesToD3GraphData",value:function(e){var t=this;if(e){var n=new fe;return e.map((function(e){var i=t.prefixPipe.transform(pe.short,e.subject),r=t.prefixPipe.transform(pe.short,e.predicate),a=t.prefixPipe.transform(pe.short,e.object);isNaN(a)||(a=Number(a)%1==0?String(Number(a)):String(Number(a).toFixed(2)));var s=new ge(r,ce.link);n.nodes.push(s);var o=t.filterNodesById(n.nodes,i),l=t.filterNodesById(n.nodes,a);null==o&&(o=new ge(i,ce.node),n.nodes.push(o)),null==l&&(l=new ge(a,ce.node),n.nodes.push(l)),!1===o.instance&&(o.instance=t.checkForRdfType(s)),!1===l.owlClass&&(l.owlClass=t.checkForRdfType(s)),n.links.push(new de(o,s)),n.links.push(new de(s,l)),n.nodeTriples.push(new ve(o,s,l))})),n}}},{key:"updateNodePositions",value:function(e){e.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y}))}},{key:"updateNodeTextPositions",value:function(e){e.attr("x",(function(e){return e.x+12})).attr("y",(function(e){return e.y+3}))}},{key:"updateLinkPositions",value:function(e){e.attr("d",(function(e){return"M"+e.nodeSubject.x+","+e.nodeSubject.y+"S"+e.nodePredicate.x+","+e.nodePredicate.y+" "+e.nodeObject.x+","+e.nodeObject.y}))}},{key:"updateLinkTextPositions",value:function(e){e.attr("x",(function(e){return 4+(e.nodeSubject.x+e.nodePredicate.x+e.nodeObject.x)/3})).attr("y",(function(e){return 4+(e.nodeSubject.y+e.nodePredicate.y+e.nodeObject.y)/3}))}},{key:"zoomHandler",value:function(e,t){t.call(function(){var e,t,n=lr,i=ur,r=dr,a=hr,s=fr,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,c=Dn,h=Q("start","zoom","end"),f=0;function d(e){e.property("__zoom",cr).on("wheel.zoom",x).on("mousedown.zoom",b).on("dblclick.zoom",w).filter(s).on("touchstart.zoom",k).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(e,t){return(t=Math.max(o[0],Math.min(o[1],t)))===e.k?e:new rr(t,e.x,e.y)}function g(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new rr(e.k,i,r)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function y(e,t,n){e.on("start.zoom",(function(){m(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){m(this,arguments).end()})).tween("zoom",(function(){var e=this,r=arguments,a=m(e,r),s=i.apply(e,r),o=null==n?v(s):"function"==typeof n?n.apply(e,r):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,h="function"==typeof t?t.apply(e,r):t,f=c(u.invert(o).concat(l/u.k),h.invert(o).concat(l/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=l/t[2];e=new rr(n,o[0]-t[0]*n,o[1]-t[1]*n)}a.zoom(null,e)}}))}function m(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.extent=i.apply(e,t),this.taps=0}function x(){if(n.apply(this,arguments)){var e=m(this,arguments),t=this.__zoom,i=Math.max(o[0],Math.min(o[1],t.k*Math.pow(2,a.apply(this,arguments)))),s=ot(this);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=t.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(t.k===i)return;e.mouse=[s,t.invert(s)],Fn(this),e.start()}or(),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),150),e.zoom("mouse",r(g(p(t,i),e.mouse[0],e.mouse[1]),e.extent,l))}}function b(){if(!t&&n.apply(this,arguments)){var e=m(this,arguments,!0),i=fn(Ke.view).on("mousemove.zoom",(function(){if(or(),!e.moved){var t=Ke.clientX-s,n=Ke.clientY-o;e.moved=t*t+n*n>f}e.zoom("mouse",r(g(e.that.__zoom,e.mouse[0]=ot(e.that),e.mouse[1]),e.extent,l))}),!0).on("mouseup.zoom",(function(){i.on("mousemove.zoom mouseup.zoom",null),yn(Ke.view,e.moved),or(),e.end()}),!0),a=ot(this),s=Ke.clientX,o=Ke.clientY;vn(Ke.view),sr(),e.mouse=[a,this.__zoom.invert(a)],Fn(this),e.start()}}function w(){if(n.apply(this,arguments)){var e=this.__zoom,t=ot(this),a=e.invert(t),s=e.k*(Ke.shiftKey?.5:2),o=r(g(p(e,s),t,a),i.apply(this,arguments),l);or(),u>0?fn(this).transition().duration(u).call(y,o,t):fn(this).call(d.transform,o)}}function k(){if(n.apply(this,arguments)){var t,i,r,a,s=Ke.touches,o=s.length,l=m(this,arguments,Ke.changedTouches.length===o);for(sr(),i=0;i<o;++i)r=s[i],a=[a=dn(this,s,r.identifier),this.__zoom.invert(a),r.identifier],l.touch0?l.touch1||l.touch0[2]===a[2]||(l.touch1=a,l.taps=0):(l.touch0=a,t=!0,l.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(l.taps<2&&(e=setTimeout((function(){e=null}),500)),Fn(this),l.start())}}function S(){if(this.__zooming){var t,n,i,a,s=m(this,arguments),o=Ke.changedTouches,u=o.length;for(or(),e&&(e=clearTimeout(e)),s.taps=0,t=0;t<u;++t)n=o[t],i=dn(this,o,n.identifier),s.touch0&&s.touch0[2]===n.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===n.identifier&&(s.touch1[0]=i);if(n=s.that.__zoom,s.touch1){var c=s.touch0[0],h=s.touch0[1],f=s.touch1[0],d=s.touch1[1],v=(v=f[0]-c[0])*v+(v=f[1]-c[1])*v,y=(y=d[0]-h[0])*y+(y=d[1]-h[1])*y;n=p(n,Math.sqrt(v/y)),i=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(h[0]+d[0])/2,(h[1]+d[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",r(g(n,i,a),s.extent,l))}}function O(){if(this.__zooming){var e,n,i=m(this,arguments),r=Ke.changedTouches,a=r.length;for(sr(),t&&clearTimeout(t),t=setTimeout((function(){t=null}),500),e=0;e<a;++e)n=r[e],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var s=fn(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return d.transform=function(e,t,n){var i=e.selection?e.selection():e;i.property("__zoom",cr),e!==i?y(e,t,n):i.interrupt().each((function(){m(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},d.scaleBy=function(e,t,n){d.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n)},d.scaleTo=function(e,t,n){d.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,o=a.invert(s),u="function"==typeof t?t.apply(this,arguments):t;return r(g(p(a,u),s,o),e,l)}),n)},d.translateBy=function(e,t,n){d.transform(e,(function(){return r(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}))},d.translateTo=function(e,t,n,a){d.transform(e,(function(){var e=i.apply(this,arguments),s=this.__zoom,o=null==a?v(e):"function"==typeof a?a.apply(this,arguments):a;return r(ar.translate(o[0],o[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),a)},_.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){rt(new ir(d,e,this.that.__zoom),h.apply,h,[e,this.that,this.args])}},d.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:nr(+e),d):a},d.filter=function(e){return arguments.length?(n="function"==typeof e?e:nr(!!e),d):n},d.touchable=function(e){return arguments.length?(s="function"==typeof e?e:nr(!!e),d):s},d.extent=function(e){return arguments.length?(i="function"==typeof e?e:nr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),d):i},d.scaleExtent=function(e){return arguments.length?(o[0]=+e[0],o[1]=+e[1],d):[o[0],o[1]]},d.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],d):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},d.constrain=function(e){return arguments.length?(r=e,d):r},d.duration=function(e){return arguments.length?(u=+e,d):u},d.interpolate=function(e){return arguments.length?(c=e,d):c},d.on=function(){var e=h.on.apply(h,arguments);return e===h?d:e},d.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,d):Math.sqrt(f)},d}().on("zoom",(function(){e.attr("transform",Ke.transform)})))}},{key:"log",value:function(e,t){var n=t?JSON.parse(JSON.stringify(t)):t;console.log(e,n)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}]),e}();pr.ctorParameters=function(){return[{type:Je},{type:me}]},Object(i.a)([Object(r.F)()],pr.prototype,"queryResultTriples",void 0),Object(i.a)([Object(r.F)()],pr.prototype,"height",void 0),Object(i.a)([Object(r.R)()],pr.prototype,"clickedNodeRequest",void 0),Object(i.a)([Object(r.lb)("graph",{static:!0})],pr.prototype,"graphContainer",void 0),Object(i.a)([Object(r.z)("window:resize")],pr.prototype,"onResize",null),pr=Object(i.a)([Object(r.n)({selector:"awg-force-graph",template:__importDefault(n("smF7")).default,styles:[__importDefault(n("fxLE")).default]})],pr);var gr=n("dJ3e"),vr=function(){function e(t){_classCallCheck(this,e),this.coreService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.provideMetaData()}},{key:"provideMetaData",value:function(){this.logos=this.coreService.getLogos()}}]),e}();vr.ctorParameters=function(){return[{type:gr.c}]},Object(i.a)([Object(r.F)()],vr.prototype,"height",void 0),vr=Object(i.a)([Object(r.n)({selector:"awg-force-graph-no-result",template:__importDefault(n("Nsq5")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("Bx2S")).default]})],vr);var yr=n("Cfvw");n("P3N9"),n("T/QY"),n("++e5");var mr=function(){function e(t){_classCallCheck(this,e),this.graphVisualizerService=t,this.cmTriplesConfig={lineNumbers:!0,firstLineNumber:1,lineWrapping:!0,matchBrackets:!0,mode:"turtle"},this.cmSparqlConfig={lineNumbers:!0,firstLineNumber:1,lineWrapping:!0,matchBrackets:!0,mode:"sparql"},this.defaultForceGraphHeight=500}return _createClass(e,[{key:"ngOnInit",value:function(){this.setInitialTriples(),this.setInitialQuery(),this.doQuery()}},{key:"doQuery",value:function(){-1===this.query.queryString.toLowerCase().indexOf("prefix")&&(this.query.queryString=this.graphVisualizerService.appendNamespacesToQuery(this.query.queryString,this.triples)),this.queryType=this.graphVisualizerService.getQuerytype(this.query.queryString),this.queryResult=this.queryLocalstore(this.queryType,this.query.queryString,this.triples)}},{key:"onGraphClick",value:function(e){console.log("AppComponent# graphClick URI",e)}},{key:"onQueryChange",value:function(e){(e||this.queryList)&&(this.query=this.queryList.find((function(t){return e===t}))||this.queryList[0],this.doQuery())}},{key:"resetQuery",value:function(e){this.graphRDFInputData.queryList&&(this.queryList=JSON.parse(JSON.stringify(this.graphRDFInputData.queryList)),this.query=this.queryList.find((function(t){return e.queryLabel===t.queryLabel}))||e,this.doQuery())}},{key:"onTableClick",value:function(e){this.query.queryString="SELECT * WHERE {\n\tBIND(<".concat(e,"> AS ?el)\n\t?el ?key ?value\n}"),this.doQuery()}},{key:"setInitialTriples",value:function(){this.graphRDFInputData.triples&&(this.triples=this.graphRDFInputData.triples)}},{key:"setInitialQuery",value:function(){this.graphRDFInputData.queryList&&(this.queryList=JSON.parse(JSON.stringify(this.graphRDFInputData.queryList)),this.query=this.queryList[0])}},{key:"showErrorMessage",value:function(e,t){t||(t=1e4),console.log(e)}},{key:"queryLocalstore",value:function(e,t,n){var i=Date.now();try{var r=this.graphVisualizerService.doQuery(e,t,n);return this.queryTime=Date.now()-i,Object(yr.a)(r)}catch(a){return console.error("#queryLocalstore got error:",a),a.message&&a.name&&(-1!==a.message.indexOf("undefined")&&this.showErrorMessage("The query did not return any results",1e4),this.showErrorMessage(a.name+": "+a.message,1e4)),this.queryTime=Date.now()-i,console.log("QUERYTIME:",this.queryTime),Object(yr.a)([])}}}]),e}();mr.ctorParameters=function(){return[{type:Je}]},Object(i.a)([Object(r.F)()],mr.prototype,"graphRDFInputData",void 0),mr=Object(i.a)([Object(r.n)({selector:"awg-graph-visualizer",template:__importDefault(n("CPCM")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("/Stp")).default]})],mr);var _r=function e(){_classCallCheck(this,e)};_r=Object(i.a)([Object(r.K)({imports:[a.a],declarations:[mr,pr,vr,me],exports:[mr],providers:[Je,me]})],_r);var xr=function e(){_classCallCheck(this,e)};xr=Object(i.a)([Object(r.K)({imports:[a.a,_r],exports:[mr]})],xr);var br=function(){function e(){_classCallCheck(this,e),this.navigateToReportFragmentRequest=new r.w,this.openModalRequest=new r.w,this.selectSvgSheetRequest=new r.w}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"navigateToReportFragment",value:function(e){this.navigateToReportFragmentRequest.emit(e)}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],br.prototype,"sourceListData",void 0),Object(i.a)([Object(r.F)()],br.prototype,"sourceDescriptionListData",void 0),Object(i.a)([Object(r.F)()],br.prototype,"sourceEvaluationListData",void 0),Object(i.a)([Object(r.R)()],br.prototype,"navigateToReportFragmentRequest",void 0),Object(i.a)([Object(r.R)()],br.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],br.prototype,"selectSvgSheetRequest",void 0),br=Object(i.a)([Object(r.n)({selector:"awg-sources",template:__importDefault(n("vuFq")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("ukwC")).default]})],br);var wr=function(){function e(){_classCallCheck(this,e),this.openModalRequest=new r.w,this.selectSvgSheetRequest=new r.w,this.firmSigns={op12:{A:[s.a.firmJENo9Lin28]},op25:{A:[s.a.firmJENo15Lin16]}},this.ref=this}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],wr.prototype,"sourceDescriptionListData",void 0),Object(i.a)([Object(r.R)()],wr.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],wr.prototype,"selectSvgSheetRequest",void 0),wr=Object(i.a)([Object(r.n)({selector:"awg-source-description",template:__importDefault(n("HZVz")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("o98y")).default]})],wr);var kr=function(){function e(){_classCallCheck(this,e),this.navigateToReportFragmentRequest=new r.w,this.openModalRequest=new r.w,this.selectSvgSheetRequest=new r.w,this.ref=this}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"navigateToReportFragment",value:function(e){this.navigateToReportFragmentRequest.emit(e)}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],kr.prototype,"sourceEvaluationListData",void 0),Object(i.a)([Object(r.R)()],kr.prototype,"navigateToReportFragmentRequest",void 0),Object(i.a)([Object(r.R)()],kr.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],kr.prototype,"selectSvgSheetRequest",void 0),kr=Object(i.a)([Object(r.n)({selector:"awg-source-evaluation",template:__importDefault(n("Noas")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("hyNt")).default]})],kr);var Sr=function(){function e(){_classCallCheck(this,e),this.openModalRequest=new r.w,this.ref=this}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],Sr.prototype,"sourceListData",void 0),Object(i.a)([Object(r.R)()],Sr.prototype,"openModalRequest",void 0),Sr=Object(i.a)([Object(r.n)({selector:"awg-source-list",template:__importDefault(n("4eNE")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("KdKv")).default]})],Sr);var Or=function(){function e(){_classCallCheck(this,e),this.openModalRequest=new r.w,this.selectSvgSheetRequest=new r.w,this.ref=this}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}},{key:"isNotEmptyArray",value:function(e){return e&&e.constructor===Array&&e.length>0}}]),e}();Object(i.a)([Object(r.F)()],Or.prototype,"textcriticsData",void 0),Object(i.a)([Object(r.R)()],Or.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],Or.prototype,"selectSvgSheetRequest",void 0),Or=Object(i.a)([Object(r.n)({selector:"awg-critics-list",template:__importDefault(n("w9nx")).default,styles:[__importDefault(n("wgPI")).default]})],Or);var Dr=function(){function e(){_classCallCheck(this,e),this.openModalRequest=new r.w,this.selectSvgSheetRequest=new r.w}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),e}();Object(i.a)([Object(r.F)()],Dr.prototype,"textcriticsData",void 0),Object(i.a)([Object(r.R)()],Dr.prototype,"openModalRequest",void 0),Object(i.a)([Object(r.R)()],Dr.prototype,"selectSvgSheetRequest",void 0),Dr=Object(i.a)([Object(r.n)({selector:"awg-textcritics",template:__importDefault(n("5FEQ")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("APMD")).default]})],Dr);var Cr=function e(){_classCallCheck(this,e)};Cr=Object(i.a)([Object(r.K)({imports:[a.a,h],declarations:[br,wr,kr,Sr,Or,Dr],exports:[br,wr,kr,Sr,Or,Dr]})],Cr);var Rr=n("iInd"),jr=n("IheW"),Ir=n("cp0P"),qr=n("LRne"),Tr=n("xbPD"),Ar=n("IzEk"),Nr=n("JIr8"),Pr=function(){function e(t){_classCallCheck(this,e),this.http=t,this.assetWorkPath=""}return _createClass(e,[{key:"getEditionDetailData",value:function(e){this.setAssetWorkPath(e);var t=this.getFolioConvoluteData(),n=this.getSvgSheetsData(),i=this.getTextcriticsListData();return Object(Ir.a)([t,n,i]).pipe(Object(Tr.a)([new s.f,new s.c,new s.m]),Object(Ar.a)(1))}},{key:"getEditionGraphData",value:function(e){return this.setAssetWorkPath(e),this.getGraphData().pipe(Object(Tr.a)(new s.h),Object(Ar.a)(1))}},{key:"getEditionIntroData",value:function(e){return this.setAssetWorkPath(e),this.getIntroData().pipe(Object(Tr.a)(new s.i),Object(Ar.a)(1))}},{key:"getEditionReportData",value:function(e){this.setAssetWorkPath(e);var t=this.getSourceListData(),n=this.getSourceDescriptionListData(),i=this.getSourceEvaluationListData(),r=this.getTextcriticsListData();return Object(Ir.a)([t,n,i,r]).pipe(Object(Tr.a)([new s.l,new s.j,new s.k,new s.m]),Object(Ar.a)(1))}},{key:"setAssetWorkPath",value:function(e){var t=e.series.route+e.section.route+e.work.route;this.assetWorkPath=s.a.editionAssets.baseRoute+t}},{key:"getFolioConvoluteData",value:function(){var e=s.a.editionAssets.folioConvoluteFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getGraphData",value:function(){var e=s.a.editionAssets.graphFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getIntroData",value:function(){var e=s.a.editionAssets.introFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getSourceListData",value:function(){var e=s.a.editionAssets.sourceListFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getSourceDescriptionListData",value:function(){var e=s.a.editionAssets.sourceDescriptionListFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getSourceEvaluationListData",value:function(){var e=s.a.editionAssets.sourceEvaluationListFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getSvgSheetsData",value:function(){var e=s.a.editionAssets.svgSheetsFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getTextcriticsListData",value:function(){var e=s.a.editionAssets.textcriticsFile,t="".concat(this.assetWorkPath,"/").concat(e);return this.getJsonData(t)}},{key:"getJsonData",value:function(e){return this.http.get(e).pipe(Object(Nr.a)(this.handleError("getJsonData",[])))}},{key:"handleError",value:function(e,t){var n=this;return function(i){return console.error(i),n.log("".concat(e," failed: ").concat(i.message)),Object(qr.a)(t)}}},{key:"log",value:function(e){console.log(e)}}]),e}();Pr.ctorParameters=function(){return[{type:jr.b}]},Pr=Object(i.a)([Object(r.C)({providedIn:"root"})],Pr);var Er,Mr=n("jtHE"),Fr=Er=function(){function e(){_classCallCheck(this,e),this.bufferSize=1,this.editionWorkSubject=new Mr.a(this.bufferSize),this.editionWorkStream$=this.editionWorkSubject.asObservable()}return _createClass(e,[{key:"getEditionWork",value:function(){return this.editionWorkStream$}},{key:"updateEditionWork",value:function(e){this.editionWorkSubject.next(e)}},{key:"clearEditionWork",value:function(){this.editionWorkSubject.next(null)}},{key:"getTextcriticalComments",value:function(e,t){return e.filter((function(e,n){return Er.filterTextcriticalComments(e,t,n)}))}}],[{key:"filterTextcriticalComments",value:function(e,t,n){var i=e.measure.replace("[","").replace("]",""),r=e.system.replace("[","").replace("]","");switch(t.type){case"measure":return i===t.id;case"system":return r===t.id;case"item":return n===+t.id}}}]),e}();Fr=Er=Object(i.a)([Object(r.C)({providedIn:"root"})],Fr);var Lr=function(){function e(t,n,i){_classCallCheck(this,e),this.editionService=t,this.route=n,this.router=i,this.editionViewTitle="Beispieledition ausgew\xe4hlter Skizzen",this.editionViewId="awg-edition-view"}return _createClass(e,[{key:"ngOnInit",value:function(){this.routeToSidenav(),this.getEditionWorkFromRoute()}},{key:"getEditionWorkFromRoute",value:function(){var e=this;this.route.paramMap.subscribe((function(t){var n=t.get("compositionId")?t.get("compositionId"):"";e.editionService.updateEditionWork(s.d[n]),e.editionWork$=e.editionService.getEditionWork()}))}},{key:"routeToSidenav",value:function(){this.router.navigate([{outlets:{side:"editionInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}}]),e}();Lr.ctorParameters=function(){return[{type:Fr},{type:Rr.a},{type:Rr.d}]},Lr=Object(i.a)([Object(r.n)({selector:"awg-edition-view",template:__importDefault(n("9eWN")).default,styles:[__importDefault(n("hjB0")).default]})],Lr);var zr=n("eIep"),Wr=function(){function e(t,n,i,r){_classCallCheck(this,e),this.editionDataService=t,this.editionService=n,this.route=i,this.router=r,this.errorMessage=void 0,this.showTkA=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getEditionDetailData()}},{key:"getEditionDetailData",value:function(){var e=this;this.editionService.getEditionWork().pipe(Object(zr.a)((function(t){return e.editionWork=t,e.editionDataService.getEditionDetailData(e.editionWork)}))).pipe(Object(zr.a)((function(t){if(e.folioConvoluteData=t[0],e.svgSheetsData=t[1],e.textcriticsData=t[2],e.svgSheetsData)return e.route.queryParamMap}))).subscribe((function(t){var n=e.getSketchParams(t);e.selectedSvgSheet=e.findSvgSheet(n),!e.selectedConvolute&&e.folioConvoluteData.convolutes&&e.folioConvoluteData.convolutes.constructor===Array&&e.folioConvoluteData.convolutes.length>0&&(e.selectedConvolute=e.folioConvoluteData.convolutes[0])}),(function(t){e.errorMessage=t}))}},{key:"onConvoluteSelect",value:function(e){if(e){var t=this.findConvolute(e);t.folios&&t.folios.constructor===Array&&0===t.folios.length?t.linkTo&&this.modal.open(t.linkTo):this.selectedConvolute=t}}},{key:"onOverlaySelect",value:function(e){if(this.textcriticsData||this.selectedSvgSheet){var t=this.findTextCriticalComments();this.selectedOverlay=e,this.selectedTextcriticalComments=this.editionService.getTextcriticalComments(t,this.selectedOverlay),this.showTkA=this.selectedTextcriticalComments!==[]}}},{key:"onSvgSheetSelect",value:function(e){e||(e=""),this.selectedSvgSheet=this.findSvgSheet(e),this.showTkA=!1;var t={queryParams:{sketch:e},queryParamsHandling:""};this.router.navigate([this.editionWork.baseRoute,this.editionWork.detailRoute.route],t)}},{key:"getSketchParams",value:function(e){if(e.get("sketch"))return e.get("sketch")?e.get("sketch"):this.svgSheetsData.sheets[0].id;this.onSvgSheetSelect(this.svgSheetsData.sheets[0].id)}},{key:"findConvolute",value:function(e){if(e){var t=this.folioConvoluteData.convolutes.findIndex((function(t){return t.convoluteId===e}));return this.folioConvoluteData.convolutes[t]}}},{key:"findSvgSheet",value:function(e){if(e){var t=this.svgSheetsData.sheets.findIndex((function(t){return t.id===e}));return this.svgSheetsData.sheets[t]}}},{key:"findTextCriticalComments",value:function(){var e=this;if(this.textcriticsData||this.selectedSvgSheet){var t=this.textcriticsData.textcritics.findIndex((function(t){return t.id===e.selectedSvgSheet.id}));return this.textcriticsData.textcritics[t].comments}}}]),e}();Wr.ctorParameters=function(){return[{type:Pr},{type:Fr},{type:Rr.a},{type:Rr.d}]},Object(i.a)([Object(r.lb)("modal",{static:!0})],Wr.prototype,"modal",void 0),Wr=Object(i.a)([Object(r.n)({selector:"awg-edition-detail",template:__importDefault(n("4mU8")).default,styles:[__importDefault(n("dqwC")).default]})],Wr);var Br=n("z6cu"),Gr=function(){function e(t,n){_classCallCheck(this,e),this.editionDataService=t,this.editionService=n,this.graphImages={op12:"",op25:s.a.graphImageOp25.route},this.errorObject=null,this.ref=this}return _createClass(e,[{key:"ngOnInit",value:function(){this.getEditionGraphData()}},{key:"getEditionGraphData",value:function(){var e=this;this.editionGraphData$=this.editionService.getEditionWork().pipe(Object(zr.a)((function(t){return e.editionWork=t,e.editionDataService.getEditionGraphData(e.editionWork)})),Object(Nr.a)((function(t){return e.errorObject=t,Object(Br.a)(t)})))}}]),e}();Gr.ctorParameters=function(){return[{type:Pr},{type:Fr}]},Gr=Object(i.a)([Object(r.n)({selector:"awg-edition-graph",template:__importDefault(n("osP3")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("2RRz")).default]})],Gr);var Vr=function(){function e(t,n,i){_classCallCheck(this,e),this.editionDataService=t,this.editionService=n,this.router=i,this.errorObject=null,this.ref=this}return _createClass(e,[{key:"ngOnInit",value:function(){this.getEditionIntroData()}},{key:"getEditionIntroData",value:function(){var e=this;this.editionIntroData$=this.editionService.getEditionWork().pipe(Object(zr.a)((function(t){return e.editionWork=t,e.editionDataService.getEditionIntroData(e.editionWork)})),Object(Nr.a)((function(t){return e.errorObject=t,Object(Br.a)(t)})))}},{key:"navigateToReportFragment",value:function(e){e||(e="");var t={fragment:e};this.router.navigate([this.editionWork.baseRoute,this.editionWork.reportRoute.route],t)}},{key:"openModal",value:function(e){this.modal.open(e)}},{key:"selectSvgSheet",value:function(e){e||(e="");var t={queryParams:{sketch:e},queryParamsHandling:""};this.router.navigate([this.editionWork.baseRoute,this.editionWork.detailRoute.route],t)}}]),e}();Vr.ctorParameters=function(){return[{type:Pr},{type:Fr},{type:Rr.d}]},Object(i.a)([Object(r.lb)("modal",{static:!0})],Vr.prototype,"modal",void 0),Vr=Object(i.a)([Object(r.n)({selector:"awg-intro",template:__importDefault(n("JBgb")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("kDpQ")).default]})],Vr);var Hr=n("wjQg"),Qr=function(){function e(t){_classCallCheck(this,e),this.editionService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.getEditionWork()}},{key:"getEditionWork",value:function(){var e=this;this.subscription=this.editionService.getEditionWork().subscribe((function(t){e.editionWork=t,e.setButtons()}))}},{key:"setButtons",value:function(){this.editionRouterLinkButtons=[new Hr.a(this.editionWork.baseRoute,this.editionWork.introRoute.route,s.a.editionIntro.short,!1),new Hr.a(this.editionWork.baseRoute,this.editionWork.detailRoute.route,s.a.editionDetail.short,!1),new Hr.a(this.editionWork.baseRoute,this.editionWork.reportRoute.route,s.a.editionReport.short,!1),new Hr.a(this.editionWork.baseRoute,this.editionWork.graphRoute.route,s.a.editionGraph.short,!1)]}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();Qr.ctorParameters=function(){return[{type:Fr}]},Qr=Object(i.a)([Object(r.n)({selector:"awg-edition-overview",template:__importDefault(n("iRdu")).default,styles:[__importDefault(n("X5DC")).default]})],Qr);var $r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();$r=Object(i.a)([Object(r.n)({selector:"awg-edition-section",template:__importDefault(n("fn2g")).default,styles:[__importDefault(n("Az6W")).default]})],$r);var Ur=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();Ur=Object(i.a)([Object(r.n)({selector:"awg-edition-series",template:__importDefault(n("bj45")).default,styles:[__importDefault(n("aRJb")).default]})],Ur);var Xr=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();Xr=Object(i.a)([Object(r.n)({selector:"awg-edition-type",template:__importDefault(n("vY9l")).default,styles:[__importDefault(n("25sD")).default]})],Xr);var Jr=function(){function e(t,n,i){_classCallCheck(this,e),this.editionDataService=t,this.editionService=n,this.router=i,this.errorObject=null}return _createClass(e,[{key:"ngOnInit",value:function(){this.getEditionReportData()}},{key:"getEditionReportData",value:function(){var e=this;this.editionReportData$=this.editionService.getEditionWork().pipe(Object(zr.a)((function(t){return e.editionWork=t,e.editionDataService.getEditionReportData(e.editionWork)})),Object(Nr.a)((function(t){return e.errorObject=t,Object(Br.a)(t)})))}},{key:"onReportFragmentNavigate",value:function(e){e||(e="");var t={fragment:e};this.router.navigate([this.editionWork.baseRoute,this.editionWork.reportRoute.route],t)}},{key:"onSvgSheetSelect",value:function(e){e||(e="");var t={queryParams:{sketch:e},queryParamsHandling:""};this.router.navigate([this.editionWork.baseRoute,this.editionWork.detailRoute.route],t)}}]),e}();Jr.ctorParameters=function(){return[{type:Pr},{type:Fr},{type:Rr.d}]},Jr=Object(i.a)([Object(r.n)({selector:"awg-report",template:__importDefault(n("/6Kk")).default,changeDetection:r.j.OnPush,styles:[__importDefault(n("GMLg")).default]})],Jr);var Yr=n("Bh7d"),Kr=[{path:"",component:$r,children:[{path:"composition/:compositionId",component:Lr,children:[{path:"",component:Qr,children:[{path:Yr.a.editionGraph.route.valueOf(),component:Gr},{path:Yr.a.editionIntro.route.valueOf(),component:Vr},{path:Yr.a.editionDetail.route.valueOf(),component:Wr},{path:Yr.a.editionReport.route.valueOf(),component:Jr},{path:"",redirectTo:"/"+Yr.a.editionIntro.route.valueOf(),pathMatch:"full"}]}]}]}],Zr=[Lr,Wr,Gr,Vr,Qr,$r,Ur,Xr,Jr],ea=function e(){_classCallCheck(this,e)};ea=Object(i.a)([Object(r.K)({imports:[Rr.e.forChild(Kr)],exports:[Rr.e]})],ea),n.d(t,"EditionViewModule",(function(){return ta}));var ta=function e(){_classCallCheck(this,e)};ta=Object(i.a)([Object(r.K)({imports:[a.a,_,xr,x,Cr,ea],declarations:[Zr]})],ta)},HZVz:function(e,t,n){"use strict";n.r(t),t.default='<div *ngIf="sourceDescriptionListData">\n    <div *ngFor="let sourceDescription of sourceDescriptionListData.sources" class="para" [id]="sourceDescription.id">\n        <p *ngIf="sourceDescription.siglum" class="bold">{{ sourceDescription.siglum }}</p>\n        <p *ngIf="sourceDescription.location">{{ sourceDescription.location }}</p>\n        <div *ngIf="sourceDescription.description">\n            <p\n                *ngFor="let description of sourceDescription.description"\n                [compile-html]="description"\n                [compile-html-ref]="this"\n            ></p>\n        </div>\n    </div>\n</div>\n'},JBgb:function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- content: intro --\x3e\n<div>\n    \x3c!-- modal --\x3e\n    <awg-modal #modal></awg-modal>\n\n    \x3c!-- intro --\x3e\n    <div *ngIf="editionIntroData$ | async as editionIntroData; else error">\n        <p *ngFor="let intro of editionIntroData.intro[0].content" [compile-html]="intro" [compile-html-ref]="this"></p>\n    </div>\n\n    <ng-template #error>\n        \x3c!-- error message --\x3e\n        <div class="errorMessage" *ngIf="errorObject">\n            <div class="col-12 text-center">\n                <div class="alert alert-danger">\n                    {{ errorObject }}\n                </div>\n            </div>\n        </div>\n    </ng-template>\n</div>\n'},"Jk/l":function(e,t,n){"use strict";n.r(t),t.default='<div *ngIf="svgSheetsData" class="btn-group awg-btn-group d-flex" role="group">\n    <a\n        class="btn btn-default w-100"\n        *ngFor="let svgSheet of svgSheetsData.sheets"\n        [class.active]="isSelectedSvgSheet(svgSheet.id)"\n        (click)="selectSvgSheet(svgSheet.id)"\n    >\n        {{ svgSheet.id }}\n    </a>\n</div>\n'},KdKv:function(e,t,n){"use strict";n.r(t),t.default=""},LvvI:function(e,t,n){"use strict";n.r(t),t.default=""},Noas:function(e,t,n){"use strict";n.r(t),t.default='<div class="para" *ngIf="sourceEvaluationListData">\n    <p\n        *ngFor="let evaluation of sourceEvaluationListData.sources[0].content"\n        [compile-html]="evaluation"\n        [compile-html-ref]="this"\n    ></p>\n</div>\n'},Nsq5:function(e,t,n){"use strict";n.r(t),t.default='<div class="text-center" [ngStyle]="{ \'height.px\': height }">\n    <p>Entschuldigung, Ihre SPARQL-Anfrage f\xfchrte leider zu keinem Ergebnis.</p>\n    <p>M\xf6glicherweise k\xf6nnen Sie Ihre Anfrage anpassen.</p>\n    <p>\n        <a href="{{ logos.sparql.href }}" target="_blank" rel="noopener noreferrer">\n            <img width="33%" src="{{ logos.sparql.src }}" alt="{{ logos.sparql.alt }}" />\n        </a>\n    </p>\n    <p>\n        Ausf\xfchrliche Informationen zu SPARQL finden Sie unter:\n        <a href="{{ logos.sparql.href }}" target="_blank" rel="noopener noreferrer">{{ logos.sparql.href }}</a\n        >.\n    </p>\n</div>\n'},P3N9:function(e,t,n){!function(e){"use strict";e.defineMode("turtle",(function(e){var t,n=e.indentUnit;function i(e){return new RegExp("^(?:"+e.join("|")+")$","i")}i([]);var r=i(["@prefix","@base","a"]),a=/[*+\-<>=&|]/;function s(e,n){var i,o=e.next();if(t=null,"<"!=o||e.match(/^[\s\u00a0=]/,!1)){if('"'==o||"'"==o)return n.tokenize=(i=o,function(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==i&&!r){t.tokenize=s;break}r=!r&&"\\"==n}return"string"}),n.tokenize(e,n);if(/[{}\(\),\.;\[\]]/.test(o))return t=o,null;if("#"==o)return e.skipToEnd(),"comment";if(a.test(o))return e.eatWhile(a),null;if(":"==o)return"operator";if(e.eatWhile(/[_\w\d]/),":"==e.peek())return"variable-3";var l=e.current();return r.test(l)?"meta":o>="A"&&o<="Z"?"comment":"keyword"}return e.match(/^[^\s\u00a0>]*>?/),"atom"}function o(e,t,n){e.context={prev:e.context,indent:e.indent,col:n,type:t}}function l(e){e.indent=e.context.indent,e.context=e.context.prev}return{startState:function(){return{tokenize:s,context:null,indent:0,col:0}},token:function(e,n){if(e.sol()&&(n.context&&null==n.context.align&&(n.context.align=!1),n.indent=e.indentation()),e.eatSpace())return null;var i=n.tokenize(e,n);if("comment"!=i&&n.context&&null==n.context.align&&"pattern"!=n.context.type&&(n.context.align=!0),"("==t)o(n,")",e.column());else if("["==t)o(n,"]",e.column());else if("{"==t)o(n,"}",e.column());else if(/[\]\}\)]/.test(t)){for(;n.context&&"pattern"==n.context.type;)l(n);n.context&&t==n.context.type&&l(n)}else"."==t&&n.context&&"pattern"==n.context.type?l(n):/atom|string|variable/.test(i)&&n.context&&(/[\}\]]/.test(n.context.type)?o(n,"pattern",e.column()):"pattern"!=n.context.type||n.context.align||(n.context.align=!0,n.context.col=e.column()));return i},indent:function(e,t){var i=t&&t.charAt(0),r=e.context;if(/[\]\}]/.test(i))for(;r&&"pattern"==r.type;)r=r.prev;var a=r&&i==r.type;return r?"pattern"==r.type?r.col:r.align?r.col+(a?0:1):r.indent+(a?0:n):0},lineComment:"#"}})),e.defineMIME("text/turtle","turtle")}(n("VrN/"))},"T/QY":function(e,t,n){!function(e){"use strict";e.defineMode("go",(function(t){var n,i=t.indentUnit,r={break:!0,case:!0,chan:!0,const:!0,continue:!0,default:!0,defer:!0,else:!0,fallthrough:!0,for:!0,func:!0,go:!0,goto:!0,if:!0,import:!0,interface:!0,map:!0,package:!0,range:!0,return:!0,select:!0,struct:!0,switch:!0,type:!0,var:!0,bool:!0,byte:!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,int:!0,uint:!0,uintptr:!0,error:!0,rune:!0},a={true:!0,false:!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,delete:!0,imag:!0,len:!0,make:!0,new:!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},s=/[+\-*&^%:=<>!|\/]/;function o(e,t){var i,u=e.next();if('"'==u||"'"==u||"`"==u)return t.tokenize=(i=u,function(e,t){for(var n,r=!1,a=!1;null!=(n=e.next());){if(n==i&&!r){a=!0;break}r=!r&&"`"!=i&&"\\"==n}return(a||!r&&"`"!=i)&&(t.tokenize=o),"string"}),t.tokenize(e,t);if(/[\d\.]/.test(u))return"."==u?e.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==u?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(u))return n=u,null;if("/"==u){if(e.eat("*"))return t.tokenize=l,l(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(s.test(u))return e.eatWhile(s),"operator";e.eatWhile(/[\w\$_\xa1-\uffff]/);var c=e.current();return r.propertyIsEnumerable(c)?("case"!=c&&"default"!=c||(n="case"),"keyword"):a.propertyIsEnumerable(c)?"atom":"variable"}function l(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=o;break}i="*"==n}return"comment"}function u(e,t,n,i,r){this.indented=e,this.column=t,this.type=n,this.align=i,this.prev=r}function c(e,t,n){return e.context=new u(e.indented,t,n,null,e.context)}function h(e){if(e.context.prev){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}}return{startState:function(e){return{tokenize:null,context:new u((e||0)-i,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var i=t.context;if(e.sol()&&(null==i.align&&(i.align=!1),t.indented=e.indentation(),t.startOfLine=!0,"case"==i.type&&(i.type="}")),e.eatSpace())return null;n=null;var r=(t.tokenize||o)(e,t);return"comment"==r?r:(null==i.align&&(i.align=!0),"{"==n?c(t,e.column(),"}"):"["==n?c(t,e.column(),"]"):"("==n?c(t,e.column(),")"):"case"==n?i.type="case":"}"==n&&"}"==i.type?h(t):n==i.type&&h(t),t.startOfLine=!1,r)},indent:function(t,n){if(t.tokenize!=o&&null!=t.tokenize)return e.Pass;var r=t.context,a=n&&n.charAt(0);if("case"==r.type&&/^(?:case|default)\b/.test(n))return t.context.type="}",r.indented;var s=a==r.type;return r.align?r.column+(s?0:1):r.indented+(s?0:i)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}})),e.defineMIME("text/x-go","go")}(n("VrN/"))},VlxX:function(e,t,n){"use strict";n.r(t),t.default=".ngx-gallery {\n    display: inline-block;\n}\n\n/* image preview */\n\nngx-gallery ::ng-deep .ngx-gallery-image-wrapper {\n    background-color: #e7e7e7;\n}\n\n/* arrows */\n\nngx-gallery ::ng-deep .ngx-gallery-arrow {\n    color: #676767;\n}\n\nngx-gallery ::ng-deep .ngx-gallery-arrow.ngx-gallery-disabled {\n    opacity: 0.3;\n}\n\n/* thumbnails */\n\nngx-gallery ::ng-deep .ngx-gallery-thumbnail {\n    opacity: 0.3;\n}\n\nngx-gallery ::ng-deep .ngx-gallery-thumbnail.ngx-gallery-active,\nngx-gallery ::ng-deep .ngx-gallery-thumbnail:hover {\n    opacity: 1;\n}\n"},X5DC:function(e,t,n){"use strict";n.r(t),t.default=""},YouN:function(e,t,n){"use strict";n.r(t),t.default='<ngb-accordion activeIds="awg-accolade-view">\n    <ngb-panel id="awg-accolade-view">\n        <ng-template ngbPanelHeader>\n            <div class="d-flex align-items-center justify-content-between">\n                <button ngbPanelToggle class="btn btn-link text-left">Edierter Notentext</button>\n                <button type="button" class="btn btn-sm btn-outline-info ml-2" (click)="openModal(\'hintEditionDetail\')">\n                    Hinweise zur Nutzung\n                </button>\n            </div>\n        </ng-template>\n        <ng-template ngbPanelContent>\n            \x3c!-- accolade control --\x3e\n            <awg-edition-svg-sheet-nav\n                *ngIf="svgSheetsData && selectedSvgSheet"\n                [svgSheetsData]="svgSheetsData"\n                [selectedSvgSheet]="selectedSvgSheet"\n                (selectSvgSheetRequest)="selectSvgSheet($event)"\n            >\n            </awg-edition-svg-sheet-nav>\n\n            \x3c!-- svg panel --\x3e\n            <awg-edition-svg-sheet\n                *ngIf="svgSheetsData && selectedSvgSheet"\n                [svgSheetsData]="svgSheetsData"\n                [selectedSvgSheet]="selectedSvgSheet"\n                [selectedOverlay]="selectedOverlay"\n                (selectSvgSheetRequest)="selectSvgSheet($event)"\n                (selectOverlayRequest)="selectOverlay($event)"\n            >\n            </awg-edition-svg-sheet>\n\n            \x3c!-- table for TkA --\x3e\n            <div class="panel-footer" *ngIf="showTkA && selectedTextcriticalComments">\n                <h5 class="mt-4">\n                    Textkritischer Kommentar ({{ selectedOverlay.typeLabel }} {{ selectedOverlay.id }}):\n                </h5>\n                <awg-edition-tka-table\n                    [textcriticalComments]="selectedTextcriticalComments"\n                    (openModalRequest)="openModal($event)"\n                    (selectSvgSheetRequest)="selectSvgSheet($event)"\n                >\n                </awg-edition-tka-table>\n            </div>\n        </ng-template>\n    </ngb-panel>\n</ngb-accordion>\n'},ZUwu:function(e,t,n){"use strict";n.r(t),t.default='<div class="para">\n    <table class="table table-hover table-condensed">\n        <thead>\n            <tr>\n                <th style="width:10%; white-space: nowrap">Takt</th>\n                <th style="width:8%">System</th>\n                <th style="width:15%; white-space: nowrap;">Ort im Takt</th>\n                <th style="width:auto">Kommentar</th>\n            </tr>\n        </thead>\n        <tbody *ngIf="textcriticalComments">\n            <tr *ngFor="let textcriticalComment of textcriticalComments">\n                <td><span [compile-html]="textcriticalComment.measure" [compile-html-ref]="ref"></span></td>\n                <td [innerHTML]="textcriticalComment.system"></td>\n                <td [innerHTML]="textcriticalComment.position"></td>\n                <td><span [compile-html]="textcriticalComment.comment" [compile-html-ref]="ref"></span></td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n'},aRJb:function(e,t,n){"use strict";n.r(t),t.default=""},bIgJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],r="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z";t.definition={prefix:"fas",iconName:"square",icon:[448,512,i,"f0c8",r]},t.faSquare=t.definition,t.prefix="fas",t.iconName="square",t.width=448,t.height=512,t.ligatures=i,t.unicode="f0c8",t.svgPathData=r},bj45:function(e,t,n){"use strict";n.r(t),t.default="<p>edition-series works!</p>\n\n<router-outlet></router-outlet>\n"},dqwC:function(e,t,n){"use strict";n.r(t),t.default=""},fn2g:function(e,t,n){"use strict";n.r(t),t.default="\x3c!--\n<p>edition-section works!</p>\n--\x3e\n\n<router-outlet></router-outlet>\n"},fxLE:function(e,t,n){"use strict";n.r(t),t.default="/* Nodes */\n:host ::ng-deep .node {\n    stroke: #fff;\n    fill: #ddd;\n    stroke-width: 1.5px;\n}\n:host ::ng-deep .blank {\n    stroke: #fff;\n    fill: #000 !important;\n    stroke-width: 1.5px;\n}\n:host ::ng-deep .blank.instance {\n    stroke: #fff;\n    fill: #000;\n    stroke-width: 1.5px;\n}\n:host ::ng-deep .class {\n    stroke: #fff;\n    fill: rgb(158, 0, 0);\n    stroke-width: 1.5px;\n}\n:host ::ng-deep .instance {\n    stroke: #fff;\n    fill: rgb(32, 178, 170);\n    stroke-width: 1.5px;\n}\n:host ::ng-deep .instance-space {\n    stroke: #fff;\n    fill: rgb(0, 191, 255);\n    stroke-width: 1.5px;\n}\n:host ::ng-deep .instance-spaceType {\n    stroke: #fff;\n    fill: rgb(0, 0, 139);\n    stroke-width: 1.5px;\n}\n:host ::ng-deep .link {\n    fill: none;\n    stroke: #999;\n    stroke-opacity: 0.6;\n    stroke-width: 1px;\n}\n:host ::ng-deep marker {\n    stroke: #999;\n    fill: rgba(124, 240, 10, 0);\n}\n:host ::ng-deep .node-text {\n    font: 15px Roboto;\n    fill: black;\n}\n:host ::ng-deep .link-text {\n    font: 13px Roboto;\n    fill: grey;\n}\n#svg-wrapper {\n    position: relative;\n    width: 100%;\n}\n#svg-wrapper > .icon-bar {\n    position: absolute;\n    width: 100%;\n    z-index: 10;\n}\n.svg-panel-wrapper {\n    position: inherit;\n    height: 100%;\n}\n"},hjB0:function(e,t,n){"use strict";n.r(t),t.default=""},hyNt:function(e,t,n){"use strict";n.r(t),t.default=""},iRdu:function(e,t,n){"use strict";n.r(t),t.default='<awg-router-link-button-group\n    *ngIf="editionRouterLinkButtons"\n    [routerLinkButtons]="editionRouterLinkButtons"\n    [queryParamsHandling]="\'\'"\n>\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n'},iUmA:function(e,t,n){"use strict";n.r(t),t.default=""},kDpQ:function(e,t,n){"use strict";n.r(t),t.default=""},o98y:function(e,t,n){"use strict";n.r(t),t.default=""},oSKf:function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- embedded svg: EditionSvgSheet Overview --\x3e\n<div class="container-fluid svgGrid" *ngIf="folioSvgDataArray">\n    <div class="row svgRow">\n        <div\n            class="col-sm-6 col-lg-{{ 12 / folioSvgDataArray?.length }} svgCol"\n            *ngFor="let folioSvg of folioSvgDataArray"\n        >\n            <svg id="folio-{{ folioSvg.sheet.folioId }}"></svg>\n        </div>\n    </div>\n</div>\n'},osP3:function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- content: edition graph --\x3e\n<div>\n    \x3c!-- modal --\x3e\n    <awg-modal #modal></awg-modal>\n\n    \x3c!-- graph --\x3e\n    <div *ngIf="editionGraphData$ | async as editionGraphData; else error">\n        <div *ngFor="let graph of editionGraphData.graph">\n            \x3c!-- graph description --\x3e\n            <ng-container *ngIf="graph.description">\n                <p>\n                    So weit vorhanden, pr\xe4sentiert die vorliegende Ansicht Graph-Visualisierungen des ausgew\xe4hlten\n                    Editionsbereichs: Der <i>statische Graph</i> vermittelt dabei einen von den jeweiligen Editoren\n                    fixierten \xdcberblick editionsrelevanter Zusammenh\xe4nge und Abh\xe4ngigkeiten, der\n                    <i>dynamische Graph</i> bietet zus\xe4tzlich einen interaktiven Zugang zu dem zugrundeliegenden\n                    Datenbestand.\n                    <span class="text-danger"\n                        >Diese Funktionalit\xe4t ist noch nicht f\xfcr alle Skizzenbestandteile verf\xfcgbar, wird aber\n                        sukzessive erg\xe4nzt.</span\n                    >\n                </p>\n                <p\n                    *ngFor="let description of graph.description"\n                    [compile-html]="description"\n                    [compile-html-ref]="ref"\n                ></p>\n            </ng-container>\n\n            \x3c!-- dynamic graph --\x3e\n            <ng-container *ngIf="graph.rdfData && graph.rdfData.triples && graph.rdfData.queryList">\n                <h4>\n                    Dynamischer Graph\n                    <button\n                        type="button"\n                        class="btn btn-sm btn-outline-info ml-2"\n                        (click)="modal.open(\'hintEditionGraph\')"\n                    >\n                        Hinweise zur Nutzung\n                    </button>\n                </h4>\n                <p>\n                    Diese interaktive Visualisierung basiert auf Mads Holten\'s\n                    <a href="https://github.com/MadsHolten/sparql-visualizer" target="_blank" rel="noreferrer noopener"\n                        >SPARQL Visualizer</a\n                    >. Sie modelliert den aktuellen Skizzenkomplex in Form eines\n                    <a href="https://www.w3.org/RDF/" target="_blank" rel="noopener noreferrer">RDF</a>-Graphen. Die\n                    zugrundeliegenden RDF-Daten sind unter dem Punkt <i>RDF Triples</i> einsehbar und lokal editierbar.\n                    Eine Filterung und Eingrenzung dieser RDF-Daten kann mithilfe der Abfragesprache\n                    <a href="https://www.w3.org/TR/sparql11-query/" target="_blank" rel="noreferrer noopener">SPARQL</a>\n                    unter dem Punkt <i>SPARQL Abfrage</i> vorgenommen werden; in der Voreinstellung werden hierbei alle\n                    vorhandenen Triples abgefragt.\n                </p>\n                <awg-graph-visualizer [graphRDFInputData]="graph.rdfData"></awg-graph-visualizer>\n            </ng-container>\n\n            \x3c!-- static image --\x3e\n            <ng-container *ngIf="graph.staticImage && graph.staticImage !== \'\'">\n                <h4>Statischer Graph</h4>\n                <div [compile-html]="graph.staticImage" [compile-html-ref]="ref"></div>\n            </ng-container>\n        </div>\n    </div>\n\n    \x3c!-- error message --\x3e\n    <ng-template #error>\n        <div class="errorMessage" *ngIf="errorObject">\n            <div class="col-12 text-center">\n                <div class="alert alert-danger">\n                    {{ errorObject }}\n                </div>\n            </div>\n        </div>\n    </ng-template>\n</div>\n'},rAo6:function(e,t,n){"use strict";n.r(t),t.default=""},smF7:function(e,t,n){"use strict";n.r(t),t.default='<div id="svg-wrapper" class="svg-panel-wrapper" [ngStyle]="{ \'height.px\': height }" #graph>\n    <div class="icon-bar" fxLayout="row" [ngStyle]="{ top: \'0px\' }">\n        \x3c!-- Limit --\x3e\n        <div class="btn-group float-right" *ngIf="queryResultTriples">\n            <button type="button" class="btn btn-sm btn-outline-info" disabled aria-disabled="true">\n                <span *ngIf="limit < queryResultTriples.length">{{ limit }} von </span\n                >{{ queryResultTriples.length }} Triples\n            </button>\n            <div\n                class="btn-group"\n                ngbDropdown\n                container="body"\n                role="group"\n                aria-label="Button group with nested dropdown for node limit"\n            >\n                <button\n                    class="btn btn-sm btn-info dropdown-toggle-split"\n                    ngbDropdownToggle\n                    [disabled]="queryResultTriples.length === 0"\n                ></button>\n                <div class="dropdown-menu" ngbDropdownMenu>\n                    <ng-container *ngFor="let limitValue of limitValues">\n                        <button\n                            *ngIf="queryResultTriples.length > limitValue"\n                            class="dropdown-item"\n                            (click)="onLimitValueChange(limitValue)"\n                        >\n                            <span>{{ limitValue }}</span>\n                        </button>\n                    </ng-container>\n                    <button class="dropdown-item" (click)="onLimitValueChange(queryResultTriples.length)">\n                        <span>Kein Limit</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- <span *ngIf="message" class="message">{{message}}</span> --\x3e\n\n        \x3c!-- Spacer --\x3e\n        <span fxFlex="grow"></span>\n\n        \x3c!-- Spacer --\x3e\n        <span fxFlex="5px"></span>\n    </div>\n</div>\n'},ukwC:function(e,t,n){"use strict";n.r(t),t.default=""},vY9l:function(e,t,n){"use strict";n.r(t),t.default="<p>edition-type works!</p>\n\n<router-outlet></router-outlet>\n"},vuFq:function(e,t,n){"use strict";n.r(t),t.default='<ngb-accordion id="sourcesAcc" activeIds="sourcesPanel">\n    <ngb-panel id="sourcesPanel" title="I. Quellen">\n        <ng-template ngbPanelContent>\n            <ngb-accordion id="sourcesPanelAcc" activeIds="sourceList, sourceDesc, sourceEvaluation">\n                \x3c!-- source list --\x3e\n                <ngb-panel id="sourceList" title="1. Quellen\xfcbersicht">\n                    <ng-template ngbPanelContent>\n                        <awg-source-list\n                            *ngIf="sourceListData"\n                            [sourceListData]="sourceListData"\n                            (openModalRequest)="openModal($event)"\n                        >\n                        </awg-source-list>\n                    </ng-template>\n                </ngb-panel>\n\n                \x3c!-- source description --\x3e\n                <ngb-panel id="sourceDesc" title="2. Quellenbeschreibung">\n                    <ng-template ngbPanelContent>\n                        <awg-source-description\n                            *ngIf="sourceDescriptionListData"\n                            [sourceDescriptionListData]="sourceDescriptionListData"\n                            (openModalRequest)="openModal($event)"\n                            (selectSvgSheetRequest)="selectSvgSheet($event)"\n                        >\n                        </awg-source-description>\n                    </ng-template>\n                </ngb-panel>\n\n                \x3c!-- source evaluation --\x3e\n                <ngb-panel id="sourceEvaluation" title="3. Quellenbewertung">\n                    <ng-template ngbPanelContent>\n                        <awg-source-evaluation\n                            *ngIf="sourceEvaluationListData"\n                            [sourceEvaluationListData]="sourceEvaluationListData"\n                            (navigateToReportFragmentRequest)="navigateToReportFragment($event)"\n                            (openModalRequest)="openModal($event)"\n                            (selectSvgSheetRequest)="selectSvgSheet($event)"\n                        >\n                        </awg-source-evaluation>\n                    </ng-template>\n                </ngb-panel>\n            </ngb-accordion>\n            \x3c!-- END inner accordion --\x3e\n        </ng-template>\n    </ngb-panel>\n</ngb-accordion>\n\x3c!-- END outer accordion --\x3e\n'},"w/8r":function(e,t,n){"use strict";n.r(t),t.default=""},w9nx:function(e,t,n){"use strict";n.r(t),t.default='<ngb-accordion #sketchAcc="ngbAccordion" id="sketchAcc" *ngIf="textcriticsData">\n    <ngb-panel *ngFor="let textcritic of textcriticsData.textcritics" [id]="textcritic.id">\n        <ng-template ngbPanelHeader>\n            <div class="d-flex align-items-center justify-content-between">\n                <button ngbPanelToggle class="btn btn-link text-left">{{ textcritic.id }}</button>\n                <button type="button" class="btn btn-sm btn-outline-info ml-2" (click)="selectSvgSheet(textcritic.id)">\n                    Zur Transkription\n                </button>\n            </div>\n        </ng-template>\n        <ng-template ngbPanelContent>\n            <div *ngIf="isNotEmptyArray(textcritic.description)">\n                <p class="caps">Skizzenkommentar:</p>\n                <p\n                    *ngFor="let description of textcritic.description"\n                    [compile-html]="description"\n                    [compile-html-ref]="ref"\n                ></p>\n            </div>\n            <div *ngIf="isNotEmptyArray(textcritic.comments)">\n                <p class="caps">Textkritischer Kommentar:</p>\n                <awg-edition-tka-table\n                    [textcriticalComments]="textcritic.comments"\n                    (openModalRequest)="openModal($event)"\n                    (selectSvgSheetRequest)="selectSvgSheet($event)"\n                >\n                </awg-edition-tka-table>\n            </div>\n        </ng-template>\n    </ngb-panel>\n</ngb-accordion>\n'},wgPI:function(e,t,n){"use strict";n.r(t),t.default=""},xWZ6:function(e,t,n){"use strict";n.r(t),t.default="/*\nsee also https://stackoverflow.com/questions/114543/how-to-horizontally-center-a-div-in-another-div\n */\n.svgGrid {\n    margin-bottom: 2em;\n}\n.svgRow {\n    padding-top: 1em;\n    width: inherit;\n    text-align: center;\n    box-shadow: 5px 5px 6px #cccccc;\n    border: 1px solid #eeeeee;\n}\n.svgCol {\n    display: inline-block;\n}\n"},zk7Q:function(e,t,n){"use strict";n.r(t),t.default='<div>\n    \x3c!-- *********************** --\x3e\n    \x3c!--       OPUS 12           --\x3e\n    \x3c!-- *********************** --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/1 --\x3e\n    <div class="svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet1)">\n        <p class="small text-muted">\n            [Der edierte Notentext von <strong>Aa:SKI/1</strong> erscheint im Zusammenhang der vollst\xe4ndigen Edition der\n            <em>Vier Lieder</em> op. 12 in <strong>AWG I/5</strong>.]\n        </p>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/1 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/2 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet2)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- systems --\x3e\n            <svg:g class="edition-svg-systems">\n                \x3c!-- system 14 --\x3e\n                <a (click)="selectOverlay(\'system\', \'14\')" [class.active]="isSelectedOverlay(\'system\', \'14\')">\n                    <rect class="edition-svg-system" x="20" y="205" width="950" height="60" />\n                </a>\n                \x3c!-- system 13 --\x3e\n                <a (click)="selectOverlay(\'system\', \'13\')" [class.active]="isSelectedOverlay(\'system\', \'13\')">\n                    <rect class="edition-svg-system" x="20" y="275" width="950" height="60" />\n                </a>\n                \x3c!-- system 12 --\x3e\n                <a (click)="selectOverlay(\'system\', \'12\')" [class.active]="isSelectedOverlay(\'system\', \'12\')">\n                    <rect class="edition-svg-system" x="20" y="345" width="950" height="60" />\n                </a>\n            </svg:g>\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'10\')" [class.active]="isSelectedOverlay(\'measure\', \'10\')">\n                    <rect class="edition-svg-measure" x="300" y="125" width="180" height="345" />\n                </a>\n                \x3c!-- measure 11 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'11\')" [class.active]="isSelectedOverlay(\'measure\', \'11\')">\n                    <rect class="edition-svg-measure" x="480" y="125" width="180" height="345" />\n                </a>\n                \x3c!-- measure 12 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'12\')" [class.active]="isSelectedOverlay(\'measure\', \'12\')">\n                    <rect class="edition-svg-measure" x="660" y="125" width="180" height="345" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S12/o1 --\x3e\n                <a (click)="selectOverlay(\'item\', \'0\')" [class.active]="isSelectedOverlay(\'item\', \'0\')">\n                    <rect class="edition-svg-item" x="330" y="350" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T10/S12/o2 --\x3e\n                <a (click)="selectOverlay(\'item\', \'1\')" [class.active]="isSelectedOverlay(\'item\', \'1\')">\n                    <rect class="edition-svg-item" x="380" y="350" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T11/S14/o(1/4) --\x3e\n                <a (click)="selectOverlay(\'item\', \'2\')" [class.active]="isSelectedOverlay(\'item\', \'2\')">\n                    <rect class="edition-svg-item" x="480" y="200" rx="5" ry="5" width="125" height="80" />\n                </a>\n                \x3c!-- T12/S13/oO --\x3e\n                <a (click)="selectOverlay(\'item\', \'3\')" [class.active]="isSelectedOverlay(\'item\', \'3\')">\n                    <rect class="edition-svg-item" x="660" y="270" rx="5" ry="5" width="125" height="80" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/3 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet3)">\n                    <rect class="edition-svg-linkbox" x="90" y="345" width="182" height="125" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/2 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/3 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet3)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 608"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'10\')" [class.active]="isSelectedOverlay(\'measure\', \'10\')">\n                    <rect class="edition-svg-measure" x="80" y="110" width="282" height="400" />\n                </a>\n                \x3c!-- measure 11 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'11\')" [class.active]="isSelectedOverlay(\'measure\', \'11\')">\n                    <rect class="edition-svg-measure" x="362" y="110" width="260" height="400" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S9/o(2/4) --\x3e\n                <a (click)="selectOverlay(\'item\', \'0\')" [class.active]="isSelectedOverlay(\'item\', \'0\')">\n                    <rect class="edition-svg-item" x="225" y="420" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T11/S10/o(1.-2.Note) --\x3e\n                <a (click)="selectOverlay(\'item\', \'1\')" [class.active]="isSelectedOverlay(\'item\', \'1\')">\n                    <rect class="edition-svg-item" x="365" y="340" rx="5" ry="5" width="105" height="70" />\n                </a>\n                \x3c!-- T12/S10/o(nach 2/4) --\x3e\n                <a (click)="selectOverlay(\'item\', \'2\')" [class.active]="isSelectedOverlay(\'item\', \'2\')">\n                    <rect class="edition-svg-item" x="510" y="340" rx="5" ry="5" width="100" height="70" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/2 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet2)">\n                    <rect class="edition-svg-linkbox" x="458" y="111" width="165" height="162" />\n                </a>\n                \x3c!-- rect SkI/5 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet5)">\n                    <rect class="edition-svg-linkbox" x="620" y="420" width="165" height="160" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/3 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/4 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet4)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'10\')" [class.active]="isSelectedOverlay(\'measure\', \'10\')">\n                    <rect class="edition-svg-measure" x="150" y="115" width="268" height="390" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S6/oO --\x3e\n                <a (click)="selectOverlay(\'item\', \'0\')" [class.active]="isSelectedOverlay(\'item\', \'0\')">\n                    <rect class="edition-svg-item" x="283" y="270" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T10/S5/o(3.Note) --\x3e\n                <a (click)="selectOverlay(\'item\', \'1\')" [class.active]="isSelectedOverlay(\'item\', \'1\')">\n                    <rect class="edition-svg-item" x="283" y="350" rx="5" ry="5" width="40" height="70" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/5 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet5)">\n                    <rect class="edition-svg-linkbox" x="577" y="152" width="222" height="180" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/4 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/5 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet5)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 608"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'10\')" [class.active]="isSelectedOverlay(\'measure\', \'10\')">\n                    <rect class="edition-svg-measure" x="390" y="115" width="260" height="390" />\n                </a>\n                \x3c!-- measure 11 --\x3e\n                <a (click)="selectOverlay(\'measure\', \'11\')" [class.active]="isSelectedOverlay(\'measure\', \'11\')">\n                    <rect class="edition-svg-measure" x="650" y="115" width="200" height="390" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S9/o3/8 --\x3e\n                <a (click)="selectOverlay(\'item\', \'0\')" [class.active]="isSelectedOverlay(\'item\', \'0\')">\n                    <rect class="edition-svg-item" x="523" y="195" rx="5" ry="5" width="40" height="85" />\n                </a>\n                \x3c!-- T11/S9/o1/4 --\x3e\n                <a (click)="selectOverlay(\'item\', \'1\')" [class.active]="isSelectedOverlay(\'item\', \'1\')">\n                    <rect class="edition-svg-item" x="650" y="195" rx="5" ry="5" width="40" height="85" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/3 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet3)">\n                    <rect class="edition-svg-linkbox" x="72" y="148" width="242" height="125" />\n                </a>\n                \x3c!-- rect SkI/4 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet4)">\n                    <rect class="edition-svg-linkbox" x="72" y="345" width="245" height="205" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/5 --\x3e\n\n    \x3c!-- *********************** --\x3e\n    \x3c!--       OPUS 25           --\x3e\n    \x3c!-- *********************** --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/1 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet1)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/1 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/2 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet2)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/2 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/3 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet3)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/3 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4a --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4a)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4a --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4b --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4b)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4b --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4c --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4c)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4c --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4d --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4d)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4d --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4.1 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4_1)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4.1 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4.2 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4_2)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4.2 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4.3 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4_3)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- TODO: create overlay svg dynamically with snap from overlay data --\x3e\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4.3 --\x3e\n</div>\n'}}]);