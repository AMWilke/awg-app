<div>

    <!-- resourceDetailData header -->
    <h3>
        <img [attr.src]="resourceDetailData?.header.icon" alt="icon" /><small>&nbsp;({{ resourceDetailData?.header.type }})</small><br/>
        [{{ resourceDetailData?.header.objID }}] <span [compile-html]="resourceDetailData?.header.title" [compile-html-ref]="ref"></span>
    </h3>
    <small>[Last modified: {{resourceDetailData?.header.lastmod}} (UTC)]</small><br /><br />
    <button (click)="showDetail()">Zeige vorheriges Objekt</button>
    <button (click)="goBack()">Zur√ºck zur Suche</button>


    <!-- image objects -->
    <div align="center" class="objImage" *ngIf="resourceDetailData?.image[0]">
        <div class="facs">
            <a [href]="resourceDetailData?.image.full" target="_blank">
                <img [src]="resourceDetailData?.image.value" alt="{{ resourceDetailData?.image.label }}" />
            </a>
        </div>
        <div class="btn-group btn-group-justified">
            <a class="btn btn-default" *ngFor="let objImage of resourceDetailData?.image" (click)="showImage(objImage)">
                {{ objImage.label }}
            </a>
        </div>
    </div>

    <!-- display as table on small and larger devices -->
    <table class="table table-condensed table-hover borderless hidden-xs" style="padding:10px;">
        <tbody>
        <tr>
            <td colspan="3">
                <hr>
            </td>
        </tr>
        <!-- ### show only not empty values ### -->
        <ng-container *ngFor="let prop of resourceDetailData?.props">
            <tr *ngIf="prop.label === metaBreakLine">
                <td colspan="3">
                    <hr>
                </td>
            </tr>
            <tr id="field" *ngIf="prop.value[0]">
                <td class="bold">
                    {{ prop.label }}
                </td>
                <!-- output values -->
                <td colspan="2">
                    <p *ngFor="let value of prop.value; let i = index">
                        <span [compile-html]="prop.value[i]" [compile-html-ref]="ref"></span>
                    </p>
                </td>
            </tr>
        </ng-container>
        <tr>
            <td colspan="3">
                <hr>
            </td>
        </tr>
        <ng-container *ngIf="resourceDetailData?.incoming !== ''">
            <tr>
                <td colspan="3" class="bold">
                    <p>Objekte, die auf diesen Eintrag verweisen:</p>
                </td>
            </tr>
            <!--
            <tr class="ins" *ngFor="let ins of resourceDetailData?.incoming">
                <td colspan="3" (click)="showDetail(ins.id)">
                    <img [attr.src]="ins.restype.icon" alt="icon" /> [{{ ins.id }}] {{ ins.value }}
                </td>
            </tr>
            -->
        </ng-container>
        </tbody>
    </table>

    <!-- stack to definition list on extra small devices -->
    <dl class="dl-horizontal dl-hover visible-xs">
        <dt>
            <hr>
        </dt>
        <!-- ### show only not empty values ### -->
        <ng-container id="field" *ngFor="let prop of resourceDetailData?.props">
            <dt *ngIf="prop.label === metaBreakLine">
                    <hr>
            </dt>
            <ng-container *ngIf="prop.value[0]">
                <dt>
                    {{ prop.label }}
                </dt>
                <dd *ngFor="let value of prop.value; let i = index">
                    <p><span [compile-html]="prop.value[i]" [compile-html-ref]="ref"></span></p>
                </dd>
            </ng-container>
        </ng-container>
        <dt>
            <hr>
        </dt>
        <ng-container *ngIf="resourceDetailData?.incoming !== ''">
            <dt>
                <p>Objekte, die auf diesen Eintrag verweisen:</p>
            </dt>

            <dd class="ins" *ngFor="let ins of resourceDetailData?.incoming | mapToIterable">
                <p>{{ ins.mappedKey }} <span class="incomingNumber">{{ins.mappedValues.length}}</span></p>
            </dd>
            <!-- TODO: expandable accordion
            <dd class="ins" *ngFor="let ins of resourceDetailData?.incoming" (click)="showDetail(ins.id)">
                <p><img [attr.src]="ins.restype.icon" alt="icon" /> [{{ ins.id }}] {{ ins.value }}</p>
            </dd>
            -->
        </ng-container>
    </dl>
</div>
