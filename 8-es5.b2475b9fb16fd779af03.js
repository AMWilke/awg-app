function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/jvW":function(t,e,i){"use strict";i.r(e),e.default=""},"9wbs":function(t,e,i){"use strict";i.r(e),e.default=""},"Bh2/":function(t,e,i){"use strict";i.r(e),e.default=""},JAkG:function(t,e,i){"use strict";i.r(e),e.default='\x3c!-- content: bibliography list --\x3e\n<ul class="bibliography">\n    <li\n        *ngFor="let bibItem of bibList; trackBy: trackById"\n        [class.selected]="bibItem === selectedBibItem"\n        (click)="onItemSelect(bibItem)"\n    >\n        <span class="badge">{{ bibItem.value[0] }}</span>\n        <awg-bibliography-detail *ngIf="bibItem.obj_id === selectedBibItem.obj_id" [objId]="bibItem.obj_id">\n        </awg-bibliography-detail>\n    </li>\n</ul>\n'},TLbp:function(t,e,i){"use strict";i.r(e),e.default='<span [innerHtml]="bibEntry$ | async | bibFormat"></span>\n'},YYos:function(t,e,i){"use strict";i.r(e),e.default="<p>\n  bibliography-search works!\n</p>\n"},gxKZ:function(t,e,i){"use strict";i.r(e),e.default='\x3c!-- content: bibliography --\x3e\n<awg-bibliography-search></awg-bibliography-search>\n\n<p>Lade ... {{ (bibList$ | async)?.subjects.length }} von {{ nhits }} Eintr\xe4gen</p>\n\n<awg-bibliography-list\n    *ngIf="isBibListLoaded && (bibList$ | async) as bibList"\n    [bibList]="bibList.subjects"\n    (selectItemRequest)="onItemSelect($event)"\n>\n</awg-bibliography-list>\n'},iCE9:function(t,e,i){"use strict";i.r(e);var r=i("mrSG"),a=i("8Y7J"),n=i("PCNd"),s=function t(){_classCallCheck(this,t)};s=Object(r.a)([Object(a.n)({selector:"awg-bibliography-search",template:__importDefault(i("YYos")).default,styles:[__importDefault(i("Bh2/")).default]})],s);var l=i("W28f"),o=function(){function t(){_classCallCheck(this,t),this.selectItemRequest=new a.w,this.selectedBibItem=new l.g}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onItemSelect",value:function(t){this.selectedBibItem=t,this.selectItemRequest.emit(t)}},{key:"trackById",value:function(t){return t.obj_id}}]),t}();Object(r.a)([Object(a.F)()],o.prototype,"bibList",void 0),Object(r.a)([Object(a.R)()],o.prototype,"selectItemRequest",void 0),o=Object(r.a)([Object(a.n)({selector:"awg-bibliography-list",template:__importDefault(i("JAkG")).default,styles:[__importDefault(i("/jvW")).default]})],o);var c=function(){function t(){_classCallCheck(this,t),this.formatFieldArr=["Author","Titel_unselbst","Titel_selbst","Herausgeber","unpubliziert","Verlagsort","Publikationsdatum","Reihentitel","Seitenangabe"]}return _createClass(t,[{key:"transform",value:function(t){return t?(this.entry=t,this.formattedEntry=this.getFormatFields("edit",this.entry),this.getFormattedValues(this.formattedEntry),this.getFormatFields("output",this.formattedEntry)):null}},{key:"getFormatFields",value:function(t,e){for(var i={},r=0;r<this.formatFieldArr.length;r++)e[this.formatFieldArr[r]]&&("edit"===t?i[this.formatFieldArr[r]]=e[this.formatFieldArr[r]]:"output"===t&&(i=0===r?e[this.formatFieldArr[r]]:i+e[this.formatFieldArr[r]]));return i}},{key:"getFormattedValues",value:function(t){var e=this;return Object.keys(t).forEach((function(i){t[i]=e.getFormattedValueByKey(t,i)})),t}},{key:"getFormattedValueByKey",value:function(t,e){var i="";switch(e){case"Kurztitel":i=this.formatBibTitleShort(t[e]);break;case"Author":i=this.formatBibAuthor(t[e]);break;case"Titel_selbst":i=this.formatBibTitleIndep(t[e]);break;case"Titel_unselbst":i=this.formatBibTitleDep(t[e]);break;case"Herausgeber":i=this.formatBibEditor(t[e]);break;case"unpubliziert":i=this.formatBibUnpublished(t[e]);break;case"Verlagsort":i=this.formatBibPubPlace(t[e]);break;case"Publikationsdatum":i=this.formatBibPubDate(t[e]);break;case"Reihentitel":i=this.formatBibTitleSeries(t[e]);break;case"Seitenangabe":i=this.formatBibPages(t[e]);break;default:i=t[e]}return i}},{key:"formatBibTitleShort",value:function(t){return t?t+" | ":""}},{key:"formatBibAuthor",value:function(t){if(!t)return"";var e="";if("object"==typeof t){e+=this.splitName(t[0],"");for(var i=Object.keys(t).length,r=1;r<i;r++){var a=r===i-1?" und ":", ";e+=this.splitName(t[r],a)}}else"string"==typeof t&&(e+=this.splitName(t,""));return e+=": "}},{key:"formatBibTitleIndep",value:function(t){return t?"Zeitschriftenartikel"!==this.entry.Typ?t+", ":t:""}},{key:"formatBibTitleDep",value:function(t){return t?"\u201e"+t+"\u201c, in: ":""}},{key:"formatBibEditor",value:function(t){if(!t)return"";var e="hg. von ";if("object"==typeof t){e+=this.splitName(t[0],"");for(var i=Object.keys(t).length,r=1;r<i;r++){var a=r===i-1?" und ":", ";e+=this.splitName(t[r],a)}}else"string"==typeof t&&(e+=this.splitName(t,""));return e+=", "}},{key:"formatBibUnpublished",value:function(t){return t?t+" ":""}},{key:"formatBibPubPlace",value:function(t){var e=this.entry.Verlag?this.entry.Verlag:null;if(!t)return e&&console.log('Ort fehlt: "'+e+'" ('+this.entry.Kurztitel+")"),"";var i="";if("object"==typeof t){var r=Object.keys(t).length;if(e)if("object"==typeof e){if(Object.keys(e).length===r)for(var a=0;a<r;a++)a===r-1&&(i+="und "),i+=t[a]+": "+e[a]+", "}else for(var n=0;n<r;n++)i+=n===r-1?t[n]+": "+e+", ":t[n]+", ";else{for(var s=0;s<r;s++)i+=t[s]+", ";this.entry.unpubliziert||console.log('Verlag fehlt: "'+i+'" ('+this.entry.Kurztitel+")")}}else if(e)if(i+=t+": ","object"==typeof e)for(var l=Object.keys(e).length,o=0;o<l;o++)i+=e[o]+", ";else i+=e+", ";else this.entry.unpubliziert||console.log('Verlag fehlt: "'+i+'" ('+this.entry.Kurztitel+")"),i+=t+", ";return i}},{key:"formatBibPublisher",value:function(t){return""}},{key:"formatBibPubDate",value:function(t){return"Zeitschriftenartikel"===this.entry.Typ?" ("+t+")":" "+t}},{key:"formatBibTitleSeries",value:function(t){return t?" ("+t+")":""}},{key:"formatBibPages",value:function(t){if(!t)return"";var e="";if("object"==typeof t)for(var i=Object.keys(t).length,r=0;r<i;r++)e+=(0===r?", S. ":", ")+t[r];else"string"==typeof t&&t&&(e=", S. "+t);return e}},{key:"splitName",value:function(t,e){var i=[];return t.match(",")?((i=t.split(", ")).splice(1,0,i.splice(0,1)[0]),e+i[0]+" "+i[1]):e+t}}]),t}();c=Object(r.a)([Object(a.V)({name:"bibFormat"})],c);var u=i("iInd"),b=i("RJwY"),f=i("vkgz"),h=function(){function t(e){_classCallCheck(this,t),this.bibliographyService=e,this.isBibListLoaded=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.getBibList()}},{key:"getBibList",value:function(){var t=this;this.bibList$=this.bibliographyService.getBibliographyList().pipe(Object(f.a)((function(e){t.nhits=e.nhits,t.isBibListLoaded=!0})))}},{key:"onItemSelect",value:function(t){this.selectedBibItem=t}}]),t}();h.ctorParameters=function(){return[{type:b.a}]},h=Object(r.a)([Object(a.n)({selector:"awg-bibliography",template:__importDefault(i("gxKZ")).default,styles:[__importDefault(i("royv")).default]})],h);var p=i("lJxs"),y=i("dJ3e"),m=function(){function t(e,i){_classCallCheck(this,t),this.bibliographyService=e,this.conversionService=i}return _createClass(t,[{key:"ngOnInit",value:function(){this.getBibEntry(this.objId)}},{key:"getBibEntry",value:function(t){var e=this;this.bibEntry$=this.bibliographyService.getBibliographyItemDetail(t).pipe(Object(p.a)((function(t){return e.conversionService.convertObjectProperties(t)})))}}]),t}();m.ctorParameters=function(){return[{type:b.a},{type:y.b}]},Object(r.a)([Object(a.F)()],m.prototype,"objId",void 0);var d=[{path:"",component:h,children:[{path:"detail/:id",component:m=Object(r.a)([Object(a.n)({selector:"awg-bibliography-detail",template:__importDefault(i("TLbp")).default,styles:[__importDefault(i("9wbs")).default]})],m)}]}],g=[h,m],v=function t(){_classCallCheck(this,t)};v=Object(r.a)([Object(a.K)({imports:[u.e.forChild(d)],exports:[u.e]})],v),i.d(e,"BibliographyModule",(function(){return k}));var k=function t(){_classCallCheck(this,t)};k=Object(r.a)([Object(a.K)({imports:[n.a,v],declarations:[g,s,o,c],exports:[g,s,o,c]})],k)},royv:function(t,e,i){"use strict";i.r(e),e.default=""}}]);