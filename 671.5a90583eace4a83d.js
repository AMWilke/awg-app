"use strict";(self.webpackChunkawg_app=self.webpackChunkawg_app||[]).push([[671],{9671:(n,S,t)=>{t.r(S),t.d(S,{EditionViewModule:()=>$});var l=t(655),h=t(5e3),W=t(8749),c=t(98),f=t(1238),g=t(3267),s=t(4678),I=t(6900);let i=class{constructor(u,y,C){this.editionService=u,this.route=y,this.router=C,this.editionViewTitle="Beispieledition ausgew\xe4hlter Skizzen",this.editionViewId="awg-edition-view"}ngOnInit(){this.routeToSidenav(),this.getEditionWorkFromRoute()}getEditionWorkFromRoute(){this.route.paramMap.subscribe(u=>{const y=u.get("compositionId")?u.get("compositionId"):"";this.editionService.updateEditionWork(s.yE[y.toUpperCase()]),this.editionWork$=this.editionService.getEditionWork()})}routeToSidenav(){this.router.navigate([{outlets:{side:"editionInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}};i.ctorParameters=()=>[{type:I.O},{type:c.gz},{type:c.F0}],i=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-view",template:f,styles:[g]})],i);var p=t(6223),R=t(8664),E=t(8929),m=t(7625),v=t(849);let e=class{constructor(u){this.editionService=u,this._destroy$=new E.xQ}ngOnInit(){this.getEditionWork()}getEditionWork(){this.editionService.getEditionWork().pipe((0,m.R)(this._destroy$)).subscribe(u=>{this.editionWork=u,this.setButtons()})}setButtons(){this.editionRouterLinkButtons=[new v.v(this.editionWork.baseRoute,this.editionWork.introRoute.route,s.w8.EDITION_INTRO.short,!1),new v.v(this.editionWork.baseRoute,this.editionWork.detailRoute.route,s.w8.EDITION_DETAIL.short,!1),new v.v(this.editionWork.baseRoute,this.editionWork.reportRoute.route,s.w8.EDITION_REPORT.short,!1),new v.v(this.editionWork.baseRoute,this.editionWork.graphRoute.route,s.w8.EDITION_GRAPH.short,!1)]}ngOnDestroy(){this._destroy$.next(!0),this._destroy$.unsubscribe()}};e.ctorParameters=()=>[{type:I.O}],e=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-overview",template:p,styles:[R]})],e);var o=t(6208),d=t(291);let a=class{constructor(){}ngOnInit(){}};a.ctorParameters=()=>[],a=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-section",template:o,styles:[d]})],a);var D=t(7442),P=t(4047);let w=class{constructor(){}ngOnInit(){}};w.ctorParameters=()=>[],w=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-series",template:D,styles:[P]})],w);var L=t(4807),k=t(7846);let T=class{constructor(){}ngOnInit(){}};T.ctorParameters=()=>[],T=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-type",template:L,styles:[k]})],T);const N=[{path:"",component:a,children:[{path:"composition/:compositionId",component:i,children:[{path:"",component:e,children:[{path:s.w8.EDITION_INTRO.route,loadChildren:()=>t.e(169).then(t.bind(t,5169)).then(r=>r.EditionIntroModule)},{path:s.w8.EDITION_DETAIL.route,loadChildren:()=>Promise.all([t.e(592),t.e(30)]).then(t.bind(t,8030)).then(r=>r.EditionDetailModule)},{path:s.w8.EDITION_REPORT.route,loadChildren:()=>Promise.all([t.e(592),t.e(254)]).then(t.bind(t,3254)).then(r=>r.EditionReportModule)},{path:s.w8.EDITION_GRAPH.route,loadChildren:()=>Promise.all([t.e(266),t.e(592),t.e(695)]).then(t.bind(t,2695)).then(r=>r.EditionGraphModule)},{path:"",redirectTo:"/"+s.w8.EDITION_INTRO.route,pathMatch:"full"}]}]}]}],A=[i,e,a,w,T];let O=class{};O=(0,l.gn)([(0,h.LVF)({imports:[c.Bz.forChild(N)],exports:[c.Bz]})],O);let $=class{};$=(0,l.gn)([(0,h.LVF)({imports:[W.m,O],declarations:[A]})],$)},6900:(n,S,t)=>{t.d(S,{K:()=>p,O:()=>m});var l=t(655),h=t(5e3),W=t(520),c=t(567),f=t(1086),g=t(7314),s=t(2986),I=t(7221),i=t(4678);let p=class{constructor(e){this.http=e,this._assetWorkPath=""}getEditionDetailData(e){this._setAssetWorkPath(e);const o=this._getFolioConvoluteData(),d=this._getSvgSheetsData(),a=this._getTextcriticsListData();return(0,c.D)([o,d,a]).pipe((0,g.d)([new i.yL,new i.vU,new i.Dt]),(0,s.q)(1))}getEditionGraphData(e){return this._setAssetWorkPath(e),this._getGraphData().pipe((0,g.d)(new i.nu),(0,s.q)(1))}getEditionIntroData(e){return this._setAssetWorkPath(e),this._getIntroData().pipe((0,g.d)(new i.Jb),(0,s.q)(1))}getEditionReportData(e){this._setAssetWorkPath(e);const o=this._getSourceListData(),d=this._getSourceDescriptionListData(),a=this._getSourceEvaluationListData(),D=this._getTextcriticsListData();return(0,c.D)([o,d,a,D]).pipe((0,g.d)([new i.LQ,new i.DD,new i.DO,new i.Dt]),(0,s.q)(1))}_setAssetWorkPath(e){const o=e.series.route+e.section.route+e.work.route;this._assetWorkPath=i.w8.EDITION_ASSETS.baseRoute+o}_getFolioConvoluteData(){const e=i.w8.EDITION_ASSETS.folioConvoluteFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getGraphData(){const e=i.w8.EDITION_ASSETS.graphFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getIntroData(){const e=i.w8.EDITION_ASSETS.introFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getSourceListData(){const e=i.w8.EDITION_ASSETS.sourceListFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getSourceDescriptionListData(){const e=i.w8.EDITION_ASSETS.sourceDescriptionListFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getSourceEvaluationListData(){const e=i.w8.EDITION_ASSETS.sourceEvaluationListFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getSvgSheetsData(){const e=i.w8.EDITION_ASSETS.svgSheetsFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getTextcriticsListData(){const e=i.w8.EDITION_ASSETS.textcriticsFile,o=`${this._assetWorkPath}/${e}`;return this._getJsonData(o)}_getJsonData(e){return this.http.get(e).pipe((0,I.K)(this._handleError("_getJsonData",[])))}_handleError(e,o){return d=>(this._logError(`${e} failed: ${d.message}`),(0,f.of)(o))}_logError(e){console.error(e)}};p.ctorParameters=()=>[{type:W.eN}],p=(0,l.gn)([(0,h.GSi)({providedIn:"root"})],p);var E,R=t(6831);let m=E=class{constructor(){this._bufferSize=1,this._editionWorkSubject=new R.t(this._bufferSize),this._editionWorkStream$=this._editionWorkSubject.asObservable()}static _filterTextcriticalComments(e,o,d){const a=e.measure.replace("[","").replace("]",""),D=e.system.replace("[","").replace("]","");switch(o.type){case i.wN.measure:return a===o.id;case i.wN.system:return D===o.id;case i.wN.item:return d===+o.id}}getTextcriticalComments(e,o){if(e&&o)return e.filter((d,a)=>E._filterTextcriticalComments(d,o,a))}getEditionWork(){return this._editionWorkStream$}updateEditionWork(e){this._editionWorkSubject.next(e)}clearEditionWork(){this._editionWorkSubject.next(null)}};m=E=(0,l.gn)([(0,h.GSi)({providedIn:"root"})],m)},8664:n=>{n.exports=""},291:n=>{n.exports=""},4047:n=>{n.exports=""},7846:n=>{n.exports=""},3267:n=>{n.exports=""},6223:n=>{n.exports='<awg-router-link-button-group\n    *ngIf="editionRouterLinkButtons"\n    [routerLinkButtons]="editionRouterLinkButtons"\n    [queryParamsHandling]="\'\'">\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n'},6208:n=>{n.exports="\x3c!--\n<p>edition-section works!</p>\n--\x3e\n\n<router-outlet></router-outlet>\n"},7442:n=>{n.exports="<p>edition-series works!</p>\n\n<router-outlet></router-outlet>\n"},4807:n=>{n.exports="<p>edition-type works!</p>\n\n<router-outlet></router-outlet>\n"},1238:n=>{n.exports='\x3c!-- content: edition-view --\x3e\n\n\x3c!-- heading --\x3e\n<awg-heading [title]="editionViewTitle" [id]="editionViewId"></awg-heading>\n\n<div class="awg-edition-work" *ngIf="editionWork$ | async as editionWork">\n    \x3c!-- TODO: refactor this as selectable breadcrumb --\x3e\n    <h6 class="awg-edition-info-breadcrumb">\n        {{ editionWork.edition.short }} / {{ editionWork.series.full }} / {{ editionWork.section.full }}\n    </h6>\n    <h3 class="awg-edition-info-header">\n        <em class="awg-edition-info-header-title">{{ editionWork.titleStatement.title }}</em\n        >&nbsp;<span class="awg-edition-info-header-catalogue">{{ editionWork.work.short }}</span>\n    </h3>\n    \x3c!-- declamation --\x3e\n    <div class="awg-edition-responsibility mt-3">\n        <p>\n            Ediert von\n            <span class="editor" *ngFor="let editor of editionWork.responsibilityStatement.editors; last as isLast">\n                <a href="{{ editor.homepage }}">{{ editor.name }}</a\n                ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n            </span>\n            <br />\n            Versionsdatum: <span class="version">{{ editionWork.responsibilityStatement.lastModified }}</span>\n        </p>\n    </div>\n</div>\n\n\x3c!-- edition routes --\x3e\n<router-outlet></router-outlet>\n'}}]);