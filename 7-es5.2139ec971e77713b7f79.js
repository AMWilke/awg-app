!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7Yty":function(t,s,i){"use strict";i.r(s),i.d(s,"EditionDetailModule",(function(){return C}));var a=i("mrSG"),l=i("fXoL"),o=i("PCNd"),c=i("6aU4"),v=function(){function t(){e(this,t),this.itemsOffsetCorrection=4}return n(t,[{key:"getFolioSvgData",value:function(e,t){var n=new c.f(e,t,this.itemsOffsetCorrection);return new c.h(n)}},{key:"addViewBoxToSnapSvgCanvas",value:function(e,t){e.attr({viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight,version:"1.1",xmlns:"https://www.w3.org/2000/svg",xlink:"https://www.w3.org/1999/xlink",preserveAspectRatio:"xMinYMin meet"})}},{key:"addFolioToSnapSvgCanvas",value:function(e,t,n,s,i){this.ref=i;var a=e.group();this.addFolioSheetToSnapSvgCanvas(e,a,t,n),this.addFolioSystemsToSnapSvgCanvas(e,a,t,n),this.addFolioItemsToSnapSvgCanvas(e,a,t,s)}},{key:"addFolioSheetToSnapSvgCanvas",value:function(e,t,n,s){var i=n.sheet.folioId,a=n.sheet.upperLeftCorner.x,l=n.sheet.upperLeftCorner.y,o=n.sheet.lowerRightCorner.x,c=n.sheet.lowerRightCorner.y;t.attr({sheetGroupId:i,class:"sheet-group"});var v=e.rect(a,l,o,c);v.attr({fill:"white",stroke:s,strokeWidth:1});var r=Snap.parse("<title>Bl. "+i+"</title>");t.append(r),t.add(v)}},{key:"addFolioSystemsToSnapSvgCanvas",value:function(e,t,n,s){n.systems.lineArrays.forEach((function(i,a){var l=e.group();l.attr({systemLineGroupId:a+1,class:"system-line-group"}),i.forEach((function(t){var n=t.startPoint.x,i=t.startPoint.y,a=t.endPoint.x,o=t.endPoint.y,c=e.line(n,i,a,o);c.attr({class:"system-line",stroke:s,strokeWidth:.7}),l.add(c)}));var o=n.systems.lineLabelArray[a].x,c=n.systems.lineLabelArray[a].y,v=a+1,r=e.text(o,c,v);r.attr({class:"system-label",dominantBaseline:"hanging",fill:s});var g=e.group(l,r);g.attr({systemsGroupId:a+1,class:"systems-group"}),t.add(g)}))}},{key:"addFolioItemsToSnapSvgCanvas",value:function(e,t,n,s){var i=this;n.contentItemsArray.forEach((function(n){if(n){var a=n.upperLeftCorner.x+n.width/2,l=n.upperLeftCorner.y+n.height/2,o=n.measure?[n.sigle," T. "+n.measure]:[n.sigle],c=e.text(0,0,o);c.attr({class:"item-label",style:"font: 12px Source Sans Pro, source-sans-pro, sans-serif",dominantBaseline:"middle"}),c.select("tspan:first-of-type").attr({x:a,y:l,textAnchor:"middle"}),o.length>1&&c.select("tspan:last-of-type").attr({x:a,y:l,textAnchor:"middle",dy:"1.2em"});var v=e.group();n.lineArray.forEach((function(t){var n=t.startPoint.x,s=t.startPoint.y,i=t.endPoint.x,a=t.endPoint.y,l=e.line(n,s,i,a);v.add(l)})),v.attr({class:"item-shape",strokeWidth:2,fill:"white"});var r=e.el("a");r.attr({class:"item-link"}),r.add(v),r.add(c);var g=e.group(r);g.attr({itemGroupId:o,itemId:n.sigle,class:"item-group"});var h=Snap.parse("<title>"+o+"</title>");g.append(h),!1===n.selectable?(g.click((function(){return i.ref.openModal(n.linkTo)})),g.attr({stroke:"grey",fill:"grey"})):(g.click((function(){return i.ref.selectSvgSheet(n.sigle)})),g.attr({stroke:s,fill:s})),t.add(g)}}))}}]),t}();v=Object(a.b)([Object(l.D)({providedIn:"root"})],v);var r=function(){function t(n){e(this,t),this.folioService=n,this.openModalRequest=new l.x,this.selectSvgSheetRequest=new l.x,this.canvasArray=[],this.folioSvgDataArray=[],this.vbArray=[],this.bgColor="#a3a3a3",this.fgColor="orange",this._folioSettings={factor:1.5,formatX:175,formatY:270,initialOffsetX:5,initialOffsetY:5,numberOfFolios:0},this.ref=this}return n(t,[{key:"ngOnChanges",value:function(e){this.prepareFolioSvgOutput()}},{key:"ngAfterViewChecked",value:function(){this.renderSnapSvg(),this.toggleActiveClass()}},{key:"toggleActiveClass",value:function(){var e=this;this.canvasArray&&this.canvasArray.forEach((function(t){t.selectAll(".item-group").forEach((function(t){var n=t.node.attributes.itemId.value;t.toggleClass("active",e.isSelectedSvgSheet(n))}))}))}},{key:"prepareFolioSvgOutput",value:function(){var e=this;this.selectedConvolute.folios.map((function(t,n){e.folioSettings={factor:e.folioSettings.factor,formatX:+t.format.width,formatY:+t.format.height,initialOffsetX:e.folioSettings.initialOffsetX,initialOffsetY:e.folioSettings.initialOffsetY,numberOfFolios:+e.selectedConvolute.folios.length},e.vbArray[n]=new c.o(e.folioSettings),e.folioSvgDataArray[n]=e.folioService.getFolioSvgData(e.folioSettings,t)}))}},{key:"renderSnapSvg",value:function(){var e=this;this.canvasArray=[],this.folioSvgDataArray.map((function(t,n){var s="#folio-"+t.sheet.folioId,i=Snap(s);i&&(e.folioService.addViewBoxToSnapSvgCanvas(i,e.vbArray[n]),e.folioService.addFolioToSnapSvgCanvas(i,t,e.bgColor,e.fgColor,e.ref),e.canvasArray.push(i))}))}},{key:"isSelectedSvgSheet",value:function(e){return e===this.selectedSvgSheet.id}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}},{key:"folioSettings",get:function(){return this._folioSettings},set:function(e){this._folioSettings=e}}]),t}();r.ctorParameters=function(){return[{type:v}]},r.propDecorators={selectedConvolute:[{type:l.G}],selectedSvgSheet:[{type:l.G}],openModalRequest:[{type:l.S}],selectSvgSheetRequest:[{type:l.S}]},r=Object(a.b)([Object(l.n)({selector:"awg-edition-folio",template:'\x3c!-- embedded svg: EditionSvgSheet Overview --\x3e\n<div class="container-fluid svgGrid" *ngIf="folioSvgDataArray">\n    <div class="row svgRow">\n        <div\n            class="col-sm-6 col-lg-{{ 12 / folioSvgDataArray?.length }} svgCol"\n            *ngFor="let folioSvg of folioSvgDataArray"\n        >\n            <svg id="folio-{{ folioSvg.sheet.folioId }}"></svg>\n        </div>\n    </div>\n</div>\n',changeDetection:l.j.OnPush,styles:["/*\nsee also https://stackoverflow.com/questions/114543/how-to-horizontally-center-a-div-in-another-div\n */\n.svgGrid {\n    margin-bottom: 2em;\n}\n.svgRow {\n    padding-top: 1em;\n    width: inherit;\n    text-align: center;\n    box-shadow: 5px 5px 6px #cccccc;\n    border: 1px solid #eeeeee;\n}\n.svgCol {\n    display: inline-block;\n}\n"]})],r);var g=function t(){e(this,t)};g=Object(a.b)([Object(l.L)({imports:[o.a],declarations:[r],exports:[r]})],g);var h=i("LcUP"),d=function(){function t(){e(this,t),this.openModalRequest=new l.x,this.selectOverlayRequest=new l.x,this.selectSvgSheetRequest=new l.x}return n(t,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){this.openModalRequest.emit(e)}},{key:"selectOverlay",value:function(e){this.selectOverlayRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),t}();d.propDecorators={svgSheetsData:[{type:l.G}],selectedOverlay:[{type:l.G}],selectedSvgSheet:[{type:l.G}],selectedTextcriticalComments:[{type:l.G}],showTkA:[{type:l.G}],openModalRequest:[{type:l.S}],selectOverlayRequest:[{type:l.S}],selectSvgSheetRequest:[{type:l.S}]},d=Object(a.b)([Object(l.n)({selector:"awg-edition-accolade",template:'<ngb-accordion activeIds="awg-accolade-view">\n    <ngb-panel id="awg-accolade-view">\n        <ng-template ngbPanelHeader>\n            <div class="d-flex align-items-center justify-content-between">\n                <button ngbPanelToggle class="btn btn-link text-left">Edierter Notentext</button>\n                <button type="button" class="btn btn-sm btn-outline-info ml-2" (click)="openModal(\'hintEditionDetail\')">\n                    Hinweise zur Nutzung\n                </button>\n            </div>\n        </ng-template>\n        <ng-template ngbPanelContent>\n            \x3c!-- accolade control --\x3e\n            <awg-edition-svg-sheet-nav\n                *ngIf="svgSheetsData && selectedSvgSheet"\n                [svgSheetsData]="svgSheetsData"\n                [selectedSvgSheet]="selectedSvgSheet"\n                (selectSvgSheetRequest)="selectSvgSheet($event)"\n            >\n            </awg-edition-svg-sheet-nav>\n\n            \x3c!-- svg panel --\x3e\n            <awg-edition-svg-sheet\n                *ngIf="svgSheetsData && selectedSvgSheet"\n                [svgSheetsData]="svgSheetsData"\n                [selectedSvgSheet]="selectedSvgSheet"\n                [selectedOverlay]="selectedOverlay"\n                (selectSvgSheetRequest)="selectSvgSheet($event)"\n                (selectOverlayRequest)="selectOverlay($event)"\n            >\n            </awg-edition-svg-sheet>\n\n            \x3c!-- table for TkA --\x3e\n            <div class="panel-footer" *ngIf="showTkA && selectedTextcriticalComments">\n                <h5 class="mt-4">Textkritischer Kommentar ({{ selectedOverlay.type }} {{ selectedOverlay.id }}):</h5>\n                <awg-edition-tka-table\n                    [textcriticalComments]="selectedTextcriticalComments"\n                    (openModalRequest)="openModal($event)"\n                    (selectSvgSheetRequest)="selectSvgSheet($event)"\n                >\n                </awg-edition-tka-table>\n            </div>\n        </ng-template>\n    </ngb-panel>\n</ngb-accordion>\n',changeDetection:l.j.OnPush,styles:[""]})],d);var S=i("bIgJ"),x=function(){function t(){e(this,t),this.openModalRequest=new l.x,this.selectConvoluteRequest=new l.x,this.selectSvgSheetRequest=new l.x,this.faSquare=S.faSquare,this.folioLegends=[{color:"olivedrab",label:"aktuell ausgew\xe4hlt"},{color:"orange",label:"ausw\xe4hlbar"},{color:"grey",label:"(momentan noch) nicht ausw\xe4hlbar"}]}return n(t,[{key:"ngOnInit",value:function(){}},{key:"openModal",value:function(e){e&&this.openModalRequest.emit(e)}},{key:"selectConvolute",value:function(e){e&&this.selectConvoluteRequest.emit(e)}},{key:"selectSvgSheet",value:function(e){e&&this.selectSvgSheetRequest.emit(e)}}]),t}();x.propDecorators={folioConvoluteData:[{type:l.G}],selectedConvolute:[{type:l.G}],selectedSvgSheet:[{type:l.G}],openModalRequest:[{type:l.S}],selectConvoluteRequest:[{type:l.S}],selectSvgSheetRequest:[{type:l.S}]},x=Object(a.b)([Object(l.n)({selector:"awg-edition-convolute",template:'<ngb-accordion activeIds="awg-convolute-view">\n    <ngb-panel id="awg-convolute-view" title="Konvolut\xfcbersicht">\n        <ng-template ngbPanelContent>\n            \x3c!-- convolute dropDown --\x3e\n            <div class="d-inline-block" ngbDropdown>\n                <a class="btn" id="dropDownConvolutes" ngbDropdownToggle>\n                    <span>{{ selectedConvolute.convoluteId }}</span>\n                </a>\n                <div ngbDropdownMenu aria-labelledby="dropDownConvolutes">\n                    <a\n                        class="dropdown-item"\n                        *ngFor="let convolute of folioConvoluteData.convolutes"\n                        (click)="selectConvolute(convolute.convoluteId)"\n                        >{{ convolute.convoluteId }}</a\n                    >\n                </div>\n            </div>\n\n            \x3c!-- folio overview --\x3e\n            <awg-edition-folio\n                *ngIf="selectedConvolute && selectedSvgSheet"\n                [selectedConvolute]="selectedConvolute"\n                [selectedSvgSheet]="selectedSvgSheet"\n                (openModalRequest)="openModal($event)"\n                (selectSvgSheetRequest)="selectSvgSheet($event)"\n            >\n            </awg-edition-folio>\n\n            \x3c!-- folio legend --\x3e\n            <div class="col-12">\n                Legende:&nbsp;\n                <ng-container *ngFor="let legend of folioLegends">\n                    <span class="{{ legend.color }}">\n                        <fa-icon [icon]="faSquare"></fa-icon>\n                        {{ legend.label }}\n                    </span>\n                </ng-container>\n            </div>\n        </ng-template>\n    </ngb-panel>\n</ngb-accordion>\n',changeDetection:l.j.OnPush,styles:[""]})],x);var u,y,p=function(){function t(){e(this,t),this.selectSvgSheetRequest=new l.x}return n(t,[{key:"ngOnInit",value:function(){}},{key:"isSelectedSvgSheet",value:function(e){return e===this.selectedSvgSheet.id}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),t}();p.propDecorators={svgSheetsData:[{type:l.G}],selectedSvgSheet:[{type:l.G}],selectSvgSheetRequest:[{type:l.S}]},p=Object(a.b)([Object(l.n)({selector:"awg-edition-svg-sheet-nav",template:'<div *ngIf="svgSheetsData" class="btn-group awg-btn-group d-flex" role="group">\n    <a\n        class="btn btn-default w-100"\n        *ngFor="let svgSheet of svgSheetsData.sheets"\n        [class.active]="isSelectedSvgSheet(svgSheet.id)"\n        (click)="selectSvgSheet(svgSheet.id)"\n    >\n        {{ svgSheet.id }}\n    </a>\n</div>\n',changeDetection:l.j.OnPush,styles:[""]})],p),function(e){e.sheet1="Aa:SkI/1",e.sheet2="Aa:SkI/2",e.sheet3="Aa:SkI/3",e.sheet4="Aa:SkI/4",e.sheet5="Aa:SkI/5"}(u||(u={})),function(e){e.sheet1="A:SkI/1",e.sheet2="A:SkI/2",e.sheet2_1="A:SkI/2.1",e.sheet2_1_1="A:SkI/2.1.1",e.sheet2_1_2="A:SkI/2.1.2",e.sheet2_1_2_1="A:SkI/2.1.2.1",e.sheet2_1_3="A:SkI/2.1.3",e.sheet3="A:SkI/3",e.sheet3_1="A:SkI/3.1",e.sheet3_1_1="A:SkI/3.1.1",e.sheet3_1_2="A:SkI/3.1.2",e.sheet3_1_3="A:SkI/3.1.3",e.sheet3_1_3_1="A:SkI/3.1.3.1",e.sheet4a="A:SkI/4a",e.sheet4b="A:SkI/4b",e.sheet4c="A:SkI/4c",e.sheet4d="A:SkI/4d",e.sheet4_1="A:SkI/4.1",e.sheet4_2="A:SkI/4.2",e.sheet4_3="A:SkI/4.3"}(y||(y={}));var f=function(){function t(){e(this,t),this.selectSvgSheetRequest=new l.x,this.selectOverlayRequest=new l.x,this.svgSheetLabels={op12:{sheet1:u.sheet1,sheet2:u.sheet2,sheet3:u.sheet3,sheet4:u.sheet4,sheet5:u.sheet5},op25:{sheet1:y.sheet1,sheet2:y.sheet2,sheet2_1:y.sheet2_1,sheet2_1_1:y.sheet2_1_1,sheet2_1_2:y.sheet2_1_2,sheet2_1_2_1:y.sheet2_1_2_1,sheet2_1_3:y.sheet2_1_3,sheet3:y.sheet3,sheet3_1:y.sheet3_1,sheet3_1_1:y.sheet3_1_1,sheet3_1_2:y.sheet3_1_2,sheet3_1_3:y.sheet3_1_3,sheet3_1_3_1:y.sheet3_1_3_1,sheet4a:y.sheet4a,sheet4b:y.sheet4b,sheet4c:y.sheet4c,sheet4d:y.sheet4d,sheet4_1:y.sheet4_1,sheet4_2:y.sheet4_2,sheet4_3:y.sheet4_3}},this.overlayTypes=c.c}return n(t,[{key:"ngOnInit",value:function(){this.sheetsArray=this.svgSheetsData.sheets.map((function(e){return e.id}))}},{key:"isSelectedSvgSheet",value:function(e){return e===this.selectedSvgSheet.id}},{key:"isSelectedOverlay",value:function(e,t){if(e&&t){var n=new c.b(e,t);return JSON.stringify(n)===JSON.stringify(this.selectedOverlay)}}},{key:"selectOverlay",value:function(e,t){if(e&&t){var n=new c.b(e,t);this.selectOverlayRequest.emit(n)}}},{key:"selectSvgSheet",value:function(e){this.selectSvgSheetRequest.emit(e)}}]),t}();f.propDecorators={svgSheetsData:[{type:l.G}],selectedSvgSheet:[{type:l.G}],selectedOverlay:[{type:l.G}],selectSvgSheetRequest:[{type:l.S}],selectOverlayRequest:[{type:l.S}]},f=Object(a.b)([Object(l.n)({selector:"awg-edition-svg-sheet",template:'<div>\n    \x3c!-- *********************** --\x3e\n    \x3c!--       OPUS 12           --\x3e\n    \x3c!-- *********************** --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/1 --\x3e\n    <div class="svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet1)">\n        <p class="small text-muted">\n            [Der edierte Notentext von <strong>Aa:SKI/1</strong> erscheint im Zusammenhang der vollst\xe4ndigen Edition der\n            <em>Vier Lieder</em> op. 12 in <strong>AWG I/5</strong>.]\n        </p>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/1 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/2 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet2)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- systems --\x3e\n            <svg:g class="edition-svg-systems">\n                \x3c!-- system 14 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.system, \'14\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.system, \'14\')"\n                >\n                    <rect class="edition-svg-system" x="20" y="205" width="950" height="60" />\n                </a>\n                \x3c!-- system 13 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.system, \'13\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.system, \'13\')"\n                >\n                    <rect class="edition-svg-system" x="20" y="275" width="950" height="60" />\n                </a>\n                \x3c!-- system 12 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.system, \'12\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.system, \'12\')"\n                >\n                    <rect class="edition-svg-system" x="20" y="345" width="950" height="60" />\n                </a>\n            </svg:g>\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'10\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'10\')"\n                >\n                    <rect class="edition-svg-measure" x="300" y="125" width="180" height="345" />\n                </a>\n                \x3c!-- measure 11 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'11\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'11\')"\n                >\n                    <rect class="edition-svg-measure" x="480" y="125" width="180" height="345" />\n                </a>\n                \x3c!-- measure 12 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'12\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'12\')"\n                >\n                    <rect class="edition-svg-measure" x="660" y="125" width="180" height="345" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S12/o1 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'0\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'0\')"\n                >\n                    <rect class="edition-svg-item" x="330" y="350" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T10/S12/o2 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'1\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'1\')"\n                >\n                    <rect class="edition-svg-item" x="380" y="350" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T11/S14/o(1/4) --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'2\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'2\')"\n                >\n                    <rect class="edition-svg-item" x="480" y="200" rx="5" ry="5" width="125" height="80" />\n                </a>\n                \x3c!-- T12/S13/oO --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'3\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'3\')"\n                >\n                    <rect class="edition-svg-item" x="660" y="270" rx="5" ry="5" width="125" height="80" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/3 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet3)">\n                    <rect class="edition-svg-linkbox" x="90" y="345" width="182" height="125" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/2 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/3 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet3)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 608"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'10\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'10\')"\n                >\n                    <rect class="edition-svg-measure" x="80" y="110" width="282" height="400" />\n                </a>\n                \x3c!-- measure 11 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'11\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'11\')"\n                >\n                    <rect class="edition-svg-measure" x="362" y="110" width="260" height="400" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S9/o(2/4) --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'0\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'0\')"\n                >\n                    <rect class="edition-svg-item" x="225" y="420" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T11/S10/o(1.-2.Note) --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'1\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'1\')"\n                >\n                    <rect class="edition-svg-item" x="365" y="340" rx="5" ry="5" width="105" height="70" />\n                </a>\n                \x3c!-- T12/S10/o(nach 2/4) --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'2\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'2\')"\n                >\n                    <rect class="edition-svg-item" x="510" y="340" rx="5" ry="5" width="100" height="70" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/2 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet2)">\n                    <rect class="edition-svg-linkbox" x="458" y="111" width="165" height="162" />\n                </a>\n                \x3c!-- rect SkI/5 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet5)">\n                    <rect class="edition-svg-linkbox" x="620" y="420" width="165" height="160" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/3 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/4 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet4)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'10\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'10\')"\n                >\n                    <rect class="edition-svg-measure" x="150" y="115" width="268" height="390" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S6/oO --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'0\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'0\')"\n                >\n                    <rect class="edition-svg-item" x="283" y="270" rx="5" ry="5" width="40" height="70" />\n                </a>\n                \x3c!-- T10/S5/o(3.Note) --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'1\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'1\')"\n                >\n                    <rect class="edition-svg-item" x="283" y="350" rx="5" ry="5" width="40" height="70" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/5 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet5)">\n                    <rect class="edition-svg-linkbox" x="577" y="152" width="222" height="180" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/4 --\x3e\n\n    \x3c!-- embedded svg: op. 12 Aa:SkI/5 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op12.sheet5)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 608"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- measures --\x3e\n            <svg:g class="edition-svg-measures">\n                \x3c!-- measure 10 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'10\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'10\')"\n                >\n                    <rect class="edition-svg-measure" x="390" y="115" width="260" height="390" />\n                </a>\n                \x3c!-- measure 11 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.measure, \'11\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.measure, \'11\')"\n                >\n                    <rect class="edition-svg-measure" x="650" y="115" width="200" height="390" />\n                </a>\n            </svg:g>\n            \x3c!-- items --\x3e\n            <svg:g class="edition-svg-items">\n                \x3c!-- T10/S9/o3/8 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'0\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'0\')"\n                >\n                    <rect class="edition-svg-item" x="523" y="195" rx="5" ry="5" width="40" height="85" />\n                </a>\n                \x3c!-- T11/S9/o1/4 --\x3e\n                <a\n                    (click)="selectOverlay(overlayTypes.item, \'1\')"\n                    [class.active]="isSelectedOverlay(overlayTypes.item, \'1\')"\n                >\n                    <rect class="edition-svg-item" x="650" y="195" rx="5" ry="5" width="40" height="85" />\n                </a>\n            </svg:g>\n            \x3c!-- link boxes --\x3e\n            <svg:g class="edition-svg-linkboxes">\n                \x3c!-- rect SkI/3 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet3)">\n                    <rect class="edition-svg-linkbox" x="72" y="148" width="242" height="125" />\n                </a>\n                \x3c!-- rect SkI/4 --\x3e\n                <a (click)="selectSvgSheet(svgSheetLabels.op12.sheet4)">\n                    <rect class="edition-svg-linkbox" x="72" y="345" width="245" height="205" />\n                </a>\n            </svg:g>\n        </svg>\n    </div>\n    \x3c!-- END svg op. 12 Aa:SkI/5 --\x3e\n\n    \x3c!-- *********************** --\x3e\n    \x3c!--       OPUS 25           --\x3e\n    \x3c!-- *********************** --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/1 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet1)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/1 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/2 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet2)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/2 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/3 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet3)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/3 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4a --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4a)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4a --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4b --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4b)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4b --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4c --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4c)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4c --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4d --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4d)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4d --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4.1 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4_1)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4.1 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4.2 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4_2)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4.2 --\x3e\n\n    \x3c!-- embedded svg: op. 25 A:SkI/4.3 --\x3e\n    <div class="svg edition-svg" *ngIf="isSelectedSvgSheet(svgSheetLabels.op25.sheet4_3)">\n        <svg\n            version="1.1"\n            xmlns="https://www.w3.org/2000/svg"\n            xmlns:xlink="https://www.w3.org/1999/xlink"\n            viewBox="0 0 1000 508"\n            [id]="selectedSvgSheet.id"\n        >\n            <svg:image xlink:href [attr.xlink:href]="selectedSvgSheet.svg" width="100%" height="100%" />\n            \x3c!-- TODO: create overlay svg dynamically with snap from overlay data --\x3e\n        </svg>\n    </div>\n    \x3c!-- END svg op. 25 A:SkI/4.3 --\x3e\n</div>\n',changeDetection:l.j.OnPush,styles:[".ngx-gallery {\n    display: inline-block;\n}\n\n/* image preview */\n\nngx-gallery ::ng-deep .ngx-gallery-image-wrapper {\n    background-color: #e7e7e7;\n}\n\n/* arrows */\n\nngx-gallery ::ng-deep .ngx-gallery-arrow {\n    color: #676767;\n}\n\nngx-gallery ::ng-deep .ngx-gallery-arrow.ngx-gallery-disabled {\n    opacity: 0.3;\n}\n\n/* thumbnails */\n\nngx-gallery ::ng-deep .ngx-gallery-thumbnail {\n    opacity: 0.3;\n}\n\nngx-gallery ::ng-deep .ngx-gallery-thumbnail.ngx-gallery-active,\nngx-gallery ::ng-deep .ngx-gallery-thumbnail:hover {\n    opacity: 1;\n}\n"]})],f);var m=i("tyNb"),w=i("eIep"),k=i("1G5W"),b=i("NbbI"),O=i("XNiG"),I=function(){function t(n,s,i,a){e(this,t),this.editionDataService=n,this.editionService=s,this.route=i,this.router=a,this.destroy$=new O.a,this.errorMessage=void 0,this.showTkA=!1}return n(t,[{key:"ngOnInit",value:function(){this.getEditionDetailData()}},{key:"getEditionDetailData",value:function(){var e=this;this.editionService.getEditionWork().pipe(Object(w.a)((function(t){return e.editionWork=t,e.editionDataService.getEditionDetailData(e.editionWork)})),Object(k.a)(this.destroy$)).pipe(Object(w.a)((function(t){if(e.folioConvoluteData=t[0],e.svgSheetsData=t[1],e.textcriticsData=t[2],e.route.queryParamMap)return e.route.queryParamMap})),Object(k.a)(this.destroy$)).subscribe((function(t){var n=e.getSketchParams(t);e.selectedSvgSheet=e.findSvgSheet(n),e.selectedConvolute=e.findConvolute(""),!e.selectedConvolute&&e.folioConvoluteData.convolutes&&e.folioConvoluteData.convolutes.constructor===Array&&e.folioConvoluteData.convolutes.length>0&&(e.selectedConvolute=e.folioConvoluteData.convolutes[0])}),(function(t){e.errorMessage=t}))}},{key:"onConvoluteSelect",value:function(e){if(e){var t=this.findConvolute(e);t.folios&&t.folios.constructor===Array&&0===t.folios.length?t.linkTo&&this.modal.open(t.linkTo):this.selectedConvolute=t}}},{key:"onOverlaySelect",value:function(e){if(this.textcriticsData||this.selectedSvgSheet){var t=this.findTextCriticalComments();this.selectedOverlay=e,this.selectedTextcriticalComments=this.editionService.getTextcriticalComments(t,this.selectedOverlay),this.showTkA=this.selectedTextcriticalComments!==[]}}},{key:"onSvgSheetSelect",value:function(e){e||(e=this.svgSheetsData.sheets[0].id||""),this.selectedSvgSheet=this.findSvgSheet(e),this.clearOverlaySelection();var t={queryParams:{sketch:e},queryParamsHandling:""};this.router.navigate([this.editionWork.baseRoute,this.editionWork.detailRoute.route],t)}},{key:"clearOverlaySelection",value:function(){this.selectedOverlay=null,this.showTkA=!1}},{key:"getSketchParams",value:function(e){if(e.get("sketch"))return e.get("sketch")?e.get("sketch"):this.svgSheetsData.sheets[0].id;this.onSvgSheetSelect(this.svgSheetsData.sheets[0].id)}},{key:"findConvolute",value:function(e){if(e){var t=this.folioConvoluteData.convolutes.findIndex((function(t){return t.convoluteId===e}));return this.folioConvoluteData.convolutes[t]}}},{key:"findSvgSheet",value:function(e){if(e){var t=this.svgSheetsData.sheets.findIndex((function(t){return t.id===e}));return this.svgSheetsData.sheets[t]}}},{key:"findTextCriticalComments",value:function(){var e=this;if(this.textcriticsData||this.selectedSvgSheet){var t=this.textcriticsData.textcritics.findIndex((function(t){return t.id===e.selectedSvgSheet.id}));return this.textcriticsData.textcritics[t].comments}}},{key:"ngOnDestroy",value:function(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}]),t}();I.ctorParameters=function(){return[{type:b.a},{type:b.b},{type:m.a},{type:m.d}]},I.propDecorators={modal:[{type:l.mb,args:["modal",{static:!0}]}]};var A=[{path:"",component:I=Object(a.b)([Object(l.n)({selector:"awg-edition-detail",template:'\x3c!-- content: edition detail --\x3e\n<div>\n    \x3c!-- modal --\x3e\n    <awg-modal #modal></awg-modal>\n\n    \x3c!-- body with embedded svg\'s --\x3e\n\n    \x3c!-- convolute view --\x3e\n    <awg-edition-convolute\n        *ngIf="folioConvoluteData && selectedSvgSheet"\n        [folioConvoluteData]="folioConvoluteData"\n        [selectedConvolute]="selectedConvolute"\n        [selectedSvgSheet]="selectedSvgSheet"\n        (openModalRequest)="modal.open($event)"\n        (selectConvoluteRequest)="onConvoluteSelect($event)"\n        (selectSvgSheetRequest)="onSvgSheetSelect($event)"\n    >\n    </awg-edition-convolute>\n\n    \x3c!-- accolade view --\x3e\n    <awg-edition-accolade\n        *ngIf="svgSheetsData && selectedSvgSheet"\n        [svgSheetsData]="svgSheetsData"\n        [selectedSvgSheet]="selectedSvgSheet"\n        [selectedTextcriticalComments]="selectedTextcriticalComments"\n        [selectedOverlay]="selectedOverlay"\n        [showTkA]="showTkA"\n        (openModalRequest)="modal.open($event)"\n        (selectSvgSheetRequest)="onSvgSheetSelect($event)"\n        (selectOverlayRequest)="onOverlaySelect($event)"\n    >\n    </awg-edition-accolade>\n</div>\n',styles:[""]})],I)}],D=[I],T=function t(){e(this,t)};T=Object(a.b)([Object(l.L)({imports:[m.e.forChild(A)],exports:[m.e]})],T);var C=function t(){e(this,t)};C=Object(a.b)([Object(l.L)({imports:[o.a,g,h.a,T],declarations:[d,x,p,f,D]})],C)},bIgJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=[],i="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z";t.definition={prefix:"fas",iconName:"square",icon:[448,512,s,"f0c8",i]},t.faSquare=t.definition,t.prefix="fas",t.iconName="square",t.width=448,t.height=512,t.ligatures=s,t.unicode="f0c8",t.svgPathData=i}}])}();