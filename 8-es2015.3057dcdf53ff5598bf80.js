(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"HR/a":function(t,e,i){"use strict";i.r(e),i.d(e,"EditionViewModule",(function(){return D}));var o=i("mrSG"),n=i("fXoL"),s=i("PCNd"),r=i("tyNb"),a=i("6aU4"),c=i("NbbI");let d=class{constructor(t,e,i){this.editionService=t,this.route=e,this.router=i,this.editionViewTitle="Beispieledition ausgew\xe4hlter Skizzen",this.editionViewId="awg-edition-view"}ngOnInit(){this.routeToSidenav(),this.getEditionWorkFromRoute()}getEditionWorkFromRoute(){this.route.paramMap.subscribe(t=>{const e=t.get("compositionId")?t.get("compositionId"):"";this.editionService.updateEditionWork(a.e[e]),this.editionWork$=this.editionService.getEditionWork()})}routeToSidenav(){this.router.navigate([{outlets:{side:"editionInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}};d.ctorParameters=()=>[{type:c.b},{type:r.a},{type:r.d}],d=Object(o.b)([Object(n.n)({selector:"awg-edition-view",template:'\x3c!-- content: edition-view --\x3e\n\n\x3c!-- heading --\x3e\n<awg-heading [title]="editionViewTitle" [id]="editionViewId"></awg-heading>\n\n<div class="awg-edition-work" *ngIf="editionWork$ | async as editionWork">\n    \x3c!-- TODO: refactor this as selectable breadcrumb --\x3e\n    <h6 class="awg-edition-info-breadcrumb">\n        {{ editionWork.edition.short }} / {{ editionWork.series.full }} / {{ editionWork.section.full }}\n    </h6>\n    <h3 class="awg-edition-info-header">\n        <i class="awg-edition-info-header-title">{{ editionWork.titleStatement.title }}</i\n        >&nbsp;<span class="awg-edition-info-header-catalogue">{{ editionWork.work.short }}</span>\n    </h3>\n    \x3c!-- declamation --\x3e\n    <div class="awg-edition-responsibility mt-3">\n        <p>\n            Ediert von\n            <span class="editor" *ngFor="let editor of editionWork.responsibilityStatement.editors; last as isLast">\n                <a href="{{ editor.homepage }}">{{ editor.name }}</a\n                ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n            </span>\n            <br />\n            Versionsdatum: <span class="version">{{ editionWork.responsibilityStatement.lastModified }}</span>\n        </p>\n    </div>\n</div>\n\n\x3c!-- edition routes --\x3e\n<router-outlet></router-outlet>\n',styles:[""]})],d);var l=i("XNiG"),u=i("wjQg"),h=i("1G5W");let p=class{constructor(t){this.editionService=t,this.destroy$=new l.a}ngOnInit(){this.getEditionWork()}getEditionWork(){this.editionService.getEditionWork().pipe(Object(h.a)(this.destroy$)).subscribe(t=>{this.editionWork=t,this.setButtons()})}setButtons(){this.editionRouterLinkButtons=[new u.a(this.editionWork.baseRoute,this.editionWork.introRoute.route,a.a.editionIntro.short,!1),new u.a(this.editionWork.baseRoute,this.editionWork.detailRoute.route,a.a.editionDetail.short,!1),new u.a(this.editionWork.baseRoute,this.editionWork.reportRoute.route,a.a.editionReport.short,!1),new u.a(this.editionWork.baseRoute,this.editionWork.graphRoute.route,a.a.editionGraph.short,!1)]}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}};p.ctorParameters=()=>[{type:c.b}],p=Object(o.b)([Object(n.n)({selector:"awg-edition-overview",template:'<awg-router-link-button-group\n    *ngIf="editionRouterLinkButtons"\n    [routerLinkButtons]="editionRouterLinkButtons"\n    [queryParamsHandling]="\'\'"\n>\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n',styles:[""]})],p);let g=class{constructor(){}ngOnInit(){}};g.ctorParameters=()=>[],g=Object(o.b)([Object(n.n)({selector:"awg-edition-section",template:"\x3c!--\n<p>edition-section works!</p>\n--\x3e\n\n<router-outlet></router-outlet>\n",styles:[""]})],g);let b=class{constructor(){}ngOnInit(){}};b.ctorParameters=()=>[],b=Object(o.b)([Object(n.n)({selector:"awg-edition-series",template:"<p>edition-series works!</p>\n\n<router-outlet></router-outlet>\n",styles:[""]})],b);let k=class{constructor(){}ngOnInit(){}};k.ctorParameters=()=>[],k=Object(o.b)([Object(n.n)({selector:"awg-edition-type",template:"<p>edition-type works!</p>\n\n<router-outlet></router-outlet>\n",styles:[""]})],k);const m=[{path:"",component:g,children:[{path:"composition/:compositionId",component:d,children:[{path:"",component:p,children:[{path:a.a.editionIntro.route,loadChildren:()=>i.e(11).then(i.bind(null,"eeaE")).then(t=>t.EditionIntroModule)},{path:a.a.editionDetail.route,loadChildren:()=>Promise.all([i.e(0),i.e(7)]).then(i.bind(null,"7Yty")).then(t=>t.EditionDetailModule)},{path:a.a.editionReport.route,loadChildren:()=>Promise.all([i.e(0),i.e(12)]).then(i.bind(null,"drwT")).then(t=>t.EditionReportModule)},{path:a.a.editionGraph.route,loadChildren:()=>Promise.all([i.e(0),i.e(6)]).then(i.bind(null,"IAz0")).then(t=>t.EditionGraphModule)},{path:"",redirectTo:"/"+a.a.editionIntro.route,pathMatch:"full"}]}]}]}],w=[d,p,g,b,k];let W=class{};W=Object(o.b)([Object(n.L)({imports:[r.e.forChild(m)],exports:[r.e]})],W);let D=class{};D=Object(o.b)([Object(n.L)({imports:[s.a,W],declarations:[w]})],D)},NbbI:function(t,e,i){"use strict";i.d(e,"a",(function(){return h})),i.d(e,"b",(function(){return b}));var o=i("mrSG"),n=i("fXoL"),s=i("tk/3"),r=i("cp0P"),a=i("LRne"),c=i("xbPD"),d=i("IzEk"),l=i("JIr8"),u=i("6aU4");let h=class{constructor(t){this.http=t,this.assetWorkPath=""}getEditionDetailData(t){this.setAssetWorkPath(t);const e=this.getFolioConvoluteData(),i=this.getSvgSheetsData(),o=this.getTextcriticsListData();return Object(r.a)([e,i,o]).pipe(Object(c.a)([new u.g,new u.d,new u.n]),Object(d.a)(1))}getEditionGraphData(t){this.setAssetWorkPath(t);return this.getGraphData().pipe(Object(c.a)(new u.i),Object(d.a)(1))}getEditionIntroData(t){this.setAssetWorkPath(t);return this.getIntroData().pipe(Object(c.a)(new u.j),Object(d.a)(1))}getEditionReportData(t){this.setAssetWorkPath(t);const e=this.getSourceListData(),i=this.getSourceDescriptionListData(),o=this.getSourceEvaluationListData(),n=this.getTextcriticsListData();return Object(r.a)([e,i,o,n]).pipe(Object(c.a)([new u.m,new u.k,new u.l,new u.n]),Object(d.a)(1))}setAssetWorkPath(t){const e=t.series.route+t.section.route+t.work.route;this.assetWorkPath=u.a.editionAssets.baseRoute+e}getFolioConvoluteData(){const t=u.a.editionAssets.folioConvoluteFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getGraphData(){const t=u.a.editionAssets.graphFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getIntroData(){const t=u.a.editionAssets.introFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getSourceListData(){const t=u.a.editionAssets.sourceListFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getSourceDescriptionListData(){const t=u.a.editionAssets.sourceDescriptionListFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getSourceEvaluationListData(){const t=u.a.editionAssets.sourceEvaluationListFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getSvgSheetsData(){const t=u.a.editionAssets.svgSheetsFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getTextcriticsListData(){const t=u.a.editionAssets.textcriticsFile,e=`${this.assetWorkPath}/${t}`;return this.getJsonData(e)}getJsonData(t){return this.http.get(t).pipe(Object(l.a)(this.handleError("getJsonData",[])))}handleError(t,e){return i=>(this.log(`${t} failed: ${i.message}`),Object(a.a)(e))}log(t){console.log(t)}};h.ctorParameters=()=>[{type:s.b}],h=Object(o.b)([Object(n.D)({providedIn:"root"})],h);var p,g=i("jtHE");let b=p=class{constructor(){this.bufferSize=1,this.editionWorkSubject=new g.a(this.bufferSize),this.editionWorkStream$=this.editionWorkSubject.asObservable()}static filterTextcriticalComments(t,e,i){const o=t.measure.replace("[","").replace("]",""),n=t.system.replace("[","").replace("]","");switch(e.type){case u.c.measure:return o===e.id;case u.c.system:return n===e.id;case u.c.item:return i===+e.id}}getTextcriticalComments(t,e){if(t&&e)return t.filter((t,i)=>p.filterTextcriticalComments(t,e,i))}getEditionWork(){return this.editionWorkStream$}updateEditionWork(t){this.editionWorkSubject.next(t)}clearEditionWork(){this.editionWorkSubject.next(null)}};b=p=Object(o.b)([Object(n.D)({providedIn:"root"})],b)}}]);