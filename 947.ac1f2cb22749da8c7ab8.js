"use strict";(self.webpackChunkawg_app=self.webpackChunkawg_app||[]).push([[947],{7947:(a,S,e)=>{e.r(S),e.d(S,{EditionViewModule:()=>y});var l=e(4762),h=e(7716),W=e(5577),u=e(4213);var g=e(7454),n=e(5768),I=e(6409);let i=class{constructor(c,k,C){this.editionService=c,this.route=k,this.router=C,this.editionViewTitle="Beispieledition ausgew\xe4hlter Skizzen",this.editionViewId="awg-edition-view"}ngOnInit(){this.routeToSidenav(),this.getEditionWorkFromRoute()}getEditionWorkFromRoute(){this.route.paramMap.subscribe(c=>{const k=c.get("compositionId")?c.get("compositionId"):"";this.editionService.updateEditionWork(n.yE[k.toUpperCase()]),this.editionWork$=this.editionService.getEditionWork()})}routeToSidenav(){this.router.navigate([{outlets:{side:"editionInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}};i.ctorParameters=()=>[{type:I.O},{type:u.gz},{type:u.F0}],i=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-view",template:'\x3c!-- content: edition-view --\x3e\n\n\x3c!-- heading --\x3e\n<awg-heading [title]="editionViewTitle" [id]="editionViewId"></awg-heading>\n\n<div class="awg-edition-work" *ngIf="editionWork$ | async as editionWork">\n    \x3c!-- TODO: refactor this as selectable breadcrumb --\x3e\n    <h6 class="awg-edition-info-breadcrumb">\n        {{ editionWork.edition.short }} / {{ editionWork.series.full }} / {{ editionWork.section.full }}\n    </h6>\n    <h3 class="awg-edition-info-header">\n        <i class="awg-edition-info-header-title">{{ editionWork.titleStatement.title }}</i\n        >&nbsp;<span class="awg-edition-info-header-catalogue">{{ editionWork.work.short }}</span>\n    </h3>\n    \x3c!-- declamation --\x3e\n    <div class="awg-edition-responsibility mt-3">\n        <p>\n            Ediert von\n            <span class="editor" *ngFor="let editor of editionWork.responsibilityStatement.editors; last as isLast">\n                <a href="{{ editor.homepage }}">{{ editor.name }}</a\n                ><span *ngIf="!isLast">&nbsp;&&nbsp;</span>\n            </span>\n            <br />\n            Versionsdatum: <span class="version">{{ editionWork.responsibilityStatement.lastModified }}</span>\n        </p>\n    </div>\n</div>\n\n\x3c!-- edition routes --\x3e\n<router-outlet></router-outlet>\n',styles:[g]})],i);var O=e(9057),m=e(9765),D=e(6782),E=e(849);let t=class{constructor(c){this.editionService=c,this._destroy$=new m.xQ}ngOnInit(){this.getEditionWork()}getEditionWork(){this.editionService.getEditionWork().pipe((0,D.R)(this._destroy$)).subscribe(c=>{this.editionWork=c,this.setButtons()})}setButtons(){this.editionRouterLinkButtons=[new E.v(this.editionWork.baseRoute,this.editionWork.introRoute.route,n.w8.EDITION_INTRO.short,!1),new E.v(this.editionWork.baseRoute,this.editionWork.detailRoute.route,n.w8.EDITION_DETAIL.short,!1),new E.v(this.editionWork.baseRoute,this.editionWork.reportRoute.route,n.w8.EDITION_REPORT.short,!1),new E.v(this.editionWork.baseRoute,this.editionWork.graphRoute.route,n.w8.EDITION_GRAPH.short,!1)]}ngOnDestroy(){this._destroy$.next(!0),this._destroy$.unsubscribe()}};t.ctorParameters=()=>[{type:I.O}],t=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-overview",template:'<awg-router-link-button-group\n    *ngIf="editionRouterLinkButtons"\n    [routerLinkButtons]="editionRouterLinkButtons"\n    [queryParamsHandling]="\'\'"\n>\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n',styles:[O]})],t);var d=e(7114);let r=class{constructor(){}ngOnInit(){}};r.ctorParameters=()=>[],r=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-section",template:"\x3c!--\n<p>edition-section works!</p>\n--\x3e\n\n<router-outlet></router-outlet>\n",styles:[d]})],r);var R=e(4241);let w=class{constructor(){}ngOnInit(){}};w.ctorParameters=()=>[],w=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-series",template:"<p>edition-series works!</p>\n\n<router-outlet></router-outlet>\n",styles:[R]})],w);var L=e(4680);let T=class{constructor(){}ngOnInit(){}};T.ctorParameters=()=>[],T=(0,l.gn)([(0,h.wA2)({selector:"awg-edition-type",template:"<p>edition-type works!</p>\n\n<router-outlet></router-outlet>\n",styles:[L]})],T);const N=[{path:"",component:r,children:[{path:"composition/:compositionId",component:i,children:[{path:"",component:t,children:[{path:n.w8.EDITION_INTRO.route,loadChildren:()=>e.e(545).then(e.bind(e,4852)).then(s=>s.EditionIntroModule)},{path:n.w8.EDITION_DETAIL.route,loadChildren:()=>Promise.all([e.e(592),e.e(189)]).then(e.bind(e,5189)).then(s=>s.EditionDetailModule)},{path:n.w8.EDITION_REPORT.route,loadChildren:()=>Promise.all([e.e(592),e.e(671)]).then(e.bind(e,4671)).then(s=>s.EditionReportModule)},{path:n.w8.EDITION_GRAPH.route,loadChildren:()=>Promise.all([e.e(592),e.e(675)]).then(e.bind(e,9675)).then(s=>s.EditionGraphModule)},{path:"",redirectTo:"/"+n.w8.EDITION_INTRO.route,pathMatch:"full"}]}]}]}],A=[i,t,r,w,T];let $=class{};$=(0,l.gn)([(0,h.LVF)({imports:[u.Bz.forChild(N)],exports:[u.Bz]})],$);let y=class{};y=(0,l.gn)([(0,h.LVF)({imports:[W.m,$],declarations:[A]})],y)},6409:(a,S,e)=>{e.d(S,{K:()=>p,O:()=>D});var l=e(4762),h=e(7716),W=e(1841),u=e(5758),f=e(5917),g=e(5242),n=e(5257),I=e(5304),i=e(5768);let p=class{constructor(t){this.http=t,this._assetWorkPath=""}getEditionDetailData(t){this._setAssetWorkPath(t);const o=this._getFolioConvoluteData(),d=this._getSvgSheetsData(),r=this._getTextcriticsListData();return(0,u.D)([o,d,r]).pipe((0,g.d)([new i.yL,new i.vU,new i.Dt]),(0,n.q)(1))}getEditionGraphData(t){return this._setAssetWorkPath(t),this._getGraphData().pipe((0,g.d)(new i.nu),(0,n.q)(1))}getEditionIntroData(t){return this._setAssetWorkPath(t),this._getIntroData().pipe((0,g.d)(new i.Jb),(0,n.q)(1))}getEditionReportData(t){this._setAssetWorkPath(t);const o=this._getSourceListData(),d=this._getSourceDescriptionListData(),r=this._getSourceEvaluationListData(),v=this._getTextcriticsListData();return(0,u.D)([o,d,r,v]).pipe((0,g.d)([new i.LQ,new i.DD,new i.DO,new i.Dt]),(0,n.q)(1))}_setAssetWorkPath(t){const o=t.series.route+t.section.route+t.work.route;this._assetWorkPath=i.w8.EDITION_ASSETS.baseRoute+o}_getFolioConvoluteData(){const t=i.w8.EDITION_ASSETS.folioConvoluteFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getGraphData(){const t=i.w8.EDITION_ASSETS.graphFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getIntroData(){const t=i.w8.EDITION_ASSETS.introFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getSourceListData(){const t=i.w8.EDITION_ASSETS.sourceListFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getSourceDescriptionListData(){const t=i.w8.EDITION_ASSETS.sourceDescriptionListFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getSourceEvaluationListData(){const t=i.w8.EDITION_ASSETS.sourceEvaluationListFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getSvgSheetsData(){const t=i.w8.EDITION_ASSETS.svgSheetsFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getTextcriticsListData(){const t=i.w8.EDITION_ASSETS.textcriticsFile,o=`${this._assetWorkPath}/${t}`;return this._getJsonData(o)}_getJsonData(t){return this.http.get(t).pipe((0,I.K)(this._handleError("_getJsonData",[])))}_handleError(t,o){return d=>(this._logError(`${t} failed: ${d.message}`),(0,f.of)(o))}_logError(t){console.error(t)}};p.ctorParameters=()=>[{type:W.eN}],p=(0,l.gn)([(0,h.GSi)({providedIn:"root"})],p);var m,O=e(2298);let D=m=class{constructor(){this._bufferSize=1,this._editionWorkSubject=new O.t(this._bufferSize),this._editionWorkStream$=this._editionWorkSubject.asObservable()}static _filterTextcriticalComments(t,o,d){const r=t.measure.replace("[","").replace("]",""),v=t.system.replace("[","").replace("]","");switch(o.type){case i.wN.measure:return r===o.id;case i.wN.system:return v===o.id;case i.wN.item:return d===+o.id}}getTextcriticalComments(t,o){if(t&&o)return t.filter((d,r)=>m._filterTextcriticalComments(d,o,r))}getEditionWork(){return this._editionWorkStream$}updateEditionWork(t){this._editionWorkSubject.next(t)}clearEditionWork(){this._editionWorkSubject.next(null)}};D=m=(0,l.gn)([(0,h.GSi)({providedIn:"root"})],D)},9057:a=>{a.exports=""},7114:a=>{a.exports=""},4241:a=>{a.exports=""},4680:a=>{a.exports=""},7454:a=>{a.exports=""}}]);