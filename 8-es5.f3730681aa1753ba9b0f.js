function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/jvW":function(e,t,i){"use strict";i.r(t),t.default=""},"9wbs":function(e,t,i){"use strict";i.r(t),t.default=""},"Bh2/":function(e,t,i){"use strict";i.r(t),t.default=""},JAkG:function(e,t,i){"use strict";i.r(t),t.default='\x3c!-- content: bibliography list --\x3e\n<ul class="bibliography">\n    <li\n        *ngFor="let bibItem of bibList; trackBy: trackById"\n        [class.selected]="bibItem === selectedBibItem"\n        (click)="onItemSelect(bibItem)"\n    >\n        <span class="badge">{{ bibItem.value[0] }}</span>\n        <awg-bibliography-detail *ngIf="bibItem.obj_id === selectedBibItem.obj_id" [objId]="bibItem.obj_id">\n        </awg-bibliography-detail>\n    </li>\n</ul>\n'},TLbp:function(e,t,i){"use strict";i.r(t),t.default='<span [innerHtml]="bibEntry$ | async | bibFormat"></span>\n'},YYos:function(e,t,i){"use strict";i.r(t),t.default="<p>\n  bibliography-search works!\n</p>\n"},gxKZ:function(e,t,i){"use strict";i.r(t),t.default='\x3c!-- content: bibliography --\x3e\n<awg-bibliography-search></awg-bibliography-search>\n\n<p>Lade ... {{ (bibList$ | async)?.subjects.length }} von {{ nhits }} Eintr\xe4gen</p>\n\n<awg-bibliography-list\n    *ngIf="isBibListLoaded && (bibList$ | async) as bibList"\n    [bibList]="bibList.subjects"\n    (selectItemRequest)="onItemSelect($event)"\n>\n</awg-bibliography-list>\n'},iCE9:function(e,t,i){"use strict";i.r(t);var r=i("mrSG"),n=i("8Y7J"),a=i("PCNd"),s=function e(){_classCallCheck(this,e)};s=r.a([Object(n.n)({selector:"awg-bibliography-search",template:r.b(i("YYos")).default,styles:[r.b(i("Bh2/")).default]})],s);var l=i("W28f"),o=function(){function e(){_classCallCheck(this,e),this.selectItemRequest=new n.w,this.selectedBibItem=new l.g}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onItemSelect",value:function(e){this.selectedBibItem=e,this.selectItemRequest.emit(e)}},{key:"trackById",value:function(e){return e.obj_id}}]),e}();r.a([Object(n.F)()],o.prototype,"bibList",void 0),r.a([Object(n.R)()],o.prototype,"selectItemRequest",void 0),o=r.a([Object(n.n)({selector:"awg-bibliography-list",template:r.b(i("JAkG")).default,styles:[r.b(i("/jvW")).default]})],o);var b=function(){function e(){_classCallCheck(this,e),this.formatFieldArr=["Author","Titel_unselbst","Titel_selbst","Herausgeber","unpubliziert","Verlagsort","Publikationsdatum","Reihentitel","Seitenangabe"]}return _createClass(e,[{key:"transform",value:function(e){return e?(this.entry=e,this.formattedEntry=this.getFormatFields("edit",this.entry),this.getFormattedValues(this.formattedEntry),this.getFormatFields("output",this.formattedEntry)):null}},{key:"getFormatFields",value:function(e,t){for(var i={},r=0;r<this.formatFieldArr.length;r++)t[this.formatFieldArr[r]]&&("edit"===e?i[this.formatFieldArr[r]]=t[this.formatFieldArr[r]]:"output"===e&&(i=0===r?t[this.formatFieldArr[r]]:i+t[this.formatFieldArr[r]]));return i}},{key:"getFormattedValues",value:function(e){var t=this;return Object.keys(e).forEach((function(i){e[i]=t.getFormattedValueByKey(e,i)})),e}},{key:"getFormattedValueByKey",value:function(e,t){var i="";switch(t){case"Kurztitel":i=this.formatBibTitleShort(e[t]);break;case"Author":i=this.formatBibAuthor(e[t]);break;case"Titel_selbst":i=this.formatBibTitleIndep(e[t]);break;case"Titel_unselbst":i=this.formatBibTitleDep(e[t]);break;case"Herausgeber":i=this.formatBibEditor(e[t]);break;case"unpubliziert":i=this.formatBibUnpublished(e[t]);break;case"Verlagsort":i=this.formatBibPubPlace(e[t]);break;case"Publikationsdatum":i=this.formatBibPubDate(e[t]);break;case"Reihentitel":i=this.formatBibTitleSeries(e[t]);break;case"Seitenangabe":i=this.formatBibPages(e[t]);break;default:i=e[t]}return i}},{key:"formatBibTitleShort",value:function(e){return e?e+" | ":""}},{key:"formatBibAuthor",value:function(e){if(!e)return"";var t="";if("object"==typeof e){t+=this.splitName(e[0],"");for(var i=Object.keys(e).length,r=1;r<i;r++){var n=r===i-1?" und ":", ";t+=this.splitName(e[r],n)}}else"string"==typeof e&&(t+=this.splitName(e,""));return t+=": "}},{key:"formatBibTitleIndep",value:function(e){return e?"Zeitschriftenartikel"!==this.entry.Typ?e+", ":e:""}},{key:"formatBibTitleDep",value:function(e){return e?"\u201e"+e+"\u201c, in: ":""}},{key:"formatBibEditor",value:function(e){if(!e)return"";var t="hg. von ";if("object"==typeof e){t+=this.splitName(e[0],"");for(var i=Object.keys(e).length,r=1;r<i;r++){var n=r===i-1?" und ":", ";t+=this.splitName(e[r],n)}}else"string"==typeof e&&(t+=this.splitName(e,""));return t+=", "}},{key:"formatBibUnpublished",value:function(e){return e?e+" ":""}},{key:"formatBibPubPlace",value:function(e){var t=this.entry.Verlag?this.entry.Verlag:null;if(!e)return t&&console.log('Ort fehlt: "'+t+'" ('+this.entry.Kurztitel+")"),"";var i="";if("object"==typeof e){var r=Object.keys(e).length;if(t)if("object"==typeof t){if(Object.keys(t).length===r)for(var n=0;n<r;n++)n===r-1&&(i+="und "),i+=e[n]+": "+t[n]+", "}else for(var a=0;a<r;a++)i+=a===r-1?e[a]+": "+t+", ":e[a]+", ";else{for(var s=0;s<r;s++)i+=e[s]+", ";this.entry.unpubliziert||console.log('Verlag fehlt: "'+i+'" ('+this.entry.Kurztitel+")")}}else if(t)if(i+=e+": ","object"==typeof t)for(var l=Object.keys(t).length,o=0;o<l;o++)i+=t[o]+", ";else i+=t+", ";else this.entry.unpubliziert||console.log('Verlag fehlt: "'+i+'" ('+this.entry.Kurztitel+")"),i+=e+", ";return i}},{key:"formatBibPublisher",value:function(e){return""}},{key:"formatBibPubDate",value:function(e){return"Zeitschriftenartikel"===this.entry.Typ?" ("+e+")":" "+e}},{key:"formatBibTitleSeries",value:function(e){return e?" ("+e+")":""}},{key:"formatBibPages",value:function(e){if(!e)return"";var t="";if("object"==typeof e)for(var i=Object.keys(e).length,r=0;r<i;r++)t+=(0===r?", S. ":", ")+e[r];else"string"==typeof e&&e&&(t=", S. "+e);return t}},{key:"splitName",value:function(e,t){var i=[];return e.match(",")?((i=e.split(", ")).splice(1,0,i.splice(0,1)[0]),t+i[0]+" "+i[1]):t+e}}]),e}();b=r.a([Object(n.V)({name:"bibFormat"})],b);var c=i("iInd"),u=i("RJwY"),f=i("vkgz"),h=function(){function e(t){_classCallCheck(this,e),this.bibliographyService=t,this.isBibListLoaded=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getBibList()}},{key:"getBibList",value:function(){var e=this;this.bibList$=this.bibliographyService.getBibliographyList().pipe(Object(f.a)((function(t){e.nhits=t.nhits,e.isBibListLoaded=!0})))}},{key:"onItemSelect",value:function(e){this.selectedBibItem=e}}]),e}();h.ctorParameters=function(){return[{type:u.a}]},h=r.a([Object(n.n)({selector:"awg-bibliography",template:r.b(i("gxKZ")).default,styles:[r.b(i("royv")).default]})],h);var y=i("lJxs"),p=i("dJ3e"),d=function(){function e(t,i){_classCallCheck(this,e),this.bibliographyService=t,this.conversionService=i}return _createClass(e,[{key:"ngOnInit",value:function(){this.getBibEntry(this.objId)}},{key:"getBibEntry",value:function(e){var t=this;this.bibEntry$=this.bibliographyService.getBibliographyItemDetail(e).pipe(Object(y.a)((function(e){return t.conversionService.convertObjectProperties(e)})))}}]),e}();d.ctorParameters=function(){return[{type:u.a},{type:p.b}]},r.a([Object(n.F)()],d.prototype,"objId",void 0);var m=[{path:"",component:h,children:[{path:"detail/:id",component:d=r.a([Object(n.n)({selector:"awg-bibliography-detail",template:r.b(i("TLbp")).default,styles:[r.b(i("9wbs")).default]})],d)}]}],g=[h,d],v=function e(){_classCallCheck(this,e)};v=r.a([Object(n.K)({imports:[c.e.forChild(m)],exports:[c.e]})],v),i.d(t,"BibliographyModule",(function(){return k}));var k=function e(){_classCallCheck(this,e)};k=r.a([Object(n.K)({imports:[a.a,v],declarations:[g,s,o,b],exports:[g,s,o,b]})],k)},royv:function(e,t,i){"use strict";i.r(t),t.default=""}}]);