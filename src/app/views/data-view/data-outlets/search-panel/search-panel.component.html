<!-- content: search panel -->

<awg-search-form [searchValue]="searchParams.query" (searchRequest)="onSearch($event)"> </awg-search-form>

<ng-container *ngIf="searchParams?.query">
    <awg-search-result-list
        *ngIf="!isLoadingData; else loading"
        [searchParams]="searchParams"
        [searchUrl]="searchUrl"
        (pageChangeRequest)="onPageChange($event)"
        (rowChangeRequest)="onRowChange($event)"
        (viewChangeRequest)="onViewChange($event)"
    >
    </awg-search-result-list>

    <!-- loading spinner -->
    <ng-template #loading>
        <ng-container *ngIf="!errorMessage; else error">
            <awg-twelve-tone-spinner></awg-twelve-tone-spinner>
        </ng-container>
    </ng-template>

    <!-- error message -->
    <ng-template #error>
        <div class="errorMessage" *ngIf="errorMessage">
            <p>Die Anfrage "{{ errorMessage?.route }}" ist fehlgeschlagen.</p>
            <p>Fehlermeldung: "{{ errorMessage?.statusText || errorMessage }}".</p>
            <p>MÃ¶glicherweise gab es ein Problem mit der Internetverbindung oder dem verwendeten Suchbegriff.</p>
        </div>
    </ng-template>
</ng-container>
